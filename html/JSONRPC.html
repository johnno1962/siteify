<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>0001    <span class='comment'><a name='1_0'>//
0002    </a></span><span class='comment'><a name='2_0'>//  JSONRPC.swift
0003    </a></span><span class='comment'><a name='3_0'>//  SwiftLSPClient
0004    </a></span><span class='comment'><a name='4_0'>//
0005    </a></span><span class='comment'><a name='5_0'>//  Created by Matt Massicotte on 2018-10-13.
0006    </a></span><span class='comment'><a name='6_0'>//  Copyright Â© 2018 Matt Massicotte. All rights reserved.
0007    </a></span><span class='comment'><a name='7_0'>//
0008    </a></span>
0009    <span class='keyword'><a name='9_0'>import</a></span> <span class='identifier'><a name='9_7'>Foundation</a></span>
0010    
0011    <span class='builtin'><a name='11_0'>public</a></span> <span class='keyword'><a name='11_7'>enum</a></span> <span class='identifier'><a name='11_12' href='#' title='usrString2' onclick='return expand(this);'>JSONId<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#57_19"; return false;'>JSONRPC.swift:57</td><td><pre>    public let id: JSONId</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#74_19"; return false;'>JSONRPC.swift:74</td><td><pre>    public let id: JSONId</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#80_19"; return false;'>JSONRPC.swift:80</td><td><pre>    public let id: JSONId?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#84_20"; return false;'>JSONRPC.swift:84</td><td><pre>    public init(id: JSONId, result: T) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#93_18"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#98_20"; return false;'>JSONRPC.swift:98</td><td><pre>    public init(id: JSONId, error: ResponseError) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#30_29"; event.stopPropagation(); return false;'>ProtocolTransport.swift:30</td><td><pre>    private var responders: [JSONId: MessageResponder]</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#54_33"; event.stopPropagation(); return false;'>ProtocolTransport.swift:54</td><td><pre>    private func generateID() -> JSONId {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#55_23"; event.stopPropagation(); return false;'>ProtocolTransport.swift:55</td><td><pre>        let issuedId = JSONId.numericId(id)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='11_20'>Codable</a></span>, <span class='typeidentifier'><a name='11_29'>Hashable</a></span> {
0012        <span class='keyword'><a name='12_4'>case</a></span> <span class='identifier'><a name='12_9' href='#' title='usrString2' onclick='return expand(this);'>numericId<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#19_20"; return false;'>JSONRPC.swift:19</td><td><pre>            self = .numericId(value)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#32_14"; return false;'>JSONRPC.swift:32</td><td><pre>        case .numericId(let value):</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#93_25"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#55_30"; event.stopPropagation(); return false;'>ProtocolTransport.swift:55</td><td><pre>        let issuedId = JSONId.numericId(id)</pre></td></table></span></a></span>(<span class='typeidentifier'><a name='12_19'>Int</a></span>)
0013        <span class='keyword'><a name='13_4'>case</a></span> <span class='identifier'><a name='13_9' href='#' title='usrString2' onclick='return expand(this);'>stringId<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#21_20"; return false;'>JSONRPC.swift:21</td><td><pre>            self = .stringId(value)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#34_14"; return false;'>JSONRPC.swift:34</td><td><pre>        case .stringId(let value):</pre></td></table></span></a></span>(<span class='typeidentifier'><a name='13_18'>String</a></span>)
0014        
0015        <span class='builtin'><a name='15_4'>public</a></span> <span class='keyword'><a name='15_11'>init</a></span>(<span class='identifier'><a name='15_16' href='JSONRPC.html#15_11' title='usrString1'>from</a></span> <span class='identifier'><a name='15_21' title='usrString2' onclick='return expand(this);'>decoder<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='15_30'>Decoder</a></span>) <span class='keyword'><a name='15_39'>throws</a></span> {
0016            <span class='keyword'><a name='16_8'>let</a></span> <span class='identifier'><a name='16_12' title='usrString3'>container</a></span> = <span class='keyword'><a name='16_24'>try</a></span> <span class='identifier'><a name='16_28' href='JSONRPC.html#15_21' title='usrString1'>decoder</a></span>.<span class='identifier'><a name='16_36'>singleValueContainer</a></span>()
0017            
0018            <span class='keyword'><a name='18_8'>if</a></span> <span class='keyword'><a name='18_11'>let</a></span> <span class='identifier'><a name='18_15' title='usrString3'>value</a></span> = <span class='keyword'><a name='18_23'>try</a></span>? <span class='identifier'><a name='18_28' href='JSONRPC.html#16_12' title='usrString1'>container</a></span>.<span class='identifier'><a name='18_38'>decode</a></span>(<span class='identifier'><a name='18_45'>Int</a></span>.<span class='keyword'><a name='18_49'>self</a></span>) {
0019                <span class='keyword'><a name='19_12'>self</a></span> = .<span class='identifier'><a name='19_20' href='JSONRPC.html#12_9' title='usrString1'>numericId</a></span>(<span class='identifier'><a name='19_30' href='JSONRPC.html#18_15' title='usrString1'>value</a></span>)
0020            } <span class='keyword'><a name='20_10'>else</a></span> <span class='keyword'><a name='20_15'>if</a></span> <span class='keyword'><a name='20_18'>let</a></span> <span class='identifier'><a name='20_22' title='usrString3'>value</a></span> = <span class='keyword'><a name='20_30'>try</a></span>? <span class='identifier'><a name='20_35' href='JSONRPC.html#16_12' title='usrString1'>container</a></span>.<span class='identifier'><a name='20_45'>decode</a></span>(<span class='identifier'><a name='20_52'>String</a></span>.<span class='keyword'><a name='20_59'>self</a></span>) {
0021                <span class='keyword'><a name='21_12'>self</a></span> = .<span class='identifier'><a name='21_20' href='JSONRPC.html#13_9' title='usrString1'>stringId</a></span>(<span class='identifier'><a name='21_29' href='JSONRPC.html#20_22' title='usrString1'>value</a></span>)
0022            } <span class='keyword'><a name='22_10'>else</a></span> {
0023                <span class='keyword'><a name='23_12'>let</a></span> <span class='identifier'><a name='23_16' title='usrString3'>ctx</a></span> = <span class='identifier'><a name='23_22'>DecodingError</a></span>.<span class='identifier'><a name='23_36'>Context</a></span>(<span class='identifier'><a name='23_44'>codingPath</a></span>: <span class='identifier'><a name='23_56' href='JSONRPC.html#16_12' title='usrString1'>container</a></span>.<span class='identifier'><a name='23_66'>codingPath</a></span>, <span class='identifier'><a name='23_78'>debugDescription</a></span>: <span class='string'><a name='23_96'>"Unknown JSONId Type"</a></span>)
0024                <span class='keyword'><a name='24_12'>throw</a></span> <span class='identifier'><a name='24_18'>DecodingError</a></span>.<span class='identifier'><a name='24_32'>typeMismatch</a></span>(<span class='identifier'><a name='24_45' href='JSONValue.html#11_12' title='usrString1'>JSONValue</a></span>.<span class='keyword'><a name='24_55'>self</a></span>, <span class='identifier'><a name='24_61' href='JSONRPC.html#23_16' title='usrString1'>ctx</a></span>)
0025            }
0026        }
0027        
0028        <span class='builtin'><a name='28_4'>public</a></span> <span class='keyword'><a name='28_11'>func</a></span> <span class='identifier'><a name='28_16' title='usrString2' onclick='return expand(this);'>encode<span class='references'><table></table></span></a></span>(<span class='identifier'><a name='28_23' href='JSONRPC.html#28_16' title='usrString1'>to</a></span> <span class='identifier'><a name='28_26' title='usrString2' onclick='return expand(this);'>encoder<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='28_35'>Encoder</a></span>) <span class='keyword'><a name='28_44'>throws</a></span> {
0029            <span class='keyword'><a name='29_8'>var</a></span> <span class='identifier'><a name='29_12' title='usrString3'>container</a></span> = <span class='identifier'><a name='29_24' href='JSONRPC.html#28_26' title='usrString1'>encoder</a></span>.<span class='identifier'><a name='29_32'>singleValueContainer</a></span>()
0030            
0031            <span class='keyword'><a name='31_8'>switch</a></span> <span class='keyword'><a name='31_15'>self</a></span> {
0032            <span class='keyword'><a name='32_8'>case</a></span> .<span class='identifier'><a name='32_14' href='JSONRPC.html#12_9' title='usrString1'>numericId</a></span>(<span class='keyword'><a name='32_24'>let</a></span> <span class='identifier'><a name='32_28' title='usrString3'>value</a></span>):
0033                <span class='keyword'><a name='33_12'>try</a></span> <span class='identifier'><a name='33_16' href='JSONRPC.html#29_12' title='usrString1'>container</a></span>.<span class='identifier'><a name='33_26'>encode</a></span>(<span class='identifier'><a name='33_33' href='JSONRPC.html#32_28' title='usrString1'>value</a></span>)
0034            <span class='keyword'><a name='34_8'>case</a></span> .<span class='identifier'><a name='34_14' href='JSONRPC.html#13_9' title='usrString1'>stringId</a></span>(<span class='keyword'><a name='34_23'>let</a></span> <span class='identifier'><a name='34_27' title='usrString3'>value</a></span>):
0035                <span class='keyword'><a name='35_12'>try</a></span> <span class='identifier'><a name='35_16' href='JSONRPC.html#29_12' title='usrString1'>container</a></span>.<span class='identifier'><a name='35_26'>encode</a></span>(<span class='identifier'><a name='35_33' href='JSONRPC.html#34_27' title='usrString1'>value</a></span>)
0036            }
0037        }
0038    }
0039    
0040    <span class='builtin'><a name='40_0'>public</a></span> <span class='keyword'><a name='40_7'>enum</a></span> <span class='identifier'><a name='40_12' title='usrString2' onclick='return expand(this);'>ProtocolErrorCode<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='40_31'>Int</a></span>, <span class='typeidentifier'><a name='40_36'>Codable</a></span> {
0041        <span class='keyword'><a name='41_4'>case</a></span> <span class='identifier'><a name='41_9' title='usrString2' onclick='return expand(this);'>parseError<span class='references'><table></table></span></a></span> = <span class='number'><a name='41_22'>-32700</a></span>
0042        <span class='keyword'><a name='42_4'>case</a></span> <span class='identifier'><a name='42_9' title='usrString2' onclick='return expand(this);'>invalidRequest<span class='references'><table></table></span></a></span> = <span class='number'><a name='42_26'>-32600</a></span>
0043        <span class='keyword'><a name='43_4'>case</a></span> <span class='identifier'><a name='43_9' title='usrString2' onclick='return expand(this);'>methodNotFound<span class='references'><table></table></span></a></span> = <span class='number'><a name='43_26'>-32601</a></span>
0044        <span class='keyword'><a name='44_4'>case</a></span> <span class='identifier'><a name='44_9' title='usrString2' onclick='return expand(this);'>invalidParams<span class='references'><table></table></span></a></span> = <span class='number'><a name='44_25'>-32602</a></span>
0045        <span class='keyword'><a name='45_4'>case</a></span> <span class='identifier'><a name='45_9' title='usrString2' onclick='return expand(this);'>internalError<span class='references'><table></table></span></a></span> = <span class='number'><a name='45_25'>-32603</a></span>
0046        <span class='keyword'><a name='46_4'>case</a></span> <span class='identifier'><a name='46_9' title='usrString2' onclick='return expand(this);'>serverErrorStart<span class='references'><table></table></span></a></span> = <span class='number'><a name='46_28'>-32099</a></span>
0047        <span class='keyword'><a name='47_4'>case</a></span> <span class='identifier'><a name='47_9' title='usrString2' onclick='return expand(this);'>serverErrorEnd<span class='references'><table></table></span></a></span> = <span class='number'><a name='47_26'>-32000</a></span>
0048        <span class='keyword'><a name='48_4'>case</a></span> <span class='identifier'><a name='48_9' title='usrString2' onclick='return expand(this);'>serverNotInitialized<span class='references'><table></table></span></a></span> = <span class='number'><a name='48_32'>-32002</a></span>
0049        <span class='keyword'><a name='49_4'>case</a></span> <span class='identifier'><a name='49_9' title='usrString2' onclick='return expand(this);'>unknownErrorCode<span class='references'><table></table></span></a></span> = <span class='number'><a name='49_28'>-32001</a></span>
0050        
0051        <span class='keyword'><a name='51_4'>case</a></span> <span class='identifier'><a name='51_9' title='usrString2' onclick='return expand(this);'>requestCancelled<span class='references'><table></table></span></a></span> = <span class='number'><a name='51_28'>-32800</a></span>
0052    }
0053    
0054    <span class='comment'><a name='54_0'>// MARK: Requests, Responses, and Errors
0055    </a></span><span class='builtin'><a name='55_0'>public</a></span> <span class='keyword'><a name='55_7'>struct</a></span> <span class='identifier'><a name='55_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCRequest<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#66_29"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>&lt;<span class='identifier'><a name='55_29' href='#' title='usrString2' onclick='return expand(this);'>T<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#55_47"; return false;'>JSONRPC.swift:55</td><td><pre>public struct JSONRPCRequest&lt;T>: Codable where T: Codable {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#59_23"; return false;'>JSONRPC.swift:59</td><td><pre>    public let params: T?</pre></td></table></span></a></span>>: <span class='typeidentifier'><a name='55_33'>Codable</a></span> <span class='keyword'><a name='55_41'>where</a></span> <span class='typeidentifier'><a name='55_47'>T</a></span>: <span class='typeidentifier'><a name='55_50'>Codable</a></span> {
0056        <span class='builtin'><a name='56_4'>public</a></span> <span class='keyword'><a name='56_11'>let</a></span> <span class='identifier'><a name='56_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span> = <span class='string'><a name='56_25'>"2.0"</a></span>
0057        <span class='builtin'><a name='57_4'>public</a></span> <span class='keyword'><a name='57_11'>let</a></span> <span class='identifier'><a name='57_15' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#66_44"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='57_19'>JSONId</a></span>
0058        <span class='builtin'><a name='58_4'>public</a></span> <span class='keyword'><a name='58_11'>let</a></span> <span class='identifier'><a name='58_15' href='#' title='usrString2' onclick='return expand(this);'>method<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#66_58"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='58_23'>String</a></span>
0059        <span class='builtin'><a name='59_4'>public</a></span> <span class='keyword'><a name='59_11'>let</a></span> <span class='identifier'><a name='59_15' href='#' title='usrString2' onclick='return expand(this);'>params<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#66_74"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='59_23'>T</a></span>?
0060    }
0061    
0062    <span class='builtin'><a name='62_0'>public</a></span> <span class='keyword'><a name='62_7'>struct</a></span> <span class='identifier'><a name='62_14' href='#' title='usrString2' onclick='return expand(this);'>ResponseError<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#75_22"; return false;'>JSONRPC.swift:75</td><td><pre>    public let error: ResponseError?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#82_22"; return false;'>JSONRPC.swift:82</td><td><pre>    public let error: ResponseError?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#98_35"; return false;'>JSONRPC.swift:98</td><td><pre>    public init(id: JSONId, error: ResponseError) {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='62_29'>Codable</a></span> {
0063        <span class='builtin'><a name='63_4'>public</a></span> <span class='keyword'><a name='63_11'>let</a></span> <span class='identifier'><a name='63_15' href='#' title='usrString2' onclick='return expand(this);'>code<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#68_53"; return false;'>JSONRPC.swift:68</td><td><pre>        return LanguageServerError.serverError(code: code, message: message, data: nil)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='63_21'>Int</a></span>
0064        <span class='builtin'><a name='64_4'>public</a></span> <span class='keyword'><a name='64_11'>let</a></span> <span class='identifier'><a name='64_15' href='#' title='usrString2' onclick='return expand(this);'>message<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#68_68"; return false;'>JSONRPC.swift:68</td><td><pre>        return LanguageServerError.serverError(code: code, message: message, data: nil)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='64_24'>String</a></span>
0065        <span class='builtin'><a name='65_4'>public</a></span> <span class='keyword'><a name='65_11'>let</a></span> <span class='identifier'><a name='65_15' title='usrString2' onclick='return expand(this);'>data<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='65_21'>JSONValue</a></span>
0066    
0067        <span class='builtin'><a name='67_4'>public</a></span> <span class='keyword'><a name='67_11'>var</a></span> <span class='identifier'><a name='67_15' href='#' title='usrString2' onclick='return expand(this);'>languageServerError<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.html#93_38"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:93</td><td><pre>            block(.failure(errorParam.languageServerError))</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='67_36'>LanguageServerError</a></span> {
0068            <span class='keyword'><a name='68_8'>return</a></span> <span class='identifier'><a name='68_15' href='LanguageServer.html#11_12' title='usrString1'>LanguageServerError</a></span>.<span class='identifier'><a name='68_35' href='LanguageServer.html#21_9' title='usrString1'>serverError</a></span>(<span class='identifier'><a name='68_47' href='LanguageServer.html#21_9' title='usrString1'>code</a></span>: <span class='identifier'><a name='68_53' href='JSONRPC.html#63_15' title='usrString1'>code</a></span>, <span class='identifier'><a name='68_59' href='LanguageServer.html#21_9' title='usrString1'>message</a></span>: <span class='identifier'><a name='68_68' href='JSONRPC.html#64_15' title='usrString1'>message</a></span>, <span class='identifier'><a name='68_77' href='LanguageServer.html#21_9' title='usrString1'>data</a></span>: <span class='keyword'><a name='68_83'>nil</a></span>)
0069        }
0070    }
0071    
0072    <span class='builtin'><a name='72_0'>public</a></span> <span class='keyword'><a name='72_7'>struct</a></span> <span class='identifier'><a name='72_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCResponse<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#123_54"; event.stopPropagation(); return false;'>ProtocolTransport.swift:123</td><td><pre>            if let message = try? self.decoder.decode(JSONRPCResponse.self, from: data) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#137_44"; event.stopPropagation(); return false;'>ProtocolTransport.swift:137</td><td><pre>    private func dispatchMessage(_ message: JSONRPCResponse, originalData data: Data) {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='72_31'>Codable</a></span> {
0073        <span class='builtin'><a name='73_4'>public</a></span> <span class='keyword'><a name='73_11'>let</a></span> <span class='identifier'><a name='73_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='73_24'>String</a></span>
0074        <span class='builtin'><a name='74_4'>public</a></span> <span class='keyword'><a name='74_11'>let</a></span> <span class='identifier'><a name='74_15' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#142_49"; event.stopPropagation(); return false;'>ProtocolTransport.swift:142</td><td><pre>        guard let responder = responders[message.id] else {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#144_56"; event.stopPropagation(); return false;'>ProtocolTransport.swift:144</td><td><pre>            print("not matching responder for \(message.id), dropping message")</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#151_47"; event.stopPropagation(); return false;'>ProtocolTransport.swift:151</td><td><pre>        responders.removeValue(forKey: message.id)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='74_19'>JSONId</a></span>
0075        <span class='builtin'><a name='75_4'>public</a></span> <span class='keyword'><a name='75_11'>let</a></span> <span class='identifier'><a name='75_15' title='usrString2' onclick='return expand(this);'>error<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='75_22'>ResponseError</a></span>?
0076    }
0077    
0078    <span class='builtin'><a name='78_0'>public</a></span> <span class='keyword'><a name='78_7'>struct</a></span> <span class='identifier'><a name='78_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCResultResponse<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#24_57"; event.stopPropagation(); return false;'>ProtocolTransport.swift:24</td><td><pre>    public typealias ResponseResult&lt;T: Codable> = Result&lt;JSONRPCResultResponse&lt;T>, ProtocolTransportError></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#92_61"; event.stopPropagation(); return false;'>ProtocolTransport.swift:92</td><td><pre>                    let jsonResult = try self.decoder.decode(JSONRPCResultResponse&lt;T>.self, from: data)</pre></td></table></span></a></span>&lt;<span class='identifier'><a name='78_36' href='#' title='usrString2' onclick='return expand(this);'>T<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#78_54"; return false;'>JSONRPC.swift:78</td><td><pre>public struct JSONRPCResultResponse&lt;T>: Codable where T: Codable {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#81_23"; return false;'>JSONRPC.swift:81</td><td><pre>    public let result: T?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#84_36"; return false;'>JSONRPC.swift:84</td><td><pre>    public init(id: JSONId, result: T) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#91_33"; return false;'>JSONRPC.swift:91</td><td><pre>    public init(id: Int, result: T) {</pre></td></table></span></a></span>>: <span class='typeidentifier'><a name='78_40'>Codable</a></span> <span class='keyword'><a name='78_48'>where</a></span> <span class='typeidentifier'><a name='78_54'>T</a></span>: <span class='typeidentifier'><a name='78_57'>Codable</a></span> {
0079        <span class='builtin'><a name='79_4'>public</a></span> <span class='keyword'><a name='79_11'>let</a></span> <span class='identifier'><a name='79_15' href='#' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#85_13"; return false;'>JSONRPC.swift:85</td><td><pre>        self.jsonrpc = "2.0"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#92_13"; return false;'>JSONRPC.swift:92</td><td><pre>        self.jsonrpc = "2.0"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#99_13"; return false;'>JSONRPC.swift:99</td><td><pre>        self.jsonrpc = "2.0"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='79_24'>String</a></span>
0080        <span class='builtin'><a name='80_4'>public</a></span> <span class='keyword'><a name='80_11'>let</a></span> <span class='identifier'><a name='80_15' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#86_13"; return false;'>JSONRPC.swift:86</td><td><pre>        self.id = id</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#93_13"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#100_13"; return false;'>JSONRPC.swift:100</td><td><pre>        self.id = id</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='80_19'>JSONId</a></span>?
0081        <span class='builtin'><a name='81_4'>public</a></span> <span class='keyword'><a name='81_11'>let</a></span> <span class='identifier'><a name='81_15' href='#' title='usrString2' onclick='return expand(this);'>result<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#87_13"; return false;'>JSONRPC.swift:87</td><td><pre>        self.result = result</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#94_13"; return false;'>JSONRPC.swift:94</td><td><pre>        self.result = result</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#101_13"; return false;'>JSONRPC.swift:101</td><td><pre>        self.result = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.html#90_47"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:90</td><td><pre>        if let responseParam = responseMessage.result {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='81_23'>T</a></span>?
0082        <span class='builtin'><a name='82_4'>public</a></span> <span class='keyword'><a name='82_11'>let</a></span> <span class='identifier'><a name='82_15' href='#' title='usrString2' onclick='return expand(this);'>error<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#88_13"; return false;'>JSONRPC.swift:88</td><td><pre>        self.error = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#95_13"; return false;'>JSONRPC.swift:95</td><td><pre>        self.error = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#102_13"; return false;'>JSONRPC.swift:102</td><td><pre>        self.error = error</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.html#92_51"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:92</td><td><pre>        } else if let errorParam = responseMessage.error {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='82_22'>ResponseError</a></span>?
0083    
0084        <span class='builtin'><a name='84_4'>public</a></span> <span class='keyword'><a name='84_11'>init</a></span>(<span class='identifier'><a name='84_16' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#86_18"; return false;'>JSONRPC.swift:86</td><td><pre>        self.id = id</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='84_20'>JSONId</a></span>, <span class='identifier'><a name='84_28' href='#' title='usrString2' onclick='return expand(this);'>result<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#87_22"; return false;'>JSONRPC.swift:87</td><td><pre>        self.result = result</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='84_36'>T</a></span>) {
0085            <span class='keyword'><a name='85_8'>self</a></span>.<span class='identifier'><a name='85_13' href='JSONRPC.html#79_15' title='usrString1'>jsonrpc</a></span> = <span class='string'><a name='85_23'>"2.0"</a></span>
0086            <span class='keyword'><a name='86_8'>self</a></span>.<span class='identifier'><a name='86_13' href='JSONRPC.html#80_15' title='usrString1'>id</a></span> = <span class='identifier'><a name='86_18' href='JSONRPC.html#84_16' title='usrString1'>id</a></span>
0087            <span class='keyword'><a name='87_8'>self</a></span>.<span class='identifier'><a name='87_13' href='JSONRPC.html#81_15' title='usrString1'>result</a></span> = <span class='identifier'><a name='87_22' href='JSONRPC.html#84_28' title='usrString1'>result</a></span>
0088            <span class='keyword'><a name='88_8'>self</a></span>.<span class='identifier'><a name='88_13' href='JSONRPC.html#82_15' title='usrString1'>error</a></span> = <span class='keyword'><a name='88_21'>nil</a></span>
0089        }
0090    
0091        <span class='builtin'><a name='91_4'>public</a></span> <span class='keyword'><a name='91_11'>init</a></span>(<span class='identifier'><a name='91_16' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#93_35"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='91_20'>Int</a></span>, <span class='identifier'><a name='91_25' href='#' title='usrString2' onclick='return expand(this);'>result<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#94_22"; return false;'>JSONRPC.swift:94</td><td><pre>        self.result = result</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='91_33'>T</a></span>) {
0092            <span class='keyword'><a name='92_8'>self</a></span>.<span class='identifier'><a name='92_13' href='JSONRPC.html#79_15' title='usrString1'>jsonrpc</a></span> = <span class='string'><a name='92_23'>"2.0"</a></span>
0093            <span class='keyword'><a name='93_8'>self</a></span>.<span class='identifier'><a name='93_13' href='JSONRPC.html#80_15' title='usrString1'>id</a></span> = <span class='identifier'><a name='93_18' href='JSONRPC.html#11_12' title='usrString1'>JSONId</a></span>.<span class='identifier'><a name='93_25' href='JSONRPC.html#12_9' title='usrString1'>numericId</a></span>(<span class='identifier'><a name='93_35' href='JSONRPC.html#91_16' title='usrString1'>id</a></span>)
0094            <span class='keyword'><a name='94_8'>self</a></span>.<span class='identifier'><a name='94_13' href='JSONRPC.html#81_15' title='usrString1'>result</a></span> = <span class='identifier'><a name='94_22' href='JSONRPC.html#91_25' title='usrString1'>result</a></span>
0095            <span class='keyword'><a name='95_8'>self</a></span>.<span class='identifier'><a name='95_13' href='JSONRPC.html#82_15' title='usrString1'>error</a></span> = <span class='keyword'><a name='95_21'>nil</a></span>
0096        }
0097    
0098        <span class='builtin'><a name='98_4'>public</a></span> <span class='keyword'><a name='98_11'>init</a></span>(<span class='identifier'><a name='98_16' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#100_18"; return false;'>JSONRPC.swift:100</td><td><pre>        self.id = id</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='98_20'>JSONId</a></span>, <span class='identifier'><a name='98_28' href='#' title='usrString2' onclick='return expand(this);'>error<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#102_21"; return false;'>JSONRPC.swift:102</td><td><pre>        self.error = error</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='98_35'>ResponseError</a></span>) {
0099            <span class='keyword'><a name='99_8'>self</a></span>.<span class='identifier'><a name='99_13' href='JSONRPC.html#79_15' title='usrString1'>jsonrpc</a></span> = <span class='string'><a name='99_23'>"2.0"</a></span>
0100            <span class='keyword'><a name='100_8'>self</a></span>.<span class='identifier'><a name='100_13' href='JSONRPC.html#80_15' title='usrString1'>id</a></span> = <span class='identifier'><a name='100_18' href='JSONRPC.html#98_16' title='usrString1'>id</a></span>
0101            <span class='keyword'><a name='101_8'>self</a></span>.<span class='identifier'><a name='101_13' href='JSONRPC.html#81_15' title='usrString1'>result</a></span> = <span class='keyword'><a name='101_22'>nil</a></span>
0102            <span class='keyword'><a name='102_8'>self</a></span>.<span class='identifier'><a name='102_13' href='JSONRPC.html#82_15' title='usrString1'>error</a></span> = <span class='identifier'><a name='102_21' href='JSONRPC.html#98_28' title='usrString1'>error</a></span>
0103        }
0104    }
0105    
0106    <span class='builtin'><a name='106_0'>public</a></span> <span class='keyword'><a name='106_7'>struct</a></span> <span class='identifier'><a name='106_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCNotification<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#128_59"; event.stopPropagation(); return false;'>ProtocolTransport.swift:128</td><td><pre>            if let notification = try? self.decoder.decode(JSONRPCNotification.self, from: data) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#154_54"; event.stopPropagation(); return false;'>ProtocolTransport.swift:154</td><td><pre>    private func dispatchNotification(_ notification: JSONRPCNotification, originalData data: Data) {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='106_35'>Codable</a></span> {
0107        <span class='builtin'><a name='107_4'>public</a></span> <span class='keyword'><a name='107_11'>let</a></span> <span class='identifier'><a name='107_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span> = <span class='string'><a name='107_25'>"2.0"</a></span>
0108        <span class='builtin'><a name='108_4'>public</a></span> <span class='keyword'><a name='108_11'>let</a></span> <span class='identifier'><a name='108_15' href='#' title='usrString2' onclick='return expand(this);'>method<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#155_34"; event.stopPropagation(); return false;'>ProtocolTransport.swift:155</td><td><pre>        let method = notification.method</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='108_23'>String</a></span>
0109    }
0110    
0111    <span class='builtin'><a name='111_0'>public</a></span> <span class='keyword'><a name='111_7'>struct</a></span> <span class='identifier'><a name='111_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCNotificationParams<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#103_27"; event.stopPropagation(); return false;'>ProtocolTransport.swift:103</td><td><pre>        let notification = JSONRPCNotificationParams(method: method, params: params)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.html#67_29"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:67</td><td><pre>            let resultType = JSONRPCNotificationParams&lt;T>.self</pre></td></table></span></a></span>&lt;<span class='identifier'><a name='111_40' href='#' title='usrString2' onclick='return expand(this);'>T<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#111_58"; return false;'>JSONRPC.swift:111</td><td><pre>public struct JSONRPCNotificationParams&lt;T>: Codable where T: Codable {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.html#114_23"; return false;'>JSONRPC.swift:114</td><td><pre>    public let params: T?</pre></td></table></span></a></span>>: <span class='typeidentifier'><a name='111_44'>Codable</a></span> <span class='keyword'><a name='111_52'>where</a></span> <span class='typeidentifier'><a name='111_58'>T</a></span>: <span class='typeidentifier'><a name='111_61'>Codable</a></span> {
0112        <span class='builtin'><a name='112_4'>public</a></span> <span class='keyword'><a name='112_11'>let</a></span> <span class='identifier'><a name='112_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span> = <span class='string'><a name='112_25'>"2.0"</a></span>
0113        <span class='builtin'><a name='113_4'>public</a></span> <span class='keyword'><a name='113_11'>let</a></span> <span class='identifier'><a name='113_15' href='#' title='usrString2' onclick='return expand(this);'>method<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#103_53"; event.stopPropagation(); return false;'>ProtocolTransport.swift:103</td><td><pre>        let notification = JSONRPCNotificationParams(method: method, params: params)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='113_23'>String</a></span>
0114        <span class='builtin'><a name='114_4'>public</a></span> <span class='keyword'><a name='114_11'>let</a></span> <span class='identifier'><a name='114_15' href='#' title='usrString2' onclick='return expand(this);'>params<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.html#103_69"; event.stopPropagation(); return false;'>ProtocolTransport.swift:103</td><td><pre>        let notification = JSONRPCNotificationParams(method: method, params: params)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.html#70_38"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:70</td><td><pre>            guard let params = result.params else {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='114_23'>T</a></span>?
0115    }
0116    