<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>
0001    <span class='comment'><a name='1_0' title='usrString0'>//
0002    </a></span><span class='comment'><a name='2_0' title='usrString0'>//  RemoteLanguageServer.swift
0003    </a></span><span class='comment'><a name='3_0' title='usrString0'>//  SwiftLSPClient
0004    </a></span><span class='comment'><a name='4_0' title='usrString0'>//
0005    </a></span><span class='comment'><a name='5_0' title='usrString0'>//  Created by Matt Massicotte on 2018-10-13.
0006    </a></span><span class='comment'><a name='6_0' title='usrString0'>//  Copyright Â© 2018 Chime Systems. All rights reserved.
0007    </a></span><span class='comment'><a name='7_0' title='usrString0'>//
0008    </a></span>
0009    <span class='keyword'><a name='9_0' title='usrString0'>import</a></span> <span class='identifier'><a name='9_7'>Foundation</a></span>
0010    
0011    <span class='builtin'><a name='11_0' title='usrString0'>public</a></span> <span class='keyword'><a name='11_7' title='usrString0'>class</a></span> <span class='identifier'><a name='11_13'>JSONRPCLanguageServer</a></span> {
0012        <span class='builtin'><a name='12_4' title='usrString0'>private</a></span> <span class='keyword'><a name='12_12' title='usrString0'>var</a></span> <span class='identifier'><a name='12_16'>messageId</a></span>: <span class='typeidentifier'><a name='12_27' title='usrString0'>Int</a></span>
0013        <span class='builtin'><a name='13_4' title='usrString0'>private</a></span> <span class='keyword'><a name='13_12' title='usrString0'>let</a></span> <span class='identifier'><a name='13_16'>protocolTransport</a></span>: <span class='typeidentifier'><a name='13_35' title='usrString0'>ProtocolTransport</a></span>
0014        <span class='builtin'><a name='14_4' title='usrString0'>public</a></span> <span class='builtin'><a name='14_11' title='usrString0'>weak</a></span> <span class='keyword'><a name='14_16' title='usrString0'>var</a></span> <span class='identifier'><a name='14_20'>notificationResponder</a></span>: <span class='typeidentifier'><a name='14_43' title='usrString0'>NotificationResponder</a></span>?
0015        
0016        <span class='builtin'><a name='16_4' title='usrString0'>public</a></span> <span class='keyword'><a name='16_11' title='usrString0'>init</a></span>(<span class='identifier'><a name='16_16'>dataTransport</a></span>: <span class='typeidentifier'><a name='16_31' title='usrString0'>DataTransport</a></span>) {
0017            <span class='keyword'><a name='17_8' title='usrString0'>self</a></span>.<span class='identifier'><a name='17_13'>messageId</a></span> = <span class='number'><a name='17_25' title='usrString0'>0</a></span>
0018    
0019            <span class='keyword'><a name='19_8' title='usrString0'>self</a></span>.<span class='identifier'><a name='19_13'>protocolTransport</a></span> = <span class='identifier'><a name='19_33'>ProtocolTransport</a></span>(<span class='identifier'><a name='19_51'>dataTransport</a></span>: <span class='identifier'><a name='19_66'>dataTransport</a></span>)
0020    
0021            <span class='keyword'><a name='21_8' title='usrString0'>self</a></span>.<span class='identifier'><a name='21_13'>protocolTransport</a></span>.<span class='identifier'><a name='21_31'>delegate</a></span> = <span class='keyword'><a name='21_42' title='usrString0'>self</a></span>
0022        }
0023    }
0024    
0025    <span class='keyword'><a name='25_0' title='usrString0'>extension</a></span> <span class='typeidentifier'><a name='25_10' title='usrString0'>JSONRPCLanguageServer</a></span>: <span class='typeidentifier'><a name='25_33' title='usrString0'>ProtocolTransportDelegate</a></span> {
0026        <span class='builtin'><a name='26_4' title='usrString0'>public</a></span> <span class='keyword'><a name='26_11' title='usrString0'>func</a></span> <span class='identifier'><a name='26_16'>transportReceived</a></span>(<span class='keyword'><a name='26_34' title='usrString0'>_</a></span> <span class='identifier'><a name='26_36'>transport</a></span>: <span class='typeidentifier'><a name='26_47' title='usrString0'>ProtocolTransport</a></span>, <span class='identifier'><a name='26_66'>undecodableData</a></span> <span class='identifier'><a name='26_82'>data</a></span>: <span class='typeidentifier'><a name='26_88' title='usrString0'>Data</a></span>) {
0027            <span class='keyword'><a name='27_8' title='usrString0'>if</a></span> <span class='keyword'><a name='27_11' title='usrString0'>let</a></span> <span class='identifier'><a name='27_15'>string</a></span> = <span class='identifier'><a name='27_24'>String</a></span>(<span class='identifier'><a name='27_31'>data</a></span>: <span class='identifier'><a name='27_37'>data</a></span>, <span class='identifier'><a name='27_43'>encoding</a></span>: .<span class='identifier'><a name='27_54'>utf8</a></span>) {
0028                <span class='identifier'><a name='28_12'>print</a></span>(<span class='string'><a name='28_18' title='usrString0'>"undecodable data received: </a></span>\<span class='string_interpolation_anchor'><a name='28_47' title='usrString0'>(</a></span><span class='identifier'><a name='28_48'>string</a></span><span class='string_interpolation_anchor'><a name='28_54' title='usrString0'>)</a></span><span class='string'><a name='28_55' title='usrString0'>"</a></span>)
0029            } <span class='keyword'><a name='29_10' title='usrString0'>else</a></span> {
0030                <span class='identifier'><a name='30_12'>print</a></span>(<span class='string'><a name='30_18' title='usrString0'>"undecodable data received: </a></span>\<span class='string_interpolation_anchor'><a name='30_47' title='usrString0'>(</a></span><span class='identifier'><a name='30_48'>data</a></span><span class='string_interpolation_anchor'><a name='30_52' title='usrString0'>)</a></span><span class='string'><a name='30_53' title='usrString0'>"</a></span>)
0031            }
0032        }
0033    
0034        <span class='builtin'><a name='34_4' title='usrString0'>public</a></span> <span class='keyword'><a name='34_11' title='usrString0'>func</a></span> <span class='identifier'><a name='34_16'>transportReceived</a></span>(<span class='keyword'><a name='34_34' title='usrString0'>_</a></span> <span class='identifier'><a name='34_36'>transport</a></span>: <span class='typeidentifier'><a name='34_47' title='usrString0'>ProtocolTransport</a></span>, <span class='identifier'><a name='34_66'>notificationMethod</a></span>: <span class='typeidentifier'><a name='34_86' title='usrString0'>String</a></span>, <span class='identifier'><a name='34_94'>data</a></span>: <span class='typeidentifier'><a name='34_100' title='usrString0'>Data</a></span>) {
0035            <span class='keyword'><a name='35_8' title='usrString0'>guard</a></span> <span class='keyword'><a name='35_14' title='usrString0'>let</a></span> <span class='identifier'><a name='35_18'>responder</a></span> = <span class='identifier'><a name='35_30'>notificationResponder</a></span> <span class='keyword'><a name='35_52' title='usrString0'>else</a></span> {
0036                <span class='keyword'><a name='36_12' title='usrString0'>return</a></span>
0037            }
0038    
0039            <span class='keyword'><a name='39_8' title='usrString0'>switch</a></span> <span class='identifier'><a name='39_15'>notificationMethod</a></span> {
0040            <span class='keyword'><a name='40_8' title='usrString0'>case</a></span> <span class='identifier'><a name='40_13'>ProtocolMethod</a></span>.<span class='identifier'><a name='40_28'>Initialized</a></span>:
0041                <span class='identifier'><a name='41_12'>responder</a></span>.<span class='identifier'><a name='41_22'>languageServerInitialized</a></span>(<span class='keyword'><a name='41_48' title='usrString0'>self</a></span>)
0042            <span class='keyword'><a name='42_8' title='usrString0'>case</a></span> <span class='identifier'><a name='42_13'>ProtocolMethod</a></span>.<span class='identifier'><a name='42_28'>Window</a></span>.<span class='identifier'><a name='42_35'>LogMessage</a></span>:
0043                <span class='identifier'><a name='43_12'>decodeNotification</a></span>(<span class='identifier'><a name='43_31'>named</a></span>: <span class='identifier'><a name='43_38'>notificationMethod</a></span>, <span class='identifier'><a name='43_58'>data</a></span>: <span class='identifier'><a name='43_64'>data</a></span>) { (<span class='identifier'><a name='43_73'>value</a></span>: <span class='typeidentifier'><a name='43_80' title='usrString0'>LogMessageParams</a></span>) <span class='keyword'><a name='43_98' title='usrString0'>in</a></span>
0044                    <span class='identifier'><a name='44_16'>responder</a></span>.<span class='identifier'><a name='44_26'>languageServer</a></span>(<span class='keyword'><a name='44_41' title='usrString0'>self</a></span>, <span class='identifier'><a name='44_47'>logMessage</a></span>: <span class='identifier'><a name='44_59'>value</a></span>)
0045                }
0046            <span class='keyword'><a name='46_8' title='usrString0'>case</a></span> <span class='identifier'><a name='46_13'>ProtocolMethod</a></span>.<span class='identifier'><a name='46_28'>Window</a></span>.<span class='identifier'><a name='46_35'>ShowMessage</a></span>:
0047                <span class='identifier'><a name='47_12'>decodeNotification</a></span>(<span class='identifier'><a name='47_31'>named</a></span>: <span class='identifier'><a name='47_38'>notificationMethod</a></span>, <span class='identifier'><a name='47_58'>data</a></span>: <span class='identifier'><a name='47_64'>data</a></span>) { (<span class='identifier'><a name='47_73'>value</a></span>: <span class='typeidentifier'><a name='47_80' title='usrString0'>ShowMessageParams</a></span>) <span class='keyword'><a name='47_99' title='usrString0'>in</a></span>
0048                    <span class='identifier'><a name='48_16'>responder</a></span>.<span class='identifier'><a name='48_26'>languageServer</a></span>(<span class='keyword'><a name='48_41' title='usrString0'>self</a></span>, <span class='identifier'><a name='48_47'>showMessage</a></span>: <span class='identifier'><a name='48_60'>value</a></span>)
0049                }
0050            <span class='keyword'><a name='50_8' title='usrString0'>case</a></span> <span class='identifier'><a name='50_13'>ProtocolMethod</a></span>.<span class='identifier'><a name='50_28'>Window</a></span>.<span class='identifier'><a name='50_35'>ShowMessageRequest</a></span>:
0051                <span class='identifier'><a name='51_12'>decodeNotification</a></span>(<span class='identifier'><a name='51_31'>named</a></span>: <span class='identifier'><a name='51_38'>notificationMethod</a></span>, <span class='identifier'><a name='51_58'>data</a></span>: <span class='identifier'><a name='51_64'>data</a></span>) { (<span class='identifier'><a name='51_73'>value</a></span>: <span class='typeidentifier'><a name='51_80' title='usrString0'>ShowMessageRequestParams</a></span>) <span class='keyword'><a name='51_106' title='usrString0'>in</a></span>
0052                    <span class='identifier'><a name='52_16'>responder</a></span>.<span class='identifier'><a name='52_26'>languageServer</a></span>(<span class='keyword'><a name='52_41' title='usrString0'>self</a></span>, <span class='identifier'><a name='52_47'>showMessageRequest</a></span>: <span class='identifier'><a name='52_67'>value</a></span>)
0053                }
0054            <span class='keyword'><a name='54_8' title='usrString0'>case</a></span> <span class='identifier'><a name='54_13'>ProtocolMethod</a></span>.<span class='identifier'><a name='54_28'>TextDocument</a></span>.<span class='identifier'><a name='54_41'>PublishDiagnostics</a></span>:
0055                <span class='identifier'><a name='55_12'>decodeNotification</a></span>(<span class='identifier'><a name='55_31'>named</a></span>: <span class='identifier'><a name='55_38'>notificationMethod</a></span>, <span class='identifier'><a name='55_58'>data</a></span>: <span class='identifier'><a name='55_64'>data</a></span>) { (<span class='identifier'><a name='55_73'>value</a></span>: <span class='typeidentifier'><a name='55_80' title='usrString0'>PublishDiagnosticsParams</a></span>) <span class='keyword'><a name='55_106' title='usrString0'>in</a></span>
0056                    <span class='identifier'><a name='56_16'>responder</a></span>.<span class='identifier'><a name='56_26'>languageServer</a></span>(<span class='keyword'><a name='56_41' title='usrString0'>self</a></span>, <span class='identifier'><a name='56_47'>publishDiagnostics</a></span>: <span class='identifier'><a name='56_67'>value</a></span>)
0057                }
0058            <span class='keyword'><a name='58_8' title='usrString0'>default</a></span>:
0059                <span class='keyword'><a name='59_12' title='usrString0'>break</a></span>
0060            }
0061        }
0062    
0063        <span class='builtin'><a name='63_4' title='usrString0'>private</a></span> <span class='keyword'><a name='63_12' title='usrString0'>func</a></span> <span class='identifier'><a name='63_17'>decodeNotification</a></span>&lt;<span class='identifier'><a name='63_36'>T</a></span>: <span class='typeidentifier'><a name='63_39' title='usrString0'>Codable</a></span>>(<span class='identifier'><a name='63_48'>named</a></span> <span class='identifier'><a name='63_54'>name</a></span>: <span class='typeidentifier'><a name='63_60' title='usrString0'>String</a></span>, <span class='identifier'><a name='63_68'>data</a></span>: <span class='typeidentifier'><a name='63_74' title='usrString0'>Data</a></span>, <span class='identifier'><a name='63_80'>onSuccess</a></span>: (<span class='typeidentifier'><a name='63_92' title='usrString0'>T</a></span>) -> <span class='typeidentifier'><a name='63_98' title='usrString0'>Void</a></span>) {
0064            <span class='keyword'><a name='64_8' title='usrString0'>let</a></span> <span class='identifier'><a name='64_12'>responder</a></span> = <span class='identifier'><a name='64_24'>notificationResponder</a></span>
0065    
0066            <span class='keyword'><a name='66_8' title='usrString0'>do</a></span> {
0067                <span class='keyword'><a name='67_12' title='usrString0'>let</a></span> <span class='identifier'><a name='67_16'>resultType</a></span> = <span class='identifier'><a name='67_29'>JSONRPCNotificationParams</a></span>&lt;<span class='typeidentifier'><a name='67_55' title='usrString0'>T</a></span>>.<span class='keyword'><a name='67_58' title='usrString0'>self</a></span>
0068                <span class='keyword'><a name='68_12' title='usrString0'>let</a></span> <span class='identifier'><a name='68_16'>result</a></span> = <span class='keyword'><a name='68_25' title='usrString0'>try</a></span> <span class='identifier'><a name='68_29'>JSONDecoder</a></span>().<span class='identifier'><a name='68_43'>decode</a></span>(<span class='identifier'><a name='68_50'>resultType</a></span>, <span class='identifier'><a name='68_62'>from</a></span>: <span class='identifier'><a name='68_68'>data</a></span>)
0069    
0070                <span class='keyword'><a name='70_12' title='usrString0'>guard</a></span> <span class='keyword'><a name='70_18' title='usrString0'>let</a></span> <span class='identifier'><a name='70_22'>params</a></span> = <span class='identifier'><a name='70_31'>result</a></span>.<span class='identifier'><a name='70_38'>params</a></span> <span class='keyword'><a name='70_45' title='usrString0'>else</a></span> {
0071                    <span class='identifier'><a name='71_16'>responder</a></span>?.<span class='identifier'><a name='71_27'>languageServer</a></span>(<span class='keyword'><a name='71_42' title='usrString0'>self</a></span>, <span class='identifier'><a name='71_48'>failedToDecodeNotification</a></span>: <span class='identifier'><a name='71_76'>name</a></span>, <span class='identifier'><a name='71_82'>with</a></span>: <span class='identifier'><a name='71_88'>LanguageServerError</a></span>.<span class='identifier'><a name='71_108'>missingExpectedResult</a></span>)
0072    
0073                    <span class='keyword'><a name='73_16' title='usrString0'>return</a></span>
0074                }
0075    
0076                <span class='keyword'><a name='76_12' title='usrString0'>return</a></span> <span class='identifier'><a name='76_19'>onSuccess</a></span>(<span class='identifier'><a name='76_29'>params</a></span>)
0077            } <span class='keyword'><a name='77_10' title='usrString0'>catch</a></span> {
0078                <span class='keyword'><a name='78_12' title='usrString0'>let</a></span> <span class='identifier'><a name='78_16'>newError</a></span> = <span class='identifier'><a name='78_27'>LanguageServerError</a></span>.<span class='identifier'><a name='78_47'>unableToDecodeResponse</a></span>(<span class='identifier'><a name='78_70'>error</a></span>)
0079    
0080                <span class='identifier'><a name='80_12'>responder</a></span>?.<span class='identifier'><a name='80_23'>languageServer</a></span>(<span class='keyword'><a name='80_38' title='usrString0'>self</a></span>, <span class='identifier'><a name='80_44'>failedToDecodeNotification</a></span>: <span class='identifier'><a name='80_72'>name</a></span>, <span class='identifier'><a name='80_78'>with</a></span>: <span class='identifier'><a name='80_84'>newError</a></span>)
0081            }
0082        }
0083    }
0084    
0085    <span class='builtin'><a name='85_0' title='usrString0'>private</a></span> <span class='keyword'><a name='85_8' title='usrString0'>func</a></span> <span class='identifier'><a name='85_13'>relayResult</a></span>&lt;<span class='identifier'><a name='85_25'>T</a></span>>(<span class='identifier'><a name='85_28'>result</a></span>: <span class='typeidentifier'><a name='85_36' title='usrString0'>JSONRPCLanguageServer</a></span>.<span class='typeidentifier'><a name='85_58' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='85_75' title='usrString0'>T</a></span>>, <span class='identifier'><a name='85_79'>block</a></span>: <span class='builtin'><a name='85_86' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='85_97' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='85_118' title='usrString0'>T</a></span>>) -> <span class='typeidentifier'><a name='85_125' title='usrString0'>Void</a></span>) {
0086        <span class='keyword'><a name='86_4' title='usrString0'>switch</a></span> <span class='identifier'><a name='86_11'>result</a></span> {
0087        <span class='keyword'><a name='87_4' title='usrString0'>case</a></span> .<span class='identifier'><a name='87_10'>failure</a></span>(<span class='keyword'><a name='87_18' title='usrString0'>let</a></span> <span class='identifier'><a name='87_22'>error</a></span>):
0088            <span class='identifier'><a name='88_8'>block</a></span>(.<span class='identifier'><a name='88_15'>failure</a></span>(.<span class='identifier'><a name='88_24'>protocolError</a></span>(<span class='identifier'><a name='88_38'>error</a></span>)))
0089        <span class='keyword'><a name='89_4' title='usrString0'>case</a></span> .<span class='identifier'><a name='89_10'>success</a></span>(<span class='keyword'><a name='89_18' title='usrString0'>let</a></span> <span class='identifier'><a name='89_22'>responseMessage</a></span>):
0090            <span class='keyword'><a name='90_8' title='usrString0'>if</a></span> <span class='keyword'><a name='90_11' title='usrString0'>let</a></span> <span class='identifier'><a name='90_15'>responseParam</a></span> = <span class='identifier'><a name='90_31'>responseMessage</a></span>.<span class='identifier'><a name='90_47'>result</a></span> {
0091                <span class='identifier'><a name='91_12'>block</a></span>(.<span class='identifier'><a name='91_19'>success</a></span>(<span class='identifier'><a name='91_27'>responseParam</a></span>))
0092            } <span class='keyword'><a name='92_10' title='usrString0'>else</a></span> <span class='keyword'><a name='92_15' title='usrString0'>if</a></span> <span class='keyword'><a name='92_18' title='usrString0'>let</a></span> <span class='identifier'><a name='92_22'>errorParam</a></span> = <span class='identifier'><a name='92_35'>responseMessage</a></span>.<span class='identifier'><a name='92_51'>error</a></span> {
0093                <span class='identifier'><a name='93_12'>block</a></span>(.<span class='identifier'><a name='93_19'>failure</a></span>(<span class='identifier'><a name='93_27'>errorParam</a></span>.<span class='identifier'><a name='93_38'>languageServerError</a></span>))
0094            } <span class='keyword'><a name='94_10' title='usrString0'>else</a></span> {
0095                <span class='identifier'><a name='95_12'>block</a></span>(.<span class='identifier'><a name='95_19'>failure</a></span>(.<span class='identifier'><a name='95_28'>missingExpectedResult</a></span>))
0096            }
0097        }
0098    }
0099    
0100    <span class='keyword'><a name='100_0' title='usrString0'>extension</a></span> <span class='typeidentifier'><a name='100_10' title='usrString0'>JSONRPCLanguageServer</a></span>: <span class='typeidentifier'><a name='100_33' title='usrString0'>LanguageServer</a></span> {
0101        <span class='keyword'><a name='101_4' title='usrString0'>typealias</a></span> <span class='identifier'><a name='101_14'>ProtocolResponse</a></span>&lt;<span class='identifier'><a name='101_31'>T</a></span>: <span class='typeidentifier'><a name='101_34' title='usrString0'>Codable</a></span>> = <span class='typeidentifier'><a name='101_45' title='usrString0'>ProtocolTransport</a></span>.<span class='typeidentifier'><a name='101_63' title='usrString0'>ResponseResult</a></span>&lt;<span class='typeidentifier'><a name='101_78' title='usrString0'>T</a></span>>
0102        
0103        <span class='builtin'><a name='103_4' title='usrString0'>public</a></span> <span class='keyword'><a name='103_11' title='usrString0'>func</a></span> <span class='identifier'><a name='103_16'>initialize</a></span>(<span class='identifier'><a name='103_27'>params</a></span>: <span class='typeidentifier'><a name='103_35' title='usrString0'>InitializeParams</a></span>, <span class='identifier'><a name='103_53'>block</a></span>: <span class='builtin'><a name='103_60' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='103_71' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='103_92' title='usrString0'>InitializationResponse</a></span>>) -> <span class='typeidentifier'><a name='103_120' title='usrString0'>Void</a></span>) {
0104            <span class='keyword'><a name='104_8' title='usrString0'>let</a></span> <span class='identifier'><a name='104_12'>method</a></span> = <span class='identifier'><a name='104_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='104_36'>Initialize</a></span>
0105            
0106            <span class='identifier'><a name='106_8'>protocolTransport</a></span>.<span class='identifier'><a name='106_26'>sendRequest</a></span>(<span class='identifier'><a name='106_38'>params</a></span>, <span class='identifier'><a name='106_46'>method</a></span>: <span class='identifier'><a name='106_54'>method</a></span>) { (<span class='identifier'><a name='106_65'>result</a></span>: <span class='typeidentifier'><a name='106_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='106_90' title='usrString0'>InitializationResponse</a></span>>) <span class='keyword'><a name='106_115' title='usrString0'>in</a></span>
0107                <span class='identifier'><a name='107_12'>relayResult</a></span>(<span class='identifier'><a name='107_24'>result</a></span>: <span class='identifier'><a name='107_32'>result</a></span>, <span class='identifier'><a name='107_40'>block</a></span>: <span class='identifier'><a name='107_47'>block</a></span>)
0108            }
0109        }
0110        
0111        <span class='builtin'><a name='111_4' title='usrString0'>public</a></span> <span class='keyword'><a name='111_11' title='usrString0'>func</a></span> <span class='identifier'><a name='111_16'>hover</a></span>(<span class='identifier'><a name='111_22'>params</a></span>: <span class='typeidentifier'><a name='111_30' title='usrString0'>TextDocumentPositionParams</a></span>, <span class='identifier'><a name='111_58'>block</a></span>: <span class='builtin'><a name='111_65' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='111_76' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='111_97' title='usrString0'>Hover</a></span>>) -> <span class='typeidentifier'><a name='111_108' title='usrString0'>Void</a></span>) {
0112            <span class='keyword'><a name='112_8' title='usrString0'>let</a></span> <span class='identifier'><a name='112_12'>method</a></span> = <span class='identifier'><a name='112_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='112_36'>TextDocument</a></span>.<span class='identifier'><a name='112_49'>Hover</a></span>
0113            
0114            <span class='identifier'><a name='114_8'>protocolTransport</a></span>.<span class='identifier'><a name='114_26'>sendRequest</a></span>(<span class='identifier'><a name='114_38'>params</a></span>, <span class='identifier'><a name='114_46'>method</a></span>: <span class='identifier'><a name='114_54'>method</a></span>) { (<span class='identifier'><a name='114_65'>result</a></span>: <span class='typeidentifier'><a name='114_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='114_90' title='usrString0'>Hover</a></span>>) <span class='keyword'><a name='114_98' title='usrString0'>in</a></span>
0115                <span class='identifier'><a name='115_12'>relayResult</a></span>(<span class='identifier'><a name='115_24'>result</a></span>: <span class='identifier'><a name='115_32'>result</a></span>, <span class='identifier'><a name='115_40'>block</a></span>: <span class='identifier'><a name='115_47'>block</a></span>)
0116            }
0117        }
0118        
0119        <span class='builtin'><a name='119_4' title='usrString0'>public</a></span> <span class='keyword'><a name='119_11' title='usrString0'>func</a></span> <span class='identifier'><a name='119_16'>didOpenTextDocument</a></span>(<span class='identifier'><a name='119_36'>params</a></span>: <span class='typeidentifier'><a name='119_44' title='usrString0'>DidOpenTextDocumentParams</a></span>, <span class='identifier'><a name='119_71'>block</a></span>: <span class='builtin'><a name='119_78' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='119_89' title='usrString0'>LanguageServerError</a></span>?) -> <span class='typeidentifier'><a name='119_114' title='usrString0'>Void</a></span>) {
0120            <span class='keyword'><a name='120_8' title='usrString0'>let</a></span> <span class='identifier'><a name='120_12'>method</a></span> = <span class='identifier'><a name='120_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='120_36'>TextDocument</a></span>.<span class='identifier'><a name='120_49'>DidOpen</a></span>
0121            
0122            <span class='identifier'><a name='122_8'>protocolTransport</a></span>.<span class='identifier'><a name='122_26'>sendNotification</a></span>(<span class='identifier'><a name='122_43'>params</a></span>, <span class='identifier'><a name='122_51'>method</a></span>: <span class='identifier'><a name='122_59'>method</a></span>) { (<span class='identifier'><a name='122_70'>error</a></span>) <span class='keyword'><a name='122_77' title='usrString0'>in</a></span>
0123                <span class='keyword'><a name='123_12' title='usrString0'>let</a></span> <span class='identifier'><a name='123_16'>upstreamError</a></span> = <span class='identifier'><a name='123_32'>error</a></span>.<span class='identifier'><a name='123_38'>map</a></span> { <span class='identifier'><a name='123_44'>LanguageServerError</a></span>.<span class='identifier'><a name='123_64'>protocolError</a></span>(<span class='identifier'><a name='123_78'>$0</a></span>) }
0124                <span class='identifier'><a name='124_12'>block</a></span>(<span class='identifier'><a name='124_18'>upstreamError</a></span>)
0125            }
0126        }
0127        
0128        <span class='builtin'><a name='128_4' title='usrString0'>public</a></span> <span class='keyword'><a name='128_11' title='usrString0'>func</a></span> <span class='identifier'><a name='128_16'>didCloseTextDocument</a></span>(<span class='identifier'><a name='128_37'>params</a></span>: <span class='typeidentifier'><a name='128_45' title='usrString0'>DidOpenTextDocumentParams</a></span>, <span class='identifier'><a name='128_72'>block</a></span>: <span class='builtin'><a name='128_79' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='128_90' title='usrString0'>LanguageServerError</a></span>?) -> <span class='typeidentifier'><a name='128_115' title='usrString0'>Void</a></span>) {
0129            <span class='keyword'><a name='129_8' title='usrString0'>let</a></span> <span class='identifier'><a name='129_12'>method</a></span> = <span class='identifier'><a name='129_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='129_36'>TextDocument</a></span>.<span class='identifier'><a name='129_49'>DidOpen</a></span>
0130            
0131            <span class='identifier'><a name='131_8'>protocolTransport</a></span>.<span class='identifier'><a name='131_26'>sendNotification</a></span>(<span class='identifier'><a name='131_43'>params</a></span>, <span class='identifier'><a name='131_51'>method</a></span>: <span class='identifier'><a name='131_59'>method</a></span>) { (<span class='identifier'><a name='131_70'>error</a></span>) <span class='keyword'><a name='131_77' title='usrString0'>in</a></span>
0132                <span class='keyword'><a name='132_12' title='usrString0'>let</a></span> <span class='identifier'><a name='132_16'>upstreamError</a></span> = <span class='identifier'><a name='132_32'>error</a></span>.<span class='identifier'><a name='132_38'>map</a></span> { <span class='identifier'><a name='132_44'>LanguageServerError</a></span>.<span class='identifier'><a name='132_64'>protocolError</a></span>(<span class='identifier'><a name='132_78'>$0</a></span>) }
0133                <span class='identifier'><a name='133_12'>block</a></span>(<span class='identifier'><a name='133_18'>upstreamError</a></span>)
0134            }
0135        }
0136        
0137        <span class='builtin'><a name='137_4' title='usrString0'>public</a></span> <span class='keyword'><a name='137_11' title='usrString0'>func</a></span> <span class='identifier'><a name='137_16'>didChangeTextDocument</a></span>(<span class='identifier'><a name='137_38'>params</a></span>: <span class='typeidentifier'><a name='137_46' title='usrString0'>DidChangeTextDocumentParams</a></span>, <span class='identifier'><a name='137_75'>block</a></span>: <span class='builtin'><a name='137_82' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='137_93' title='usrString0'>LanguageServerError</a></span>?) -> <span class='typeidentifier'><a name='137_118' title='usrString0'>Void</a></span>) {
0138            <span class='keyword'><a name='138_8' title='usrString0'>let</a></span> <span class='identifier'><a name='138_12'>method</a></span> = <span class='identifier'><a name='138_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='138_36'>TextDocument</a></span>.<span class='identifier'><a name='138_49'>DidChange</a></span>
0139            
0140            <span class='identifier'><a name='140_8'>protocolTransport</a></span>.<span class='identifier'><a name='140_26'>sendNotification</a></span>(<span class='identifier'><a name='140_43'>params</a></span>, <span class='identifier'><a name='140_51'>method</a></span>: <span class='identifier'><a name='140_59'>method</a></span>) { (<span class='identifier'><a name='140_70'>error</a></span>) <span class='keyword'><a name='140_77' title='usrString0'>in</a></span>
0141                <span class='keyword'><a name='141_12' title='usrString0'>let</a></span> <span class='identifier'><a name='141_16'>upstreamError</a></span> = <span class='identifier'><a name='141_32'>error</a></span>.<span class='identifier'><a name='141_38'>map</a></span> { <span class='identifier'><a name='141_44'>LanguageServerError</a></span>.<span class='identifier'><a name='141_64'>protocolError</a></span>(<span class='identifier'><a name='141_78'>$0</a></span>) }
0142                <span class='identifier'><a name='142_12'>block</a></span>(<span class='identifier'><a name='142_18'>upstreamError</a></span>)
0143            }
0144        }
0145        
0146        <span class='builtin'><a name='146_4' title='usrString0'>public</a></span> <span class='keyword'><a name='146_11' title='usrString0'>func</a></span> <span class='identifier'><a name='146_16'>didCloseTextDocument</a></span>(<span class='identifier'><a name='146_37'>params</a></span>: <span class='typeidentifier'><a name='146_45' title='usrString0'>DidCloseTextDocumentParams</a></span>, <span class='identifier'><a name='146_73'>block</a></span>: <span class='builtin'><a name='146_80' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='146_91' title='usrString0'>LanguageServerError</a></span>?) -> <span class='typeidentifier'><a name='146_116' title='usrString0'>Void</a></span>) {
0147            <span class='keyword'><a name='147_8' title='usrString0'>let</a></span> <span class='identifier'><a name='147_12'>method</a></span> = <span class='identifier'><a name='147_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='147_36'>TextDocument</a></span>.<span class='identifier'><a name='147_49'>DidClose</a></span>
0148            
0149            <span class='identifier'><a name='149_8'>protocolTransport</a></span>.<span class='identifier'><a name='149_26'>sendNotification</a></span>(<span class='identifier'><a name='149_43'>params</a></span>, <span class='identifier'><a name='149_51'>method</a></span>: <span class='identifier'><a name='149_59'>method</a></span>) { (<span class='identifier'><a name='149_70'>error</a></span>) <span class='keyword'><a name='149_77' title='usrString0'>in</a></span>
0150                <span class='keyword'><a name='150_12' title='usrString0'>let</a></span> <span class='identifier'><a name='150_16'>upstreamError</a></span> = <span class='identifier'><a name='150_32'>error</a></span>.<span class='identifier'><a name='150_38'>map</a></span> { <span class='identifier'><a name='150_44'>LanguageServerError</a></span>.<span class='identifier'><a name='150_64'>protocolError</a></span>(<span class='identifier'><a name='150_78'>$0</a></span>) }
0151                <span class='identifier'><a name='151_12'>block</a></span>(<span class='identifier'><a name='151_18'>upstreamError</a></span>)
0152            }
0153        }
0154    
0155        <span class='builtin'><a name='155_4' title='usrString0'>public</a></span> <span class='keyword'><a name='155_11' title='usrString0'>func</a></span> <span class='identifier'><a name='155_16'>willSaveTextDocument</a></span>(<span class='identifier'><a name='155_37'>params</a></span>: <span class='typeidentifier'><a name='155_45' title='usrString0'>WillSaveTextDocumentParams</a></span>, <span class='identifier'><a name='155_73'>block</a></span>: <span class='builtin'><a name='155_80' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='155_91' title='usrString0'>LanguageServerError</a></span>?) -> <span class='typeidentifier'><a name='155_116' title='usrString0'>Void</a></span>) {
0156            <span class='keyword'><a name='156_8' title='usrString0'>let</a></span> <span class='identifier'><a name='156_12'>method</a></span> = <span class='identifier'><a name='156_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='156_36'>TextDocument</a></span>.<span class='identifier'><a name='156_49'>WillSave</a></span>
0157    
0158            <span class='identifier'><a name='158_8'>protocolTransport</a></span>.<span class='identifier'><a name='158_26'>sendNotification</a></span>(<span class='identifier'><a name='158_43'>params</a></span>, <span class='identifier'><a name='158_51'>method</a></span>: <span class='identifier'><a name='158_59'>method</a></span>)  { (<span class='identifier'><a name='158_71'>error</a></span>) <span class='keyword'><a name='158_78' title='usrString0'>in</a></span>
0159                <span class='keyword'><a name='159_12' title='usrString0'>let</a></span> <span class='identifier'><a name='159_16'>upstreamError</a></span> = <span class='identifier'><a name='159_32'>error</a></span>.<span class='identifier'><a name='159_38'>map</a></span> { <span class='identifier'><a name='159_44'>LanguageServerError</a></span>.<span class='identifier'><a name='159_64'>protocolError</a></span>(<span class='identifier'><a name='159_78'>$0</a></span>) }
0160                <span class='identifier'><a name='160_12'>block</a></span>(<span class='identifier'><a name='160_18'>upstreamError</a></span>)
0161            }
0162        }
0163    
0164        <span class='builtin'><a name='164_4' title='usrString0'>public</a></span> <span class='keyword'><a name='164_11' title='usrString0'>func</a></span> <span class='identifier'><a name='164_16'>willSaveWaitUntilTextDocument</a></span>(<span class='identifier'><a name='164_46'>params</a></span>: <span class='typeidentifier'><a name='164_54' title='usrString0'>WillSaveTextDocumentParams</a></span>, <span class='identifier'><a name='164_82'>block</a></span>: <span class='builtin'><a name='164_89' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='164_100' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='164_121' title='usrString0'>WillSaveWaitUntilResponse</a></span>>) -> <span class='typeidentifier'><a name='164_152' title='usrString0'>Void</a></span>) {
0165            <span class='keyword'><a name='165_8' title='usrString0'>let</a></span> <span class='identifier'><a name='165_12'>method</a></span> = <span class='identifier'><a name='165_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='165_36'>TextDocument</a></span>.<span class='identifier'><a name='165_49'>WillSaveWaitUntil</a></span>
0166    
0167            <span class='identifier'><a name='167_8'>protocolTransport</a></span>.<span class='identifier'><a name='167_26'>sendRequest</a></span>(<span class='identifier'><a name='167_38'>params</a></span>, <span class='identifier'><a name='167_46'>method</a></span>: <span class='identifier'><a name='167_54'>method</a></span>) { (<span class='identifier'><a name='167_65'>result</a></span>: <span class='typeidentifier'><a name='167_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='167_90' title='usrString0'>WillSaveWaitUntilResponse</a></span>>) <span class='keyword'><a name='167_118' title='usrString0'>in</a></span>
0168                <span class='identifier'><a name='168_12'>relayResult</a></span>(<span class='identifier'><a name='168_24'>result</a></span>: <span class='identifier'><a name='168_32'>result</a></span>, <span class='identifier'><a name='168_40'>block</a></span>: <span class='identifier'><a name='168_47'>block</a></span>)
0169            }
0170        }
0171    
0172        <span class='builtin'><a name='172_4' title='usrString0'>public</a></span> <span class='keyword'><a name='172_11' title='usrString0'>func</a></span> <span class='identifier'><a name='172_16'>didSaveTextDocument</a></span>(<span class='identifier'><a name='172_36'>params</a></span>: <span class='typeidentifier'><a name='172_44' title='usrString0'>DidSaveTextDocumentParams</a></span>, <span class='identifier'><a name='172_71'>block</a></span>: <span class='builtin'><a name='172_78' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='172_89' title='usrString0'>LanguageServerError</a></span>?) -> <span class='typeidentifier'><a name='172_114' title='usrString0'>Void</a></span>) {
0173            <span class='keyword'><a name='173_8' title='usrString0'>let</a></span> <span class='identifier'><a name='173_12'>method</a></span> = <span class='identifier'><a name='173_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='173_36'>TextDocument</a></span>.<span class='identifier'><a name='173_49'>DidSave</a></span>
0174            
0175            <span class='identifier'><a name='175_8'>protocolTransport</a></span>.<span class='identifier'><a name='175_26'>sendNotification</a></span>(<span class='identifier'><a name='175_43'>params</a></span>, <span class='identifier'><a name='175_51'>method</a></span>: <span class='identifier'><a name='175_59'>method</a></span>) { (<span class='identifier'><a name='175_70'>error</a></span>) <span class='keyword'><a name='175_77' title='usrString0'>in</a></span>
0176                <span class='keyword'><a name='176_12' title='usrString0'>let</a></span> <span class='identifier'><a name='176_16'>upstreamError</a></span> = <span class='identifier'><a name='176_32'>error</a></span>.<span class='identifier'><a name='176_38'>map</a></span> { <span class='identifier'><a name='176_44'>LanguageServerError</a></span>.<span class='identifier'><a name='176_64'>protocolError</a></span>(<span class='identifier'><a name='176_78'>$0</a></span>) }
0177                <span class='identifier'><a name='177_12'>block</a></span>(<span class='identifier'><a name='177_18'>upstreamError</a></span>)
0178            }
0179        }
0180        
0181        <span class='builtin'><a name='181_4' title='usrString0'>public</a></span> <span class='keyword'><a name='181_11' title='usrString0'>func</a></span> <span class='identifier'><a name='181_16'>completion</a></span>(<span class='identifier'><a name='181_27'>params</a></span>: <span class='typeidentifier'><a name='181_35' title='usrString0'>CompletionParams</a></span>, <span class='identifier'><a name='181_53'>block</a></span>: <span class='builtin'><a name='181_60' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='181_71' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='181_92' title='usrString0'>CompletionResponse</a></span>>) -> <span class='typeidentifier'><a name='181_116' title='usrString0'>Void</a></span>) {
0182            <span class='keyword'><a name='182_8' title='usrString0'>let</a></span> <span class='identifier'><a name='182_12'>method</a></span> = <span class='identifier'><a name='182_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='182_36'>TextDocument</a></span>.<span class='identifier'><a name='182_49'>Completion</a></span>
0183            
0184            <span class='identifier'><a name='184_8'>protocolTransport</a></span>.<span class='identifier'><a name='184_26'>sendRequest</a></span>(<span class='identifier'><a name='184_38'>params</a></span>, <span class='identifier'><a name='184_46'>method</a></span>: <span class='identifier'><a name='184_54'>method</a></span>) { (<span class='identifier'><a name='184_65'>result</a></span>: <span class='typeidentifier'><a name='184_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='184_90' title='usrString0'>CompletionResponse</a></span>>) <span class='keyword'><a name='184_111' title='usrString0'>in</a></span>
0185                <span class='identifier'><a name='185_12'>relayResult</a></span>(<span class='identifier'><a name='185_24'>result</a></span>: <span class='identifier'><a name='185_32'>result</a></span>, <span class='identifier'><a name='185_40'>block</a></span>: <span class='identifier'><a name='185_47'>block</a></span>)
0186            }
0187        }
0188    
0189        <span class='builtin'><a name='189_4' title='usrString0'>public</a></span> <span class='keyword'><a name='189_11' title='usrString0'>func</a></span> <span class='identifier'><a name='189_16'>signatureHelp</a></span>(<span class='identifier'><a name='189_30'>params</a></span>: <span class='typeidentifier'><a name='189_38' title='usrString0'>TextDocumentPositionParams</a></span>, <span class='identifier'><a name='189_66'>block</a></span>: <span class='builtin'><a name='189_73' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='189_84' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='189_105' title='usrString0'>SignatureHelp</a></span>>) -> <span class='typeidentifier'><a name='189_124' title='usrString0'>Void</a></span>) {
0190            <span class='keyword'><a name='190_8' title='usrString0'>let</a></span> <span class='identifier'><a name='190_12'>method</a></span> = <span class='identifier'><a name='190_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='190_36'>TextDocument</a></span>.<span class='identifier'><a name='190_49'>SignatureHelp</a></span>
0191    
0192            <span class='identifier'><a name='192_8'>protocolTransport</a></span>.<span class='identifier'><a name='192_26'>sendRequest</a></span>(<span class='identifier'><a name='192_38'>params</a></span>, <span class='identifier'><a name='192_46'>method</a></span>: <span class='identifier'><a name='192_54'>method</a></span>) { (<span class='identifier'><a name='192_65'>result</a></span>: <span class='typeidentifier'><a name='192_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='192_90' title='usrString0'>SignatureHelp</a></span>>) <span class='keyword'><a name='192_106' title='usrString0'>in</a></span>
0193                <span class='identifier'><a name='193_12'>relayResult</a></span>(<span class='identifier'><a name='193_24'>result</a></span>: <span class='identifier'><a name='193_32'>result</a></span>, <span class='identifier'><a name='193_40'>block</a></span>: <span class='identifier'><a name='193_47'>block</a></span>)
0194            }
0195        }
0196    
0197        <span class='builtin'><a name='197_4' title='usrString0'>public</a></span> <span class='keyword'><a name='197_11' title='usrString0'>func</a></span> <span class='identifier'><a name='197_16'>declaration</a></span>(<span class='identifier'><a name='197_28'>params</a></span>: <span class='typeidentifier'><a name='197_36' title='usrString0'>TextDocumentPositionParams</a></span>, <span class='identifier'><a name='197_64'>block</a></span>: <span class='builtin'><a name='197_71' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='197_82' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='197_103' title='usrString0'>DeclarationResponse</a></span>?>) -> <span class='typeidentifier'><a name='197_129' title='usrString0'>Void</a></span>) {
0198            <span class='keyword'><a name='198_8' title='usrString0'>let</a></span> <span class='identifier'><a name='198_12'>method</a></span> = <span class='identifier'><a name='198_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='198_36'>TextDocument</a></span>.<span class='identifier'><a name='198_49'>Declaration</a></span>
0199    
0200            <span class='identifier'><a name='200_8'>protocolTransport</a></span>.<span class='identifier'><a name='200_26'>sendRequest</a></span>(<span class='identifier'><a name='200_38'>params</a></span>, <span class='identifier'><a name='200_46'>method</a></span>: <span class='identifier'><a name='200_54'>method</a></span>) { (<span class='identifier'><a name='200_65'>result</a></span>: <span class='typeidentifier'><a name='200_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='200_90' title='usrString0'>DeclarationResponse</a></span>?>) <span class='keyword'><a name='200_113' title='usrString0'>in</a></span>
0201                <span class='identifier'><a name='201_12'>relayResult</a></span>(<span class='identifier'><a name='201_24'>result</a></span>: <span class='identifier'><a name='201_32'>result</a></span>, <span class='identifier'><a name='201_40'>block</a></span>: <span class='identifier'><a name='201_47'>block</a></span>)
0202            }
0203        }
0204    
0205        <span class='builtin'><a name='205_4' title='usrString0'>public</a></span> <span class='keyword'><a name='205_11' title='usrString0'>func</a></span> <span class='identifier'><a name='205_16'>definition</a></span>(<span class='identifier'><a name='205_27'>params</a></span>: <span class='typeidentifier'><a name='205_35' title='usrString0'>TextDocumentPositionParams</a></span>, <span class='identifier'><a name='205_63'>block</a></span>: <span class='builtin'><a name='205_70' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='205_81' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='205_102' title='usrString0'>DefinitionResponse</a></span>?>) -> <span class='typeidentifier'><a name='205_127' title='usrString0'>Void</a></span>) {
0206            <span class='keyword'><a name='206_8' title='usrString0'>let</a></span> <span class='identifier'><a name='206_12'>method</a></span> = <span class='identifier'><a name='206_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='206_36'>TextDocument</a></span>.<span class='identifier'><a name='206_49'>Definition</a></span>
0207    
0208            <span class='identifier'><a name='208_8'>protocolTransport</a></span>.<span class='identifier'><a name='208_26'>sendRequest</a></span>(<span class='identifier'><a name='208_38'>params</a></span>, <span class='identifier'><a name='208_46'>method</a></span>: <span class='identifier'><a name='208_54'>method</a></span>) { (<span class='identifier'><a name='208_65'>result</a></span>: <span class='typeidentifier'><a name='208_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='208_90' title='usrString0'>DefinitionResponse</a></span>?>) <span class='keyword'><a name='208_112' title='usrString0'>in</a></span>
0209                <span class='identifier'><a name='209_12'>relayResult</a></span>(<span class='identifier'><a name='209_24'>result</a></span>: <span class='identifier'><a name='209_32'>result</a></span>, <span class='identifier'><a name='209_40'>block</a></span>: <span class='identifier'><a name='209_47'>block</a></span>)
0210            }
0211        }
0212    
0213        <span class='builtin'><a name='213_4' title='usrString0'>public</a></span> <span class='keyword'><a name='213_11' title='usrString0'>func</a></span> <span class='identifier'><a name='213_16'>typeDefinition</a></span>(<span class='identifier'><a name='213_31'>params</a></span>: <span class='typeidentifier'><a name='213_39' title='usrString0'>TextDocumentPositionParams</a></span>, <span class='identifier'><a name='213_67'>block</a></span>: <span class='builtin'><a name='213_74' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='213_85' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='213_106' title='usrString0'>TypeDefinitionResponse</a></span>?>) -> <span class='typeidentifier'><a name='213_135' title='usrString0'>Void</a></span>) {
0214            <span class='keyword'><a name='214_8' title='usrString0'>let</a></span> <span class='identifier'><a name='214_12'>method</a></span> = <span class='identifier'><a name='214_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='214_36'>TextDocument</a></span>.<span class='identifier'><a name='214_49'>TypeDefinition</a></span>
0215    
0216            <span class='identifier'><a name='216_8'>protocolTransport</a></span>.<span class='identifier'><a name='216_26'>sendRequest</a></span>(<span class='identifier'><a name='216_38'>params</a></span>, <span class='identifier'><a name='216_46'>method</a></span>: <span class='identifier'><a name='216_54'>method</a></span>) { (<span class='identifier'><a name='216_65'>result</a></span>: <span class='typeidentifier'><a name='216_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='216_90' title='usrString0'>TypeDefinitionResponse</a></span>?>) <span class='keyword'><a name='216_116' title='usrString0'>in</a></span>
0217                <span class='identifier'><a name='217_12'>relayResult</a></span>(<span class='identifier'><a name='217_24'>result</a></span>: <span class='identifier'><a name='217_32'>result</a></span>, <span class='identifier'><a name='217_40'>block</a></span>: <span class='identifier'><a name='217_47'>block</a></span>)
0218            }
0219        }
0220    
0221        <span class='builtin'><a name='221_4' title='usrString0'>public</a></span> <span class='keyword'><a name='221_11' title='usrString0'>func</a></span> <span class='identifier'><a name='221_16'>implementation</a></span>(<span class='identifier'><a name='221_31'>params</a></span>: <span class='typeidentifier'><a name='221_39' title='usrString0'>TextDocumentPositionParams</a></span>, <span class='identifier'><a name='221_67'>block</a></span>: <span class='builtin'><a name='221_74' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='221_85' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='221_106' title='usrString0'>ImplementationResponse</a></span>?>) -> <span class='typeidentifier'><a name='221_135' title='usrString0'>Void</a></span>) {
0222            <span class='keyword'><a name='222_8' title='usrString0'>let</a></span> <span class='identifier'><a name='222_12'>method</a></span> = <span class='identifier'><a name='222_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='222_36'>TextDocument</a></span>.<span class='identifier'><a name='222_49'>Implementation</a></span>
0223    
0224            <span class='identifier'><a name='224_8'>protocolTransport</a></span>.<span class='identifier'><a name='224_26'>sendRequest</a></span>(<span class='identifier'><a name='224_38'>params</a></span>, <span class='identifier'><a name='224_46'>method</a></span>: <span class='identifier'><a name='224_54'>method</a></span>) { (<span class='identifier'><a name='224_65'>result</a></span>: <span class='typeidentifier'><a name='224_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='224_90' title='usrString0'>ImplementationResponse</a></span>?>) <span class='keyword'><a name='224_116' title='usrString0'>in</a></span>
0225                <span class='identifier'><a name='225_12'>relayResult</a></span>(<span class='identifier'><a name='225_24'>result</a></span>: <span class='identifier'><a name='225_32'>result</a></span>, <span class='identifier'><a name='225_40'>block</a></span>: <span class='identifier'><a name='225_47'>block</a></span>)
0226            }
0227        }
0228    
0229        <span class='builtin'><a name='229_4' title='usrString0'>public</a></span> <span class='keyword'><a name='229_11' title='usrString0'>func</a></span> <span class='identifier'><a name='229_16'>documentSymbol</a></span>(<span class='identifier'><a name='229_31'>params</a></span>: <span class='typeidentifier'><a name='229_39' title='usrString0'>DocumentSymbolParams</a></span>, <span class='identifier'><a name='229_61'>block</a></span>: <span class='builtin'><a name='229_68' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='229_79' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='229_100' title='usrString0'>DocumentSymbolResponse</a></span>>) -> <span class='typeidentifier'><a name='229_128' title='usrString0'>Void</a></span>) {
0230            <span class='keyword'><a name='230_8' title='usrString0'>let</a></span> <span class='identifier'><a name='230_12'>method</a></span> = <span class='identifier'><a name='230_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='230_36'>TextDocument</a></span>.<span class='identifier'><a name='230_49'>DocumentSymbol</a></span>
0231    
0232            <span class='identifier'><a name='232_8'>protocolTransport</a></span>.<span class='identifier'><a name='232_26'>sendRequest</a></span>(<span class='identifier'><a name='232_38'>params</a></span>, <span class='identifier'><a name='232_46'>method</a></span>: <span class='identifier'><a name='232_54'>method</a></span>) { (<span class='identifier'><a name='232_65'>result</a></span>: <span class='typeidentifier'><a name='232_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='232_90' title='usrString0'>DocumentSymbolResponse</a></span>>) <span class='keyword'><a name='232_115' title='usrString0'>in</a></span>
0233                <span class='identifier'><a name='233_12'>relayResult</a></span>(<span class='identifier'><a name='233_24'>result</a></span>: <span class='identifier'><a name='233_32'>result</a></span>, <span class='identifier'><a name='233_40'>block</a></span>: <span class='identifier'><a name='233_47'>block</a></span>)
0234            }
0235        }
0236    
0237        <span class='builtin'><a name='237_4' title='usrString0'>public</a></span> <span class='keyword'><a name='237_11' title='usrString0'>func</a></span> <span class='identifier'><a name='237_16'>formatting</a></span>(<span class='identifier'><a name='237_27'>params</a></span>: <span class='typeidentifier'><a name='237_35' title='usrString0'>DocumentFormattingParams</a></span>, <span class='identifier'><a name='237_61'>block</a></span>: <span class='builtin'><a name='237_68' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='237_79' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='237_100' title='usrString0'>FormattingResult</a></span>>) -> <span class='typeidentifier'><a name='237_122' title='usrString0'>Void</a></span>) {
0238            <span class='keyword'><a name='238_8' title='usrString0'>let</a></span> <span class='identifier'><a name='238_12'>method</a></span> = <span class='identifier'><a name='238_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='238_36'>TextDocument</a></span>.<span class='identifier'><a name='238_49'>Formatting</a></span>
0239    
0240            <span class='identifier'><a name='240_8'>protocolTransport</a></span>.<span class='identifier'><a name='240_26'>sendRequest</a></span>(<span class='identifier'><a name='240_38'>params</a></span>, <span class='identifier'><a name='240_46'>method</a></span>: <span class='identifier'><a name='240_54'>method</a></span>) { (<span class='identifier'><a name='240_65'>result</a></span>: <span class='typeidentifier'><a name='240_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='240_90' title='usrString0'>FormattingResult</a></span>>) <span class='keyword'><a name='240_109' title='usrString0'>in</a></span>
0241                <span class='identifier'><a name='241_12'>relayResult</a></span>(<span class='identifier'><a name='241_24'>result</a></span>: <span class='identifier'><a name='241_32'>result</a></span>, <span class='identifier'><a name='241_40'>block</a></span>: <span class='identifier'><a name='241_47'>block</a></span>)
0242            }
0243        }
0244    
0245        <span class='builtin'><a name='245_4' title='usrString0'>public</a></span> <span class='keyword'><a name='245_11' title='usrString0'>func</a></span> <span class='identifier'><a name='245_16'>rangeFormatting</a></span>(<span class='identifier'><a name='245_32'>params</a></span>: <span class='typeidentifier'><a name='245_40' title='usrString0'>DocumentRangeFormattingParams</a></span>, <span class='identifier'><a name='245_71'>block</a></span>: <span class='builtin'><a name='245_78' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='245_89' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='245_110' title='usrString0'>FormattingResult</a></span>>) -> <span class='typeidentifier'><a name='245_132' title='usrString0'>Void</a></span>) {
0246            <span class='keyword'><a name='246_8' title='usrString0'>let</a></span> <span class='identifier'><a name='246_12'>method</a></span> = <span class='identifier'><a name='246_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='246_36'>TextDocument</a></span>.<span class='identifier'><a name='246_49'>RangeFormatting</a></span>
0247    
0248            <span class='identifier'><a name='248_8'>protocolTransport</a></span>.<span class='identifier'><a name='248_26'>sendRequest</a></span>(<span class='identifier'><a name='248_38'>params</a></span>, <span class='identifier'><a name='248_46'>method</a></span>: <span class='identifier'><a name='248_54'>method</a></span>) { (<span class='identifier'><a name='248_65'>result</a></span>: <span class='typeidentifier'><a name='248_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='248_90' title='usrString0'>FormattingResult</a></span>>) <span class='keyword'><a name='248_109' title='usrString0'>in</a></span>
0249                <span class='identifier'><a name='249_12'>relayResult</a></span>(<span class='identifier'><a name='249_24'>result</a></span>: <span class='identifier'><a name='249_32'>result</a></span>, <span class='identifier'><a name='249_40'>block</a></span>: <span class='identifier'><a name='249_47'>block</a></span>)
0250            }
0251        }
0252    
0253        <span class='builtin'><a name='253_4' title='usrString0'>public</a></span> <span class='keyword'><a name='253_11' title='usrString0'>func</a></span> <span class='identifier'><a name='253_16'>onTypeFormatting</a></span>(<span class='identifier'><a name='253_33'>params</a></span>: <span class='typeidentifier'><a name='253_41' title='usrString0'>DocumentOnTypeFormattingParams</a></span>, <span class='identifier'><a name='253_73'>block</a></span>: <span class='builtin'><a name='253_80' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='253_91' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='253_112' title='usrString0'>FormattingResult</a></span>>) -> <span class='typeidentifier'><a name='253_134' title='usrString0'>Void</a></span>) {
0254            <span class='keyword'><a name='254_8' title='usrString0'>let</a></span> <span class='identifier'><a name='254_12'>method</a></span> = <span class='identifier'><a name='254_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='254_36'>TextDocument</a></span>.<span class='identifier'><a name='254_49'>OnTypeFormatting</a></span>
0255    
0256            <span class='identifier'><a name='256_8'>protocolTransport</a></span>.<span class='identifier'><a name='256_26'>sendRequest</a></span>(<span class='identifier'><a name='256_38'>params</a></span>, <span class='identifier'><a name='256_46'>method</a></span>: <span class='identifier'><a name='256_54'>method</a></span>) { (<span class='identifier'><a name='256_65'>result</a></span>: <span class='typeidentifier'><a name='256_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='256_90' title='usrString0'>FormattingResult</a></span>>) <span class='keyword'><a name='256_109' title='usrString0'>in</a></span>
0257                <span class='identifier'><a name='257_12'>relayResult</a></span>(<span class='identifier'><a name='257_24'>result</a></span>: <span class='identifier'><a name='257_32'>result</a></span>, <span class='identifier'><a name='257_40'>block</a></span>: <span class='identifier'><a name='257_47'>block</a></span>)
0258            }
0259        }
0260    
0261        <span class='builtin'><a name='261_4' title='usrString0'>public</a></span> <span class='keyword'><a name='261_11' title='usrString0'>func</a></span> <span class='identifier'><a name='261_16'>references</a></span>(<span class='identifier'><a name='261_27'>params</a></span>: <span class='typeidentifier'><a name='261_35' title='usrString0'>ReferenceParams</a></span>, <span class='identifier'><a name='261_52'>block</a></span>: <span class='builtin'><a name='261_59' title='usrString0'>@escaping</a></span> (<span class='typeidentifier'><a name='261_70' title='usrString0'>LanguageServerResult</a></span>&lt;<span class='typeidentifier'><a name='261_91' title='usrString0'>ReferenceResponse</a></span>?>) -> <span class='typeidentifier'><a name='261_115' title='usrString0'>Void</a></span>) {
0262            <span class='keyword'><a name='262_8' title='usrString0'>let</a></span> <span class='identifier'><a name='262_12'>method</a></span> = <span class='identifier'><a name='262_21'>ProtocolMethod</a></span>.<span class='identifier'><a name='262_36'>TextDocument</a></span>.<span class='identifier'><a name='262_49'>References</a></span>
0263    
0264            <span class='identifier'><a name='264_8'>protocolTransport</a></span>.<span class='identifier'><a name='264_26'>sendRequest</a></span>(<span class='identifier'><a name='264_38'>params</a></span>, <span class='identifier'><a name='264_46'>method</a></span>: <span class='identifier'><a name='264_54'>method</a></span>) { (<span class='identifier'><a name='264_65'>result</a></span>: <span class='typeidentifier'><a name='264_73' title='usrString0'>ProtocolResponse</a></span>&lt;<span class='typeidentifier'><a name='264_90' title='usrString0'>ReferenceResponse</a></span>?>) <span class='keyword'><a name='264_111' title='usrString0'>in</a></span>
0265                <span class='identifier'><a name='265_12'>relayResult</a></span>(<span class='identifier'><a name='265_24'>result</a></span>: <span class='identifier'><a name='265_32'>result</a></span>, <span class='identifier'><a name='265_40'>block</a></span>: <span class='identifier'><a name='265_47'>block</a></span>)
0266            }
0267        }
0268    }
0269    