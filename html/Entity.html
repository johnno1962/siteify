<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>
0001    <span class='comment'><a name='1_1'>//
0002    </a></span><span class='comment'><a name='2_1'>//  Entity.swift
0003    </a></span><span class='comment'><a name='3_1'>//  refactord
0004    </a></span><span class='comment'><a name='4_1'>//
0005    </a></span><span class='comment'><a name='5_1'>//  Created by John Holdsworth on 19/02/2016.
0006    </a></span><span class='comment'><a name='6_1'>//  Copyright Â© 2016 John Holdsworth. All rights reserved.
0007    </a></span><span class='comment'><a name='7_1'>//
0008    </a></span><span class='comment'><a name='8_1'>//  $Id: //depot/siteify/siteify/Entity.swift#6 $
0009    </a></span><span class='comment'><a name='9_1'>//
0010    </a></span><span class='comment'><a name='10_1'>//  Repo: </a></span><span class='url'><a href='https://github.com/johnno1962/Refactorator'>https://github.com/johnno1962/Refactorator</a></span><span class='comment'><a name='10_53'>
0011    </a></span><span class='comment'><a name='11_1'>//
0012    </a></span>
0013    <span class='keyword'><a name='13_1'>import</a></span> <span class='identifier'><a name='13_8'>Foundation</a></span>
0014    
0015    <span class='keyword'><a name='15_1'>class</a></span> <span class='identifier'><a name='15_7' href='#' title='s:C7siteify6Entity' onclick='return expand(this);'>Entity<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#108_17"; event.stopPropagation(); return false;'>main.swift:108</td><td><pre>var entities = [<b title='source.lang.swift.ref.class'>Entity</b>:sourcekitd_variant_t]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#112_23"; event.stopPropagation(); return false;'>main.swift:112</td><td><pre>    var references = [<b title='source.lang.swift.ref.class'>Entity</b>]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#114_20"; event.stopPropagation(); return false;'>main.swift:114</td><td><pre>    var declaring: <b title='source.lang.swift.ref.class'>Entity</b>?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#131_30"; event.stopPropagation(); return false;'>main.swift:131</td><td><pre>                let entity = <b title='source.lang.swift.ref.class'>Entity</b>( file: file,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#176_11"; event.stopPropagation(); return false;'>main.swift:176</td><td><pre>extension <b title='source.lang.swift.ref.class'>Entity</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#258_23"; event.stopPropagation(); return false;'>main.swift:258</td><td><pre>            let ent = <b title='source.lang.swift.ref.class'>Entity</b>( file: file, line: line, col: col )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#73_14"; return false;'>Entity.swift:73</td><td><pre>func ==(lhs: <b title='source.lang.swift.ref.class'>Entity</b>, rhs: Entity) -> Bool {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#73_27"; return false;'>Entity.swift:73</td><td><pre>func ==(lhs: Entity, rhs: <b title='source.lang.swift.ref.class'>Entity</b>) -> Bool {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#77_12"; return false;'>Entity.swift:77</td><td><pre>func &lt;(e1: <b title='source.lang.swift.ref.class'>Entity</b>, e2: Entity) -> Bool {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#77_24"; return false;'>Entity.swift:77</td><td><pre>func &lt;(e1: Entity, e2: <b title='source.lang.swift.ref.class'>Entity</b>) -> Bool {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='15_15' title='s:PSs8Hashable'>Hashable</a></span> {
0016    
0017        <span class='keyword'><a name='17_5'>let</a></span> <span class='identifier'><a name='17_9' href='#' title='s:vC7siteify6Entity4fileSS' onclick='return expand(this);'>file<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#183_30"; event.stopPropagation(); return false;'>main.swift:183</td><td><pre>        return fileFilename( <b title='source.lang.swift.ref.var.instance'>file</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#280_52"; event.stopPropagation(); return false;'>main.swift:280</td><td><pre>                            let keepListOpen = ref.<b title='source.lang.swift.ref.var.instance'>file</b> != decl.file ? "event.stopPropagation(); " : ""</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#280_65"; event.stopPropagation(); return false;'>main.swift:280</td><td><pre>                            let keepListOpen = ref.file != decl.<b title='source.lang.swift.ref.var.instance'>file</b> ? "event.stopPropagation(); " : ""</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#20_14"; return false;'>Entity.swift:20</td><td><pre>        self.<b title='source.lang.swift.ref.var.instance'>file</b> = file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#74_62"; return false;'>Entity.swift:74</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.<b title='source.lang.swift.ref.var.instance'>file</b> == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#74_74"; return false;'>Entity.swift:74</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.file == rhs.<b title='source.lang.swift.ref.var.instance'>file</b></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#78_44"; return false;'>Entity.swift:78</td><td><pre>    let file1 = NSURL( fileURLWithPath: e1.<b title='source.lang.swift.ref.var.instance'>file</b> ).lastPathComponent!,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#79_40"; return false;'>Entity.swift:79</td><td><pre>    file2 = NSURL( fileURLWithPath: e2.<b title='source.lang.swift.ref.var.instance'>file</b> ).lastPathComponent!</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='17_15' title='s:SS'>String</a></span>, <span class='identifier'><a name='17_23' href='#' title='s:vC7siteify6Entity4lineSi' onclick='return expand(this);'>line<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#179_19"; event.stopPropagation(); return false;'>main.swift:179</td><td><pre>        return "\(<b title='source.lang.swift.ref.var.instance'>line</b>)_\(col)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#281_190"; event.stopPropagation(); return false;'>main.swift:281</td><td><pre>                            popup += "&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"\(ref.href)\"; \(keepListOpen)return false;'>\(ref.filename).swift:\(ref.<b title='source.lang.swift.ref.var.instance'>line</b>)&lt;/td>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#21_14"; return false;'>Entity.swift:21</td><td><pre>        self.<b title='source.lang.swift.ref.var.instance'>line</b> = line</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#28_16"; return false;'>Entity.swift:28</td><td><pre>        return <b title='source.lang.swift.ref.var.instance'>line</b> + col</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#33_25"; return false;'>Entity.swift:33</td><td><pre>        var line = self.<b title='source.lang.swift.ref.var.instance'>line</b></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#58_37"; return false;'>Entity.swift:58</td><td><pre>        return "MATCH FAILED line:\(<b title='source.lang.swift.ref.var.instance'>line</b>) column:\(col)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#74_16"; return false;'>Entity.swift:74</td><td><pre>    return lhs.<b title='source.lang.swift.ref.var.instance'>line</b> == rhs.line &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#74_28"; return false;'>Entity.swift:74</td><td><pre>    return lhs.line == rhs.<b title='source.lang.swift.ref.var.instance'>line</b> &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#82_11"; return false;'>Entity.swift:82</td><td><pre>    if e1.<b title='source.lang.swift.ref.var.instance'>line</b> &lt; e2.line { return true }</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#82_21"; return false;'>Entity.swift:82</td><td><pre>    if e1.line &lt; e2.<b title='source.lang.swift.ref.var.instance'>line</b> { return true }</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#83_11"; return false;'>Entity.swift:83</td><td><pre>    if e1.<b title='source.lang.swift.ref.var.instance'>line</b> > e2.line { return false }</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#83_21"; return false;'>Entity.swift:83</td><td><pre>    if e1.line > e2.<b title='source.lang.swift.ref.var.instance'>line</b> { return false }</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='17_29' title='s:Si'>Int</a></span>, <span class='identifier'><a name='17_34' href='#' title='s:vC7siteify6Entity3colSi' onclick='return expand(this);'>col<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#179_27"; event.stopPropagation(); return false;'>main.swift:179</td><td><pre>        return "\(line)_\(<b title='source.lang.swift.ref.var.instance'>col</b>)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#22_14"; return false;'>Entity.swift:22</td><td><pre>        self.<b title='source.lang.swift.ref.var.instance'>col</b> = col</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#28_23"; return false;'>Entity.swift:28</td><td><pre>        return line + <b title='source.lang.swift.ref.var.instance'>col</b></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#38_24"; return false;'>Entity.swift:38</td><td><pre>        var col = self.<b title='source.lang.swift.ref.var.instance'>col</b>, largecol = ""</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#58_52"; return false;'>Entity.swift:58</td><td><pre>        return "MATCH FAILED line:\(line) column:\(<b title='source.lang.swift.ref.var.instance'>col</b>)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#74_40"; return false;'>Entity.swift:74</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.<b title='source.lang.swift.ref.var.instance'>col</b> == rhs.col &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#74_51"; return false;'>Entity.swift:74</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.col == rhs.<b title='source.lang.swift.ref.var.instance'>col</b> &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#84_15"; return false;'>Entity.swift:84</td><td><pre>    return e1.<b title='source.lang.swift.ref.var.instance'>col</b> &lt; e2.col</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#84_24"; return false;'>Entity.swift:84</td><td><pre>    return e1.col &lt; e2.<b title='source.lang.swift.ref.var.instance'>col</b></pre></td></table></span></a></span>: <span class='typeidentifier'><a name='17_39' title='s:Si'>Int</a></span>, <span class='identifier'><a name='17_44' href='#' title='s:vC7siteify6Entity4kindGSqSS_' onclick='return expand(this);'>kind<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#23_14"; return false;'>Entity.swift:23</td><td><pre>        self.<b title='source.lang.swift.ref.var.instance'>kind</b> = kind</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#49_37"; return false;'>Entity.swift:49</td><td><pre>            var b = "&lt;b title='" + (<b title='source.lang.swift.ref.var.instance'>kind</b> ?? "UNKNOWN") + "'"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='17_50' title='s:SS'>String</a></span>?, <span class='identifier'><a name='17_59' href='#' title='s:vC7siteify6Entity4declSb' onclick='return expand(this);'>decl<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#155_19"; event.stopPropagation(); return false;'>main.swift:155</td><td><pre>        if entity.<b title='source.lang.swift.ref.var.instance'>decl</b>, var usr = usrs[usr] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#24_14"; return false;'>Entity.swift:24</td><td><pre>        self.<b title='source.lang.swift.ref.var.instance'>decl</b> = decl</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#50_16"; return false;'>Entity.swift:50</td><td><pre>            if <b title='source.lang.swift.ref.var.instance'>decl</b> {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='17_65' title='s:Sb'>Bool</a></span>
0018    
0019        <span class='keyword'><a name='19_5' href='#' title='s:FC7siteify6EntitycFMS0_FT4fileSS4lineSi3colSi4kindGSqSS_4declSb_S0_' onclick='return expand(this);'>init<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#131_30"; event.stopPropagation(); return false;'>main.swift:131</td><td><pre>                let entity = <b title='source.lang.swift.ref.function.constructor'>Entity</b>( file: file,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#258_23"; event.stopPropagation(); return false;'>main.swift:258</td><td><pre>            let ent = <b title='source.lang.swift.ref.function.constructor'>Entity</b>( file: file, line: line, col: col )</pre></td></table></span></a></span>( <span class='identifier'><a name='19_11'>file</a></span>: <span class='typeidentifier'><a name='19_17' title='s:SS'>String</a></span>, <span class='identifier'><a name='19_25'>line</a></span>: <span class='typeidentifier'><a name='19_31' title='s:Si'>Int</a></span>, <span class='identifier'><a name='19_36'>col</a></span>: <span class='typeidentifier'><a name='19_41' title='s:Si'>Int</a></span>, <span class='identifier'><a name='19_46'>kind</a></span>: <span class='typeidentifier'><a name='19_52' title='s:SS'>String</a></span>? = <span class='keyword'><a name='19_62'>nil</a></span>, <span class='identifier'><a name='19_67'>decl</a></span>: <span class='typeidentifier'><a name='19_73' title='s:Sb'>Bool</a></span> = <span class='keyword'><a name='19_80'>false</a></span> ) {
0020            <span class='keyword'><a name='20_9'>self</a></span>.<span class='identifier'><a name='20_14' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> = <span class='identifier'><a name='20_21'>file</a></span>
0021            <span class='keyword'><a name='21_9'>self</a></span>.<span class='identifier'><a name='21_14' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> = <span class='identifier'><a name='21_21'>line</a></span>
0022            <span class='keyword'><a name='22_9'>self</a></span>.<span class='identifier'><a name='22_14' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span> = <span class='identifier'><a name='22_20'>col</a></span>
0023            <span class='keyword'><a name='23_9'>self</a></span>.<span class='identifier'><a name='23_14' href='Entity.html#17_44' title='s:vC7siteify6Entity4kindGSqSS_'>kind</a></span> = <span class='identifier'><a name='23_21'>kind</a></span>
0024            <span class='keyword'><a name='24_9'>self</a></span>.<span class='identifier'><a name='24_14' href='Entity.html#17_59' title='s:vC7siteify6Entity4declSb'>decl</a></span> = <span class='identifier'><a name='24_21'>decl</a></span>
0025        }
0026    
0027        <span class='keyword'><a name='27_5'>var</a></span> <span class='identifier'><a name='27_9'>hashValue</a></span>: <span class='typeidentifier'><a name='27_20' title='s:Si'>Int</a></span> {
0028            <span class='keyword'><a name='28_9'>return</a></span> <span class='identifier'><a name='28_16' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> + <span class='identifier'><a name='28_23' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span>
0029        }
0030    
0031        <span class='keyword'><a name='31_5'>func</a></span> <span class='identifier'><a name='31_10' href='#' title='s:FC7siteify6Entity5regexFS0_FSSCS_9ByteRegex' onclick='return expand(this);'>regex<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#48_26"; return false;'>Entity.swift:48</td><td><pre>        if let matches = <b title='source.lang.swift.ref.function.method.instance'>regex</b>( value ).match( contents ) {</pre></td></table></span></a></span>( <span class='identifier'><a name='31_17'>text</a></span>: <span class='typeidentifier'><a name='31_23' title='s:SS'>String</a></span> ) -> <span class='typeidentifier'><a name='31_35' href='ByteRegex.html#23_7' title='s:C7siteify9ByteRegex'>ByteRegex</a></span> {
0032            <span class='keyword'><a name='32_9'>var</a></span> <span class='identifier'><a name='32_13'>pattern</a></span> = <span class='string'><a name='32_23'>"^"</a></span>
0033            <span class='keyword'><a name='33_9'>var</a></span> <span class='identifier'><a name='33_13'>line</a></span> = <span class='keyword'><a name='33_20'>self</a></span>.<span class='identifier'><a name='33_25' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span>
0034            <span class='keyword'><a name='34_9'>while</a></span> <span class='identifier'><a name='34_15'>line</a></span> > <span class='number'><a name='34_22'>100</a></span> {
0035                <span class='identifier'><a name='35_13'>pattern</a></span> += <span class='string'><a name='35_24'>"(?:[^\n]*\n){100}"</a></span>
0036                <span class='identifier'><a name='36_13'>line</a></span> -= <span class='number'><a name='36_21'>100</a></span>
0037            }
0038            <span class='keyword'><a name='38_9'>var</a></span> <span class='identifier'><a name='38_13'>col</a></span> = <span class='keyword'><a name='38_19'>self</a></span>.<span class='identifier'><a name='38_24' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span>, <span class='identifier'><a name='38_29'>largecol</a></span> = <span class='string'><a name='38_40'>""</a></span>
0039            <span class='keyword'><a name='39_9'>while</a></span> <span class='identifier'><a name='39_15'>col</a></span> > <span class='number'><a name='39_21'>100</a></span> {
0040                <span class='identifier'><a name='40_13'>largecol</a></span> += <span class='string'><a name='40_25'>".{100}"</a></span>
0041                <span class='identifier'><a name='41_13'>col</a></span> -= <span class='number'><a name='41_20'>100</a></span>
0042            }
0043            <span class='identifier'><a name='43_9'>pattern</a></span> += <span class='string'><a name='43_20'>"(?:[^\n]*\n){</a></span>\<span class='string_interpolation_anchor'><a name='43_35'>(</a></span><span class='identifier'><a name='43_36'>line</a></span>-<span class='number'><a name='43_41'>1</a></span><span class='string_interpolation_anchor'><a name='43_42'>)</a></span><span class='string'><a name='43_43'>}(</a></span>\<span class='string_interpolation_anchor'><a name='43_46'>(</a></span><span class='identifier'><a name='43_47'>largecol</a></span><span class='string_interpolation_anchor'><a name='43_55'>)</a></span><span class='string'><a name='43_56'>.{</a></span>\<span class='string_interpolation_anchor'><a name='43_59'>(</a></span><span class='identifier'><a name='43_60'>col</a></span>-<span class='number'><a name='43_64'>1</a></span><span class='string_interpolation_anchor'><a name='43_65'>)</a></span><span class='string'><a name='43_66'>}[^\n]*?)(</a></span>\<span class='string_interpolation_anchor'><a name='43_77'>(</a></span><span class='identifier'><a name='43_78'>text</a></span><span class='string_interpolation_anchor'><a name='43_82'>)</a></span><span class='string'><a name='43_83'>)([^\n]*)"</a></span>
0044            <span class='keyword'><a name='44_9'>return</a></span> <span class='identifier'><a name='44_16' href='ByteRegex.html#28_5' title='s:FC7siteify9ByteRegexcFMS0_FT7patternSS6cflagsVSs5Int32_S0_'>ByteRegex</a></span>( <span class='identifier'><a name='44_27'>pattern</a></span>: <span class='identifier'><a name='44_36'>pattern</a></span> )
0045        }
0046    
0047        <span class='keyword'><a name='47_5'>func</a></span> <span class='identifier'><a name='47_10' href='#' title='s:FC7siteify6Entity9patchTextFS0_FTCSo6NSData5valueSS_GSqSS_' onclick='return expand(this);'>patchText<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#142_49"; event.stopPropagation(); return false;'>main.swift:142</td><td><pre>                    usr.reflines.append( entity.<b title='source.lang.swift.ref.function.method.instance'>patchText</b>( data, value: "\\w*" )! )</pre></td></table></span></a></span>( <span class='identifier'><a name='47_21'>contents</a></span>: <span class='typeidentifier'><a name='47_31' title='c:objc(cs)NSData'>NSData</a></span>, <span class='identifier'><a name='47_39'>value</a></span>: <span class='typeidentifier'><a name='47_46' title='s:SS'>String</a></span> ) -> <span class='typeidentifier'><a name='47_58' title='s:SS'>String</a></span>? {
0048            <span class='keyword'><a name='48_9'>if</a></span> <span class='keyword'><a name='48_12'>let</a></span> <span class='identifier'><a name='48_16'>matches</a></span> = <span class='identifier'><a name='48_26' href='Entity.html#31_10' title='s:FC7siteify6Entity5regexFS0_FSSCS_9ByteRegex'>regex</a></span>( <span class='identifier'><a name='48_33'>value</a></span> ).<span class='identifier'><a name='48_41' href='ByteRegex.html#38_10' title='s:FC7siteify9ByteRegex5matchFS0_FTCSo6NSData6mflagsVSs5Int32_GSqGSaVSC10regmatch_t__'>match</a></span>( <span class='identifier'><a name='48_48'>contents</a></span> ) {
0049                <span class='keyword'><a name='49_13'>var</a></span> <span class='identifier'><a name='49_17'>b</a></span> = <span class='string'><a name='49_21'>"&lt;b title='"</a></span> + (<span class='identifier'><a name='49_37' href='Entity.html#17_44' title='s:vC7siteify6Entity4kindGSqSS_'>kind</a></span> ?? <span class='string'><a name='49_45'>"UNKNOWN"</a></span>) + <span class='string'><a name='49_58'>"'"</a></span>
0050                <span class='keyword'><a name='50_13'>if</a></span> <span class='identifier'><a name='50_16' href='Entity.html#17_59' title='s:vC7siteify6Entity4declSb'>decl</a></span> {
0051                    <span class='identifier'><a name='51_17'>b</a></span> += <span class='string'><a name='51_22'>" style='color: blue'"</a></span>
0052                }
0053                <span class='identifier'><a name='53_13'>b</a></span> += <span class='string'><a name='53_18'>">"</a></span>
0054                <span class='keyword'><a name='54_13'>return</a></span> <span class='identifier'><a name='54_20' href='Entity.html#61_10' title='s:FC7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS'>htmlClean</a></span>( <span class='identifier'><a name='54_31'>contents</a></span>, <span class='identifier'><a name='54_41'>match</a></span>: <span class='identifier'><a name='54_48'>matches</a></span>[<span class='number'><a name='54_56'>1</a></span>] ) +
0055                    <span class='identifier'><a name='55_17'>b</a></span> + <span class='identifier'><a name='55_21' href='Entity.html#61_10' title='s:FC7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS'>htmlClean</a></span>( <span class='identifier'><a name='55_32'>contents</a></span>, <span class='identifier'><a name='55_42'>match</a></span>: <span class='identifier'><a name='55_49'>matches</a></span>[<span class='number'><a name='55_57'>2</a></span>] ) + <span class='string'><a name='55_64'>"&lt;/b>"</a></span> +
0056                    <span class='identifier'><a name='56_17' href='Entity.html#61_10' title='s:FC7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS'>htmlClean</a></span>( <span class='identifier'><a name='56_28'>contents</a></span>, <span class='identifier'><a name='56_38'>match</a></span>: <span class='identifier'><a name='56_45'>matches</a></span>[<span class='number'><a name='56_53'>3</a></span>] )
0057            }
0058            <span class='keyword'><a name='58_9'>return</a></span> <span class='string'><a name='58_16'>"MATCH FAILED line:</a></span>\<span class='string_interpolation_anchor'><a name='58_36'>(</a></span><span class='identifier'><a name='58_37' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='58_41'>)</a></span><span class='string'><a name='58_42'> column:</a></span>\<span class='string_interpolation_anchor'><a name='58_51'>(</a></span><span class='identifier'><a name='58_52' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span><span class='string_interpolation_anchor'><a name='58_55'>)</a></span><span class='string'><a name='58_56'>"</a></span>
0059        }
0060    
0061        <span class='keyword'><a name='61_5'>func</a></span> <span class='identifier'><a name='61_10' href='#' title='s:FC7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS' onclick='return expand(this);'>htmlClean<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#54_20"; return false;'>Entity.swift:54</td><td><pre>            return <b title='source.lang.swift.ref.function.method.instance'>htmlClean</b>( contents, match: matches[1] ) +</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#55_21"; return false;'>Entity.swift:55</td><td><pre>                b + <b title='source.lang.swift.ref.function.method.instance'>htmlClean</b>( contents, match: matches[2] ) + "&lt;/b>" +</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Entity.html#56_17"; return false;'>Entity.swift:56</td><td><pre>                <b title='source.lang.swift.ref.function.method.instance'>htmlClean</b>( contents, match: matches[3] )</pre></td></table></span></a></span>( <span class='identifier'><a name='61_21'>contents</a></span>: <span class='typeidentifier'><a name='61_31' title='c:objc(cs)NSData'>NSData</a></span>, <span class='identifier'><a name='61_39'>match</a></span>: <span class='typeidentifier'><a name='61_46' title='c:@SA@regmatch_t'>regmatch_t</a></span> ) -> <span class='typeidentifier'><a name='61_62' title='s:SS'>String</a></span> {
0062            <span class='keyword'><a name='62_9'>var</a></span> <span class='identifier'><a name='62_13'>range</a></span> = <span class='identifier'><a name='62_21'>match</a></span>.<span class='identifier'><a name='62_27' href='ByteRegex.html#17_9' title='s:vE7siteifyVSC10regmatch_t5rangeVSC8_NSRange'>range</a></span>
0063            <span class='keyword'><a name='63_9'>if</a></span> <span class='identifier'><a name='63_12'>range</a></span>.<span class='identifier'><a name='63_18' title='c:@S@_NSRange@FI@length'>length</a></span> > <span class='identifier'><a name='63_27'>contents</a></span>.<span class='identifier'><a name='63_36' title='c:objc(cs)NSData(py)length'>length</a></span> - <span class='identifier'><a name='63_45'>range</a></span>.<span class='identifier'><a name='63_51' title='c:@S@_NSRange@FI@location'>location</a></span> {
0064                <span class='identifier'><a name='64_13'>range</a></span>.<span class='identifier'><a name='64_19' title='c:@S@_NSRange@FI@length'>length</a></span> = <span class='identifier'><a name='64_28'>contents</a></span>.<span class='identifier'><a name='64_37' title='c:objc(cs)NSData(py)length'>length</a></span> - <span class='identifier'><a name='64_46'>range</a></span>.<span class='identifier'><a name='64_52' title='c:@S@_NSRange@FI@location'>location</a></span>
0065            }
0066            <span class='keyword'><a name='66_9'>return</a></span> <span class='identifier'><a name='66_16' title='s:SS'>String</a></span>.<span class='identifier'><a name='66_23' href='LineGenerators.html#110_17' title='s:ZFE7siteifySS8fromDataFMSSFTCSo6NSData8encodingSu_GSqSS_'>fromData</a></span>( <span class='identifier'><a name='66_33'>contents</a></span>.<span class='identifier'><a name='66_42' title='c:objc(cs)NSData(im)subdataWithRange:'>subdataWithRange</a></span>( <span class='identifier'><a name='66_60'>range</a></span> ) )?
0067                .<span class='identifier'><a name='67_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='67_52'>"&amp;"</a></span>, <span class='identifier'><a name='67_57'>withString</a></span>: <span class='string'><a name='67_69'>"&amp;amp;"</a></span> )
0068                .<span class='identifier'><a name='68_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='68_52'>"&lt;"</a></span>, <span class='identifier'><a name='68_57'>withString</a></span>: <span class='string'><a name='68_69'>"&amp;lt;"</a></span> ) ?? <span class='string'><a name='68_81'>"CONVERSION FAILED"</a></span>
0069        }
0070    
0071    }
0072    
0073    <span class='keyword'><a name='73_1'>func</a></span> ==(<span class='identifier'><a name='73_9'>lhs</a></span>: <span class='typeidentifier'><a name='73_14' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>, <span class='identifier'><a name='73_22'>rhs</a></span>: <span class='typeidentifier'><a name='73_27' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>) -> <span class='typeidentifier'><a name='73_38' title='s:Sb'>Bool</a></span> {
0074        <span class='keyword'><a name='74_5'>return</a></span> <span class='identifier'><a name='74_12'>lhs</a></span>.<span class='identifier'><a name='74_16' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> == <span class='identifier'><a name='74_24'>rhs</a></span>.<span class='identifier'><a name='74_28' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> &amp;&amp; <span class='identifier'><a name='74_36'>lhs</a></span>.<span class='identifier'><a name='74_40' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span> == <span class='identifier'><a name='74_47'>rhs</a></span>.<span class='identifier'><a name='74_51' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span> &amp;&amp; <span class='identifier'><a name='74_58'>lhs</a></span>.<span class='identifier'><a name='74_62' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> == <span class='identifier'><a name='74_70'>rhs</a></span>.<span class='identifier'><a name='74_74' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span>
0075    }
0076    
0077    <span class='keyword'><a name='77_1'>func</a></span> &lt;(<span class='identifier'><a name='77_8'>e1</a></span>: <span class='typeidentifier'><a name='77_12' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>, <span class='identifier'><a name='77_20'>e2</a></span>: <span class='typeidentifier'><a name='77_24' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>) -> <span class='typeidentifier'><a name='77_35' title='s:Sb'>Bool</a></span> {
0078        <span class='keyword'><a name='78_5'>let</a></span> <span class='identifier'><a name='78_9'>file1</a></span> = <span class='identifier'><a name='78_17' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>( <span class='identifier'><a name='78_24'>fileURLWithPath</a></span>: <span class='identifier'><a name='78_41'>e1</a></span>.<span class='identifier'><a name='78_44' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> ).<span class='identifier'><a name='78_51' title='c:objc(cs)NSURL(py)lastPathComponent'>lastPathComponent</a></span>!,
0079        <span class='identifier'><a name='79_5'>file2</a></span> = <span class='identifier'><a name='79_13' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>( <span class='identifier'><a name='79_20'>fileURLWithPath</a></span>: <span class='identifier'><a name='79_37'>e2</a></span>.<span class='identifier'><a name='79_40' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> ).<span class='identifier'><a name='79_47' title='c:objc(cs)NSURL(py)lastPathComponent'>lastPathComponent</a></span>!
0080        <span class='keyword'><a name='80_5'>if</a></span> <span class='identifier'><a name='80_8'>file1</a></span> &lt; <span class='identifier'><a name='80_16'>file2</a></span> { <span class='keyword'><a name='80_24'>return</a></span> <span class='keyword'><a name='80_31'>true</a></span> }
0081        <span class='keyword'><a name='81_5'>if</a></span> <span class='identifier'><a name='81_8'>file1</a></span> > <span class='identifier'><a name='81_16'>file2</a></span> { <span class='keyword'><a name='81_24'>return</a></span> <span class='keyword'><a name='81_31'>false</a></span> }
0082        <span class='keyword'><a name='82_5'>if</a></span> <span class='identifier'><a name='82_8'>e1</a></span>.<span class='identifier'><a name='82_11' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> &lt; <span class='identifier'><a name='82_18'>e2</a></span>.<span class='identifier'><a name='82_21' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> { <span class='keyword'><a name='82_28'>return</a></span> <span class='keyword'><a name='82_35'>true</a></span> }
0083        <span class='keyword'><a name='83_5'>if</a></span> <span class='identifier'><a name='83_8'>e1</a></span>.<span class='identifier'><a name='83_11' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> > <span class='identifier'><a name='83_18'>e2</a></span>.<span class='identifier'><a name='83_21' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span> { <span class='keyword'><a name='83_28'>return</a></span> <span class='keyword'><a name='83_35'>false</a></span> }
0084        <span class='keyword'><a name='84_5'>return</a></span> <span class='identifier'><a name='84_12'>e1</a></span>.<span class='identifier'><a name='84_15' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span> &lt; <span class='identifier'><a name='84_21'>e2</a></span>.<span class='identifier'><a name='84_24' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span>
0085    }
0086    