<html><head>
    <meta charset="UTF-8">
    <title>siteify/Parallelize.swift</title>
    <link rel="stylesheet" type="text/css" href="siteify.css">
    <script src="siteify.js"></script>
</head><html><body class=source><h3><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABRJJREFUWAnFV1tIZWUU/vY+6klxoLwMNurYVOboSDZTlIym85KR0IOMw0BCGvTggwRCzxH00ku+NMTQFM0QxUhCUzopKaX0IFnkoIwXvCGiOU5q3o5Hz97771tb3Z299XiOYLTgO//+L2ut71//bR0NbtFYTSIeJ+IIqUcSxY4QsUksE1uERRxJxEm4iMPHFhcXx8Ibvd9KKRAqGAw+pAz29PTcbmxsvMNxQsT0jj+sHj5D+RZCZ9bX10cPU9olANM0sby8jLW1tdDs7Oz1ysrKD6n3gJBISISiipdAPDWe2draGjxMc4+AlIZhgFHA6uqqqev6naKioneoGzMJ3eNICGk+nw/REBcXB0F8fDzS09OhaZovJyfn8sjIyBe0cYoQ2+ETZHW/eAnICI0zwWEQctIv5R6JpKQkIYG8vLyK8fHxr2gnlo3sYiRs/cSzDG1UsSxLCbgPVCgUUhMTE2p7e9vRm56e/p22ThMJRMRIHBQBjo8uMlsRKSUaIrIfSAaBQAAZGRnPz83NtbM5k4hIIpyZfMvAs5zGPZYxiTKCgM8POsPm5qZNgMfTLsVAYmJib0lJyVs8KVOsyr0R8XQIAVmCIieO3g+G3CtmYFGFBr5UlmnYyyHLwAgoOlQ8mmpwcFDxnviedmVP+AiXxLYEoYCtpJYmeMINt4HEFN6BQRi9H9vLIRszISEBfr8fqampyM7ORkpKyutNTU0VVJQJhkfdZStyBIJryhztUsoMqVDfLaW2A65AWA/H1dYnFcq4f9fZmNwP9ubknaJ4samBgQHZDxIF16RdFRed8Io/GdqjOTB+/Ai+py7B+O59qJU/nRFa2pOMgg6z+wbLDTsSe5tzLyKZmZnnqJBIiE8nCrEREI2TT0N/4iKM5vd2yluNsKb+YI8I7QWJxRWo+z/ttPB0CAmBkEhOTk5jxyM7g+0h9k/MBGS0fvZl6Odeg/ntNbo8AePTd2H+cB1q9S9ofwegbViwhvscx6KzR4I3psx+3wvrfQ1F51DxlV2FtrkFs/WGbdxq/xrWL3ehNkw7rmpu3tEX5x7Z13AQAfegwDozhGSXHf3VNxkOP8zb13iq+fBtLEHj6Vb80TVJJyKK2HbZj7oEauQezG8+g1qUB+5f0V+5Cv3SFTvsYOgRsKAR2CSOIAdFwKWuXSiFNv8AxttV0E+fAdJ5knzkPTUGa352Zzp8lrkeO3fcb31Q/b9CO/+Sy06kSlQCoqhXXoZ2KgdW0wewhn6mU1cUd2skkXaSy7EOq6sdvuMkICS0516A7/MW6F0ddNABNTYKbXWFTtOgXXgR+pU3oOXmAetrsJrlNT66yLTkqjzvuuaOsSK2d304IYy6Canwn8r/TiDqJmSmg87OTuTm5trpV3l5OVpaWlBdXY3u7m4UFhZiYWEB/f394FOM4uJiTE1NYWhoyM4Va2trD41gVAJtbW2oqqrC0tKSnf0y30NHRwcKCgowPDxsP7dMv+z0vKGhwXaWn5+PyclJRHMug6MuQX19PXp7e9HV1QVmNmhubkZNTQ3a29uRlZXlzG5mZgY3b94EkxCnLZaPgwg4O1QMtLa22rmepN+S+Up4S0tLIbMuKytzfEjiUVdXBz67TtsBHy7b3v6Ix1Cy3uMQOox6DHmdwZ1zsUFy/2MSsS0+HPFals5lPqMXWZ4gvP2O4hE/xPEaIX9eXQS8ayJ7QlJzSR6klH7vGDYdScShYJuQv/JSOk/mP8kXIQTYC1wuAAAAAElFTkSuQmCC'> Source: siteify/Parallelize.swift (<a href='index.html'>Index</a>)<br/><br/>Repo: <a href='https://github.com/johnno1962/siteify'>https://github.com/johnno1962/siteify</a></h3><pre>
<script>

var repo = "https://github.com/johnno1962/siteify";
var commits = {
  "ac72b93" : {
    "author" : "John Holdsworth ",
    "message" : "\n    hover request for markup\n",
    "hash" : "ac72b932f79f5684dc4811866c970790d3e9bfab",
    "date" : "Tue Nov 19 11:16:46 2019 +0100"
  },
  "7dc2527" : {
    "author" : "John Holdsworth ",
    "hash" : "7dc25279577f04a9e065940edbfd1116eb3d4606",
    "message" : "\n    de-synchronize\n",
    "date" : "Wed Nov 13 15:12:43 2019 +0100"
  },
  "3ecffd9" : {
    "author" : "John Holdsworth ",
    "hash" : "3ecffd9fbd44eed05625c9a11ef5301a4188825b",
    "message" : "\n    Ported to LSP!\n",
    "date" : "Thu Oct 31 06:08:06 2019 +0100"
  },
  "1752ae6" : {
    "author" : "John Holdsworth ",
    "hash" : "1752ae6c894be81a7cbed786652883cfe10175fa",
    "message" : "\n    Fleck + locking\n",
    "date" : "Mon Nov 25 16:03:36 2019 +0100"
  },
  "dd65abc" : {
    "author" : "John Holdsworth ",
    "hash" : "dd65abc3f8585cc9d7da030a7f8489deaaee6ddb",
    "message" : "\n    Paralellized version.\n",
    "date" : "Wed Oct 30 17:08:17 2019 +0100"
  },
  "3a9fb3a" : {
    "author" : "John Holdsworth ",
    "message" : "\n    Dark mode\n",
    "hash" : "3a9fb3ab3da27d1e6ec01fe54beedba6eb67b486",
    "date" : "Thu Nov 14 12:08:20 2019 +0100"
  }
};

</script>
<script> lineLink("dd65abc", 1572451697, "0001") </script><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("dd65abc", 1572451697, "0002") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//  Parallelise.swift
<script> lineLink("dd65abc", 1572451697, "0003") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//  siteify
<script> lineLink("dd65abc", 1572451697, "0004") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("dd65abc", 1572451697, "0005") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//  Created by John Holdsworth on 30/10/2019.
<script> lineLink("dd65abc", 1572451697, "0006") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//  Copyright Â© 2019 John Holdsworth. All rights reserved.
<script> lineLink("dd65abc", 1572451697, "0007") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("1752ae6", 1574694216, "0008") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//  $Id: //depot/siteify/siteify/Parallelize.swift#7 $
<script> lineLink("3ecffd9", 1572498486, "0009") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("3ecffd9", 1572498486, "0010") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//  Repo: </span><span class='url'><a href='https://github.com/johnno1962/siteify'>https://github.com/johnno1962/siteify</a></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>
<script> lineLink("3ecffd9", 1572498486, "0011") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("dd65abc", 1572451697, "0012") </script></span>
<script> lineLink("dd65abc", 1572451697, "0013") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>import</span> <span class='identifier' title='success(Optional(SwiftLSPClient.TypeDefinitionResponse.locationArray([])))'>Foundation</span>
<script> lineLink("dd65abc", 1572451697, "0014") </script>
<script> lineLink("7dc2527", 1573654363, "0015") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>extension</span> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Sequence</span> {
<script> lineLink("7dc2527", 1573654363, "0016") </script>
<script> lineLink("7dc2527", 1573654363, "0017") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>@discardableResult</span>
<script> lineLink("3a9fb3a", 1573729700, "0018") </script>    <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='18_9' href='#' onclick='return expand(this);'>concurrentMap<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#184_13"; event.stopPropagation(); return false;'>Siteify.swift:184</td><td><pre>            .concurrentMap(maxConcurrency: fileThreads) { (relative, completion: (String?) -> Void) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#298_14"; event.stopPropagation(); return false;'>Siteify.swift:298</td><td><pre>            }.concurrentMap(maxConcurrency: 1</pre></td></table></span></a></span>&lt;<span class='identifier' title='Parallelize.swift'><a name='18_23'>Output</a></span>>(<span class='identifier' title='usrString2'><a name='18_31' href='#' onclick='return expand(this);'>maxConcurrency<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#37_53"; return false;'>Parallelize.swift:37</td><td><pre>            let semaphore = DispatchSemaphore(value: maxConcurrency)</pre></td></table></span></a></span>: <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Int</span> = <span class='number' title='source.lang.swift.syntaxtype.number'>4</span>,
<script> lineLink("3a9fb3a", 1573729700, "0019") </script>                               <span class='identifier' title='usrString2'><a name='19_31' href='#' onclick='return expand(this);'>queueName<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#35_55"; return false;'>Parallelize.swift:35</td><td><pre>            let concurrentQueue = DispatchQueue(label: queueName, qos: priority,</pre></td></table></span></a></span>: <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>String</span> = <span class='string' title='source.lang.swift.syntaxtype.string'>"concurrentMap"</span>,
<script> lineLink("3a9fb3a", 1573729700, "0020") </script>                               <span class='identifier' title='usrString2'><a name='20_31' href='#' onclick='return expand(this);'>priority<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#35_71"; return false;'>Parallelize.swift:35</td><td><pre>            let concurrentQueue = DispatchQueue(label: queueName, qos: priority,</pre></td></table></span></a></span>: <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>DispatchQoS</span> = .<span class='identifier' title='x86_64-apple-macos.swiftmodule'>default</span>,
<script> lineLink("3a9fb3a", 1573729700, "0021") </script>                               <span class='identifier' title='usrString2'><a name='21_31' href='#' onclick='return expand(this);'>worker<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#45_20"; return false;'>Parallelize.swift:45</td><td><pre>                    worker(input[index], { result in</pre></td></table></span></a></span>: <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>@escaping</span> (<span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Element</span>,
<script> lineLink("3a9fb3a", 1573729700, "0022") </script>                            <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>@escaping</span> (<span class='typeidentifier' title='Parallelize.swift'><a name='22_39' href='Parallelize.swift.html#18_23'>Output</a></span>) -> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Void</span>) -> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Void</span>) -> [<span class='typeidentifier' title='Parallelize.swift'><a name='22_69' href='Parallelize.swift.html#18_23'>Output</a></span>] {
<script> lineLink("7dc2527", 1573654363, "0023") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='23_12'>input</a></span> = <span class='identifier' title='x86_64-apple-macos.swiftmodule'>Array</span>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>self</span>)
<script> lineLink("7dc2527", 1573654363, "0024") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>var</span> <span class='identifier' title='Parallelize.swift'><a name='24_12'>output</a></span> = <span class='identifier' title='x86_64-apple-macos.swiftmodule'>Array</span>&lt;<span class='typeidentifier' title='Parallelize.swift'><a name='24_27' href='Parallelize.swift.html#18_23'>Output</a></span>>(<span class='identifier' title='x86_64-apple-macos.swiftmodule'>unsafeUninitializedCapacity</span>: <span class='identifier' title='Parallelize.swift'><a name='24_64' href='Parallelize.swift.html#23_12'>input</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>count</span>,
<script> lineLink("7dc2527", 1573654363, "0025") </script>                                   <span class='identifier' title='x86_64-apple-macos.swiftmodule'>initializingWith</span>: {
<script> lineLink("7dc2527", 1573654363, "0026") </script>                                    (<span class='identifier' title='Parallelize.swift'><a name='26_37'>buffer</a></span>, <span class='identifier' title='Parallelize.swift'><a name='26_45'>initializedCount</a></span>) <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>in</span>
<script> lineLink("7dc2527", 1573654363, "0027") </script>                                    <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='27_40'>stride</a></span> = <span class='identifier' title='x86_64-apple-macos.swiftmodule'>MemoryLayout</span>&lt;<span class='typeidentifier' title='Parallelize.swift'><a name='27_62' href='Parallelize.swift.html#18_23'>Output</a></span>>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>stride</span>
<script> lineLink("7dc2527", 1573654363, "0028") </script>                                    <span class='identifier' title='string.h'>memset</span>(<span class='identifier' title='Parallelize.swift'><a name='28_43' href='Parallelize.swift.html#26_37'>buffer</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>baseAddress</span>, <span class='number' title='source.lang.swift.syntaxtype.number'>0</span>,
<script> lineLink("7dc2527", 1573654363, "0029") </script>                                           <span class='identifier' title='Parallelize.swift'><a name='29_43' href='Parallelize.swift.html#27_40'>stride</a></span> * <span class='identifier' title='Parallelize.swift'><a name='29_52' href='Parallelize.swift.html#23_12'>input</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>count</span>)
<script> lineLink("7dc2527", 1573654363, "0030") </script>                                    <span class='identifier' title='Parallelize.swift'><a name='30_36' href='Parallelize.swift.html#26_45'>initializedCount</a></span> = <span class='identifier' title='Parallelize.swift'><a name='30_55' href='Parallelize.swift.html#23_12'>input</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>count</span>})
<script> lineLink("7dc2527", 1573654363, "0031") </script>
<script> lineLink("7dc2527", 1573654363, "0032") </script>        <span class='identifier' title='Parallelize.swift'><a name='32_8' href='Parallelize.swift.html#24_12'>output</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>withUnsafeMutableBufferPointer</span> {
<script> lineLink("7dc2527", 1573654363, "0033") </script>            <span class='identifier' title='Parallelize.swift'><a name='33_12'>buffer</a></span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>in</span>
<script> lineLink("3a9fb3a", 1573729700, "0034") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='34_16'>buffro</a></span> = <span class='identifier' title='Parallelize.swift'><a name='34_25' href='Parallelize.swift.html#33_12'>buffer</a></span>
<script> lineLink("7dc2527", 1573654363, "0035") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='35_16'>concurrentQueue</a></span> = <span class='identifier' title='queue.h'>DispatchQueue</span>(<span class='identifier' title='success(Optional(SwiftLSPClient.TypeDefinitionResponse.locationArray([])))'>label</span>: <span class='identifier' title='Parallelize.swift'><a name='35_55' href='Parallelize.swift.html#19_31'>queueName</a></span>, <span class='identifier' title='success(Optional(SwiftLSPClient.TypeDefinitionResponse.locationArray([])))'>qos</span>: <span class='identifier' title='Parallelize.swift'><a name='35_71' href='Parallelize.swift.html#20_31'>priority</a></span>,
<script> lineLink("7dc2527", 1573654363, "0036") </script>                                                <span class='identifier' title='success(Optional(SwiftLSPClient.TypeDefinitionResponse.locationArray([])))'>attributes</span>: .<span class='identifier' title='x86_64-apple-macos.swiftmodule'>concurrent</span>)
<script> lineLink("7dc2527", 1573654363, "0037") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='37_16'>semaphore</a></span> = <span class='identifier' title='semaphore.h'>DispatchSemaphore</span>(<span class='identifier' title='semaphore.h'>value</span>: <span class='identifier' title='Parallelize.swift'><a name='37_53' href='Parallelize.swift.html#18_31'>maxConcurrency</a></span>)
<script> lineLink("7dc2527", 1573654363, "0038") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='38_16'>threadGroup</a></span> = <span class='identifier' title='group.h'>DispatchGroup</span>()
<script> lineLink("7dc2527", 1573654363, "0039") </script>
<script> lineLink("7dc2527", 1573654363, "0040") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>for</span> <span class='identifier' title='Parallelize.swift'><a name='40_16'>index</a></span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>in</span> <span class='number' title='source.lang.swift.syntaxtype.number'>0</span>..&lt;<span class='identifier' title='Parallelize.swift'><a name='40_29' href='Parallelize.swift.html#23_12'>input</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>count</span> {
<script> lineLink("7dc2527", 1573654363, "0041") </script>                <span class='identifier' title='Parallelize.swift'><a name='41_16' href='Parallelize.swift.html#38_16'>threadGroup</a></span>.<span class='identifier' title='group.h'>enter</span>()
<script> lineLink("7dc2527", 1573654363, "0042") </script>                <span class='identifier' title='Parallelize.swift'><a name='42_16' href='Parallelize.swift.html#37_16'>semaphore</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>wait</span>()
<script> lineLink("7dc2527", 1573654363, "0043") </script>
<script> lineLink("7dc2527", 1573654363, "0044") </script>                <span class='identifier' title='Parallelize.swift'><a name='44_16' href='Parallelize.swift.html#35_16'>concurrentQueue</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>async</span> {
<script> lineLink("7dc2527", 1573654363, "0045") </script>                    <span class='identifier' title='Parallelize.swift'><a name='45_20' href='Parallelize.swift.html#21_31'>worker</a></span>(<span class='identifier' title='Parallelize.swift'><a name='45_27' href='Parallelize.swift.html#23_12'>input</a></span>[<span class='identifier' title='Parallelize.swift'><a name='45_33' href='Parallelize.swift.html#40_16'>index</a></span>], { <span class='identifier' title='Parallelize.swift'><a name='45_43'>result</a></span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>in</span>
<script> lineLink("3a9fb3a", 1573729700, "0046") </script>                        <span class='identifier' title='Parallelize.swift'><a name='46_24' href='Parallelize.swift.html#34_16'>buffro</a></span>[<span class='identifier' title='Parallelize.swift'><a name='46_31' href='Parallelize.swift.html#40_16'>index</a></span>] = <span class='identifier' title='Parallelize.swift'><a name='46_40' href='Parallelize.swift.html#45_43'>result</a></span>
<script> lineLink("7dc2527", 1573654363, "0047") </script>                        <span class='identifier' title='Parallelize.swift'><a name='47_24' href='Parallelize.swift.html#38_16'>threadGroup</a></span>.<span class='identifier' title='group.h'>leave</span>()
<script> lineLink("7dc2527", 1573654363, "0048") </script>                        <span class='identifier' title='Parallelize.swift'><a name='48_24' href='Parallelize.swift.html#37_16'>semaphore</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>signal</span>()
<script> lineLink("7dc2527", 1573654363, "0049") </script>                    })
<script> lineLink("7dc2527", 1573654363, "0050") </script>                }
<script> lineLink("7dc2527", 1573654363, "0051") </script>            }
<script> lineLink("7dc2527", 1573654363, "0052") </script>
<script> lineLink("7dc2527", 1573654363, "0053") </script>            <span class='identifier' title='Parallelize.swift'><a name='53_12' href='Parallelize.swift.html#38_16'>threadGroup</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>wait</span>()
<script> lineLink("dd65abc", 1572451697, "0054") </script>        }
<script> lineLink("dd65abc", 1572451697, "0055") </script>
<script> lineLink("7dc2527", 1573654363, "0056") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>return</span> <span class='identifier' title='Parallelize.swift'><a name='56_15' href='Parallelize.swift.html#24_12'>output</a></span>
<script> lineLink("7dc2527", 1573654363, "0057") </script>    }
<script> lineLink("dd65abc", 1572451697, "0058") </script>}
<script> lineLink("1752ae6", 1574694216, "0059") </script>
<script> lineLink("1752ae6", 1574694216, "0060") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>extension</span> <span class='typeidentifier' title='NSLock.h'>NSLock</span> {
<script> lineLink("1752ae6", 1574694216, "0061") </script>
<script> lineLink("1752ae6", 1574694216, "0062") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>public</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='62_16' onclick='return expand(this);'>synchronized<span class='references'><table></table></span></a></span>&lt;<span class='identifier' title='Parallelize.swift'><a name='62_29'>T</a></span>>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>_</span> <span class='identifier' title='usrString2'><a name='62_34' onclick='return expand(this);'>closure<span class='references'><table></table></span></a></span>: () -> <span class='typeidentifier' title='Parallelize.swift'><a name='62_49' href='Parallelize.swift.html#62_29'>T</a></span>) -> <span class='typeidentifier' title='Parallelize.swift'><a name='62_55' href='Parallelize.swift.html#62_29'>T</a></span> {
<script> lineLink("1752ae6", 1574694216, "0063") </script>        <span class='identifier' title='NSLock.h'>lock</span>(); <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>defer</span> { <span class='identifier' title='NSLock.h'>unlock</span>() }
<script> lineLink("1752ae6", 1574694216, "0064") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>return</span> <span class='identifier' title='Parallelize.swift'><a name='64_15' href='Parallelize.swift.html#62_34'>closure</a></span>()
<script> lineLink("1752ae6", 1574694216, "0065") </script>    }
<script> lineLink("1752ae6", 1574694216, "0066") </script>}
<script> lineLink("1752ae6", 1574694216, "0067") </script>
<script> lineLink("1752ae6", 1574694216, "0068") </script><span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// Wrapper for os_unfair_lock mutex primitve from the
<script> lineLink("1752ae6", 1574694216, "0069") </script></span><span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// project: </span><span class='url'><a href='https://github.com/Alamofire/Alamofire'>https://github.com/Alamofire/Alamofire</a></span><span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>
<script> lineLink("1752ae6", 1574694216, "0070") </script></span><span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>@available</span>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>OSX</span> <span class='number' title='source.lang.swift.syntaxtype.number'>10.12</span>, <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>iOS</span> <span class='number' title='source.lang.swift.syntaxtype.number'>10.0</span>, <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>tvOS</span> <span class='number' title='source.lang.swift.syntaxtype.number'>10.0</span>, <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>watchOS</span> <span class='number' title='source.lang.swift.syntaxtype.number'>3.0</span>, *)
<script> lineLink("0000000", 1574765803, "0071") </script><span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>public</span> <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>final</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>class</span> <span class='identifier' title='usrString2'><a name='71_19' href='#' onclick='return expand(this);'>UnfairLock<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#111_38"; return false;'>Parallelize.swift:111</td><td><pre>public typealias SynchronizableLock = UnfairLock</pre></td></table></span></a></span> {
<script> lineLink("1752ae6", 1574694216, "0072") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>private</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='usrString2'><a name='72_16' href='#' onclick='return expand(this);'>unfairLock<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#75_8"; return false;'>Parallelize.swift:75</td><td><pre>        unfairLock = .allocate(capacity: 1)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#76_8"; return false;'>Parallelize.swift:76</td><td><pre>        unfairLock.initialize(to: os_unfair_lock())</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#80_8"; return false;'>Parallelize.swift:80</td><td><pre>        unfairLock.deinitialize(count: 1)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#81_8"; return false;'>Parallelize.swift:81</td><td><pre>        unfairLock.deallocate()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#85_28"; return false;'>Parallelize.swift:85</td><td><pre>        os_unfair_lock_lock(unfairLock)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#89_30"; return false;'>Parallelize.swift:89</td><td><pre>        os_unfair_lock_unlock(unfairLock)</pre></td></table></span></a></span>: <span class='typeidentifier' title='lock.h'>os_unfair_lock_t</span>
<script> lineLink("1752ae6", 1574694216, "0073") </script>
<script> lineLink("1752ae6", 1574694216, "0074") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>public</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>init</span>() {
<script> lineLink("1752ae6", 1574694216, "0075") </script>        <span class='identifier' title='Parallelize.swift'><a name='75_8' href='Parallelize.swift.html#72_16'>unfairLock</a></span> = .<span class='identifier' title='x86_64-apple-macos.swiftmodule'>allocate</span>(<span class='identifier' title='x86_64-apple-macos.swiftmodule'>capacity</span>: <span class='number' title='source.lang.swift.syntaxtype.number'>1</span>)
<script> lineLink("1752ae6", 1574694216, "0076") </script>        <span class='identifier' title='Parallelize.swift'><a name='76_8' href='Parallelize.swift.html#72_16'>unfairLock</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>initialize</span>(<span class='identifier' title='x86_64-apple-macos.swiftmodule'>to</span>: <span class='identifier' title='lock.h'>os_unfair_lock</span>())
<script> lineLink("1752ae6", 1574694216, "0077") </script>    }
<script> lineLink("1752ae6", 1574694216, "0078") </script>
<script> lineLink("1752ae6", 1574694216, "0079") </script>    <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>deinit</span> {
<script> lineLink("1752ae6", 1574694216, "0080") </script>        <span class='identifier' title='Parallelize.swift'><a name='80_8' href='Parallelize.swift.html#72_16'>unfairLock</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>deinitialize</span>(<span class='identifier' title='x86_64-apple-macos.swiftmodule'>count</span>: <span class='number' title='source.lang.swift.syntaxtype.number'>1</span>)
<script> lineLink("1752ae6", 1574694216, "0081") </script>        <span class='identifier' title='Parallelize.swift'><a name='81_8' href='Parallelize.swift.html#72_16'>unfairLock</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>deallocate</span>()
<script> lineLink("1752ae6", 1574694216, "0082") </script>    }
<script> lineLink("1752ae6", 1574694216, "0083") </script>
<script> lineLink("0000000", 1574765803, "0084") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>private</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='84_17' href='#' onclick='return expand(this);'>lock<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#98_8"; return false;'>Parallelize.swift:98</td><td><pre>        lock(); defer { unlock() }</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#106_8"; return false;'>Parallelize.swift:106</td><td><pre>        lock(); defer { unlock() }</pre></td></table></span></a></span>() {
<script> lineLink("1752ae6", 1574694216, "0085") </script>        <span class='identifier' title='lock.h'>os_unfair_lock_lock</span>(<span class='identifier' title='Parallelize.swift'><a name='85_28' href='Parallelize.swift.html#72_16'>unfairLock</a></span>)
<script> lineLink("1752ae6", 1574694216, "0086") </script>    }
<script> lineLink("1752ae6", 1574694216, "0087") </script>
<script> lineLink("0000000", 1574765803, "0088") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>private</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='88_17' href='#' onclick='return expand(this);'>unlock<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#98_24"; return false;'>Parallelize.swift:98</td><td><pre>        lock(); defer { unlock() }</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#106_24"; return false;'>Parallelize.swift:106</td><td><pre>        lock(); defer { unlock() }</pre></td></table></span></a></span>() {
<script> lineLink("1752ae6", 1574694216, "0089") </script>        <span class='identifier' title='lock.h'>os_unfair_lock_unlock</span>(<span class='identifier' title='Parallelize.swift'><a name='89_30' href='Parallelize.swift.html#72_16'>unfairLock</a></span>)
<script> lineLink("1752ae6", 1574694216, "0090") </script>    }
<script> lineLink("1752ae6", 1574694216, "0091") </script>
<script> lineLink("1752ae6", 1574694216, "0092") </script>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// Executes a closure returning a value while acquiring the lock.
<script> lineLink("1752ae6", 1574694216, "0093") </script></span>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>///
<script> lineLink("1752ae6", 1574694216, "0094") </script></span>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// - </span><span class='field' title='source.lang.swift.syntaxtype.doccomment.field'>Parameter</span><span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'> closure: The closure to run.
<script> lineLink("1752ae6", 1574694216, "0095") </script></span>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>///
<script> lineLink("1752ae6", 1574694216, "0096") </script></span>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// - </span><span class='field' title='source.lang.swift.syntaxtype.doccomment.field'>Returns</span><span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>:           The value the closure generated.
<script> lineLink("0000000", 1574765803, "0097") </script></span>    <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='97_9' href='#' onclick='return expand(this);'>synchronized<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#127_28"; return false;'>Parallelize.swift:127</td><td><pre>        let lock = lockLock.synchronized { () -> SynchronizableLock in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#136_20"; return false;'>Parallelize.swift:136</td><td><pre>        return lock.synchronized { closure(&amp;lockee.pointee) }</pre></td></table></span></a></span>&lt;<span class='identifier' title='Parallelize.swift'><a name='97_22'>T</a></span>>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>_</span> <span class='identifier' title='usrString2'><a name='97_27' onclick='return expand(this);'>closure<span class='references'><table></table></span></a></span>: () -> <span class='typeidentifier' title='Parallelize.swift'><a name='97_42' href='Parallelize.swift.html#97_22'>T</a></span>) -> <span class='typeidentifier' title='Parallelize.swift'><a name='97_48' href='Parallelize.swift.html#97_22'>T</a></span> {
<script> lineLink("0000000", 1574765803, "0098") </script>        <span class='identifier' title='Parallelize.swift'><a name='98_8' href='Parallelize.swift.html#84_17'>lock</a></span>(); <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>defer</span> { <span class='identifier' title='Parallelize.swift'><a name='98_24' href='Parallelize.swift.html#88_17'>unlock</a></span>() }
<script> lineLink("0000000", 1574765803, "0099") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>return</span> <span class='identifier' title='Parallelize.swift'><a name='99_15' href='Parallelize.swift.html#97_27'>closure</a></span>()
<script> lineLink("0000000", 1574765803, "0100") </script>    }
<script> lineLink("0000000", 1574765803, "0101") </script>
<script> lineLink("0000000", 1574765803, "0102") </script>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// Execute a closure while acquiring the lock.
<script> lineLink("0000000", 1574765803, "0103") </script></span>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>///
<script> lineLink("0000000", 1574765803, "0104") </script></span>    <span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'>/// - </span><span class='field' title='source.lang.swift.syntaxtype.doccomment.field'>Parameter</span><span class='doccomment' title='source.lang.swift.syntaxtype.doccomment'> closure: The closure to run.
<script> lineLink("0000000", 1574765803, "0105") </script></span>    <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='105_9' href='#' onclick='return expand(this);'>synchronized<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#141_17"; return false;'>Parallelize.swift:141</td><td><pre>        lockLock.synchronized {</pre></td></table></span></a></span>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>_</span> <span class='identifier' title='usrString2'><a name='105_24' onclick='return expand(this);'>closure<span class='references'><table></table></span></a></span>: () -> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Void</span>) {
<script> lineLink("1752ae6", 1574694216, "0106") </script>        <span class='identifier' title='Parallelize.swift'><a name='106_8' href='Parallelize.swift.html#84_17'>lock</a></span>(); <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>defer</span> { <span class='identifier' title='Parallelize.swift'><a name='106_24' href='Parallelize.swift.html#88_17'>unlock</a></span>() }
<script> lineLink("1752ae6", 1574694216, "0107") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>return</span> <span class='identifier' title='Parallelize.swift'><a name='107_15' href='Parallelize.swift.html#105_24'>closure</a></span>()
<script> lineLink("1752ae6", 1574694216, "0108") </script>    }
<script> lineLink("1752ae6", 1574694216, "0109") </script>}
<script> lineLink("1752ae6", 1574694216, "0110") </script>
<script> lineLink("0000000", 1574765803, "0111") </script><span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>public</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>typealias</span> <span class='identifier' title='usrString2'><a name='111_17' href='#' onclick='return expand(this);'>SynchronizableLock<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#112_39"; return false;'>Parallelize.swift:112</td><td><pre>private var allLocks = [OpaquePointer: SynchronizableLock]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#113_23"; return false;'>Parallelize.swift:113</td><td><pre>private var lockLock = SynchronizableLock()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#127_49"; return false;'>Parallelize.swift:127</td><td><pre>        let lock = lockLock.synchronized { () -> SynchronizableLock in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#131_23"; return false;'>Parallelize.swift:131</td><td><pre>                lock = SynchronizableLock()</pre></td></table></span></a></span> = <span class='typeidentifier' title='Parallelize.swift'><a name='111_38' href='Parallelize.swift.html#71_19'>UnfairLock</a></span>
<script> lineLink("0000000", 1574765803, "0112") </script><span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>private</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>var</span> <span class='identifier' title='usrString2'><a name='112_12' href='#' onclick='return expand(this);'>allLocks<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#129_23"; return false;'>Parallelize.swift:129</td><td><pre>            var lock = allLocks[key]</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#132_16"; return false;'>Parallelize.swift:132</td><td><pre>                allLocks[key] = lock</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#142_12"; return false;'>Parallelize.swift:142</td><td><pre>            allLocks[OpaquePointer(lockee)] = nil</pre></td></table></span></a></span> = [<span class='identifier' title='x86_64-apple-macos.swiftmodule'>OpaquePointer</span>: <span class='identifier' title='Parallelize.swift'><a name='112_39' href='Parallelize.swift.html#111_17'>SynchronizableLock</a></span>]()
<script> lineLink("0000000", 1574765803, "0113") </script><span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>private</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>var</span> <span class='identifier' title='usrString2'><a name='113_12' href='#' onclick='return expand(this);'>lockLock<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#127_19"; return false;'>Parallelize.swift:127</td><td><pre>        let lock = lockLock.synchronized { () -> SynchronizableLock in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#141_8"; return false;'>Parallelize.swift:141</td><td><pre>        lockLock.synchronized {</pre></td></table></span></a></span> = <span class='identifier' title='Parallelize.swift'><a name='113_23' href='Parallelize.swift.html#111_17'>SynchronizableLock</a></span>()
<script> lineLink("1752ae6", 1574694216, "0114") </script>
<script> lineLink("0000000", 1574765803, "0115") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>protocol</span> <span class='identifier' title='usrString2'><a name='115_9' href='#' onclick='return expand(this);'>Synchronizable<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#119_22"; return false;'>Parallelize.swift:119</td><td><pre>extension Dictionary: Synchronizable {}</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#120_17"; return false;'>Parallelize.swift:120</td><td><pre>extension Array: Synchronizable {}</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#121_15"; return false;'>Parallelize.swift:121</td><td><pre>extension Int: Synchronizable {}</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Parallelize.swift.html#123_10"; return false;'>Parallelize.swift:123</td><td><pre>extension Synchronizable {</pre></td></table></span></a></span> {
<script> lineLink("1752ae6", 1574694216, "0116") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>mutating</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='116_18' onclick='return expand(this);'>synchronized<span class='references'><table></table></span></a></span>&lt;<span class='identifier' title='Parallelize.swift'><a name='116_31'>T</a></span>>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>_</span> <span class='identifier' title='usrString2'><a name='116_36' onclick='return expand(this);'>closure<span class='references'><table></table></span></a></span>: (<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>inout</span> <span class='typeidentifier' title='success(Optional(SwiftLSPClient.TypeDefinitionResponse.locationArray([])))'>Self</span>) -> <span class='typeidentifier' title='Parallelize.swift'><a name='116_61' href='Parallelize.swift.html#116_31'>T</a></span>) -> <span class='typeidentifier' title='Parallelize.swift'><a name='116_67' href='Parallelize.swift.html#116_31'>T</a></span>
<script> lineLink("1752ae6", 1574694216, "0117") </script>}
<script> lineLink("1752ae6", 1574694216, "0118") </script>
<script> lineLink("0000000", 1574765803, "0119") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>extension</span> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Dictionary</span>: <span class='typeidentifier' title='Parallelize.swift'><a name='119_22' href='Parallelize.swift.html#115_9'>Synchronizable</a></span> {}
<script> lineLink("0000000", 1574765803, "0120") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>extension</span> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Array</span>: <span class='typeidentifier' title='Parallelize.swift'><a name='120_17' href='Parallelize.swift.html#115_9'>Synchronizable</a></span> {}
<script> lineLink("0000000", 1574765803, "0121") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>extension</span> <span class='typeidentifier' title='x86_64-apple-macos.swiftmodule'>Int</span>: <span class='typeidentifier' title='Parallelize.swift'><a name='121_15' href='Parallelize.swift.html#115_9'>Synchronizable</a></span> {}
<script> lineLink("1752ae6", 1574694216, "0122") </script>
<script> lineLink("0000000", 1574765803, "0123") </script><span class='keyword' title='source.lang.swift.syntaxtype.keyword'>extension</span> <span class='typeidentifier' title='Parallelize.swift'><a name='123_10' href='Parallelize.swift.html#115_9'>Synchronizable</a></span> {
<script> lineLink("1752ae6", 1574694216, "0124") </script>
<script> lineLink("1752ae6", 1574694216, "0125") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>public</span> <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>mutating</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='125_25' href='#' onclick='return expand(this);'>synchronized<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#22_27"; event.stopPropagation(); return false;'>Siteify.swift:22</td><td><pre>    return filenameForFile.synchronized { locked in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#141_27"; event.stopPropagation(); return false;'>Siteify.swift:141</td><td><pre>        return iconForType.synchronized { locked in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#195_38"; event.stopPropagation(); return false;'>Siteify.swift:195</td><td><pre>            for sym in packageSymbols.synchronized({$0})</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#331_56"; event.stopPropagation(); return false;'>Siteify.swift:331</td><td><pre>                                self.referencesFallback.synchronized({ locked in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#359_72"; event.stopPropagation(); return false;'>Siteify.swift:359</td><td><pre>                                                self.referencesFallback.synchronized {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="Siteify.swift.html#456_35"; event.stopPropagation(); return false;'>Siteify.swift:456</td><td><pre>                    packageSymbols.synchronized { locked in</pre></td></table></span></a></span>&lt;<span class='identifier' title='Parallelize.swift'><a name='125_38'>T</a></span>>(<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>_</span> <span class='identifier' title='usrString2'><a name='125_43' onclick='return expand(this);'>closure<span class='references'><table></table></span></a></span>: (<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>inout</span> <span class='typeidentifier' title='success(Optional(SwiftLSPClient.TypeDefinitionResponse.locationArray([])))'>Self</span>) -> <span class='typeidentifier' title='Parallelize.swift'><a name='125_68' href='Parallelize.swift.html#125_38'>T</a></span>) -> <span class='typeidentifier' title='Parallelize.swift'><a name='125_74' href='Parallelize.swift.html#125_38'>T</a></span> {
<script> lineLink("0000000", 1574765803, "0126") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='126_12'>lockee</a></span> = <span class='identifier' title='x86_64-apple-macos.swiftmodule'>UnsafeMutablePointer</span>(&amp;<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>self</span>)
<script> lineLink("0000000", 1574765803, "0127") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='127_12'>lock</a></span> = <span class='identifier' title='Parallelize.swift'><a name='127_19' href='Parallelize.swift.html#113_12'>lockLock</a></span>.<span class='identifier' title='Parallelize.swift'><a name='127_28' href='Parallelize.swift.html#97_9'>synchronized</a></span> { () -> <span class='typeidentifier' title='Parallelize.swift'><a name='127_49' href='Parallelize.swift.html#111_17'>SynchronizableLock</a></span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>in</span>
<script> lineLink("0000000", 1574765803, "0128") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='128_16'>key</a></span> = <span class='identifier' title='x86_64-apple-macos.swiftmodule'>OpaquePointer</span>(<span class='identifier' title='Parallelize.swift'><a name='128_36' href='Parallelize.swift.html#126_12'>lockee</a></span>)
<script> lineLink("0000000", 1574765803, "0129") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>var</span> <span class='identifier' title='Parallelize.swift'><a name='129_16'>lock</a></span> = <span class='identifier' title='Parallelize.swift'><a name='129_23' href='Parallelize.swift.html#112_12'>allLocks</a></span>[<span class='identifier' title='Parallelize.swift'><a name='129_32' href='Parallelize.swift.html#128_16'>key</a></span>]
<script> lineLink("0000000", 1574765803, "0130") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>if</span> <span class='identifier' title='Parallelize.swift'><a name='130_15' href='Parallelize.swift.html#129_16'>lock</a></span> == <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>nil</span> {
<script> lineLink("0000000", 1574765803, "0131") </script>                <span class='identifier' title='Parallelize.swift'><a name='131_16' href='Parallelize.swift.html#129_16'>lock</a></span> = <span class='identifier' title='Parallelize.swift'><a name='131_23' href='Parallelize.swift.html#111_17'>SynchronizableLock</a></span>()
<script> lineLink("0000000", 1574765803, "0132") </script>                <span class='identifier' title='Parallelize.swift'><a name='132_16' href='Parallelize.swift.html#112_12'>allLocks</a></span>[<span class='identifier' title='Parallelize.swift'><a name='132_25' href='Parallelize.swift.html#128_16'>key</a></span>] = <span class='identifier' title='Parallelize.swift'><a name='132_32' href='Parallelize.swift.html#129_16'>lock</a></span>
<script> lineLink("0000000", 1574765803, "0133") </script>            }
<script> lineLink("0000000", 1574765803, "0134") </script>            <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>return</span> <span class='identifier' title='Parallelize.swift'><a name='134_19' href='Parallelize.swift.html#129_16'>lock</a></span>!
<script> lineLink("0000000", 1574765803, "0135") </script>        }
<script> lineLink("0000000", 1574765803, "0136") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>return</span> <span class='identifier' title='Parallelize.swift'><a name='136_15' href='Parallelize.swift.html#127_12'>lock</a></span>.<span class='identifier' title='Parallelize.swift'><a name='136_20' href='Parallelize.swift.html#97_9'>synchronized</a></span> { <span class='identifier' title='Parallelize.swift'><a name='136_35' href='Parallelize.swift.html#125_43'>closure</a></span>(&amp;<span class='identifier' title='Parallelize.swift'><a name='136_44' href='Parallelize.swift.html#126_12'>lockee</a></span>.<span class='identifier' title='x86_64-apple-macos.swiftmodule'>pointee</span>) }
<script> lineLink("0000000", 1574765803, "0137") </script>    }
<script> lineLink("0000000", 1574765803, "0138") </script>
<script> lineLink("0000000", 1574765803, "0139") </script>    <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>public</span> <span class='builtin' title='source.lang.swift.syntaxtype.attribute.builtin'>mutating</span> <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>func</span> <span class='identifier' title='usrString2'><a name='139_25' onclick='return expand(this);'>desynchronize<span class='references'><table></table></span></a></span>() {
<script> lineLink("0000000", 1574765803, "0140") </script>        <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>let</span> <span class='identifier' title='Parallelize.swift'><a name='140_12'>lockee</a></span> = <span class='identifier' title='x86_64-apple-macos.swiftmodule'>UnsafeMutablePointer</span>(&amp;<span class='keyword' title='source.lang.swift.syntaxtype.keyword'>self</span>)
<script> lineLink("0000000", 1574765803, "0141") </script>        <span class='identifier' title='Parallelize.swift'><a name='141_8' href='Parallelize.swift.html#113_12'>lockLock</a></span>.<span class='identifier' title='Parallelize.swift'><a name='141_17' href='Parallelize.swift.html#105_9'>synchronized</a></span> {
<script> lineLink("0000000", 1574765803, "0142") </script>            <span class='identifier' title='Parallelize.swift'><a name='142_12' href='Parallelize.swift.html#112_12'>allLocks</a></span>[<span class='identifier' title='x86_64-apple-macos.swiftmodule'>OpaquePointer</span>(<span class='identifier' title='Parallelize.swift'><a name='142_35' href='Parallelize.swift.html#140_12'>lockee</a></span>)] = <span class='keyword' title='source.lang.swift.syntaxtype.keyword'>nil</span>
<script> lineLink("1752ae6", 1574694216, "0143") </script>        }
<script> lineLink("1752ae6", 1574694216, "0144") </script>    }
<script> lineLink("1752ae6", 1574694216, "0145") </script>}
<script> lineLink("0000000", 1574765803, "0146") </script>
<script> lineLink("0000000", 1574765803, "0147") </script><span class='comment' title='source.lang.swift.syntaxtype.comment'>//extension Synchronizable where Self: AnyObject {
<script> lineLink("0000000", 1574765803, "0148") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("0000000", 1574765803, "0149") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//    public mutating func synchronized&lt;T>(_ closure: (inout Self) -> T) -> T {
<script> lineLink("0000000", 1574765803, "0150") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        let lockee = Unmanaged.passUnretained(self).toOpaque()
<script> lineLink("0000000", 1574765803, "0151") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        let lock = lockLock.synchronized { () -> SynchronizableLock in
<script> lineLink("0000000", 1574765803, "0152") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//            let key = OpaquePointer(lockee)
<script> lineLink("0000000", 1574765803, "0153") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//            var lock = allLocks[key]
<script> lineLink("0000000", 1574765803, "0154") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//            if lock == nil {
<script> lineLink("0000000", 1574765803, "0155") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//                lock = SynchronizableLock()
<script> lineLink("0000000", 1574765803, "0156") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//                allLocks[key] = lock
<script> lineLink("0000000", 1574765803, "0157") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//            }
<script> lineLink("0000000", 1574765803, "0158") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//            return lock!
<script> lineLink("0000000", 1574765803, "0159") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        }
<script> lineLink("0000000", 1574765803, "0160") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        return lock.synchronized { closure(&amp;self) }
<script> lineLink("0000000", 1574765803, "0161") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//    }
<script> lineLink("0000000", 1574765803, "0162") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//
<script> lineLink("0000000", 1574765803, "0163") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//    public mutating func desynchronize() {
<script> lineLink("0000000", 1574765803, "0164") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        let lockee = Unmanaged.passUnretained(self).toOpaque()
<script> lineLink("0000000", 1574765803, "0165") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        lockLock.synchronized {
<script> lineLink("0000000", 1574765803, "0166") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//            allLocks[OpaquePointer(lockee)] = nil
<script> lineLink("0000000", 1574765803, "0167") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//        }
<script> lineLink("0000000", 1574765803, "0168") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//    }
<script> lineLink("0000000", 1574765803, "0169") </script></span><span class='comment' title='source.lang.swift.syntaxtype.comment'>//}
<a class=linenum name='L170'>0170</a>  </span>