<html><head>
    <meta charset="UTF-8">
    <title>.build/checkouts/SwiftLSPClient/SwiftLSPClient/JSONRPC/JSONRPC.swift</title>
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><h3>.build/checkouts/SwiftLSPClient/SwiftLSPClient/JSONRPC/JSONRPC.swift</h3><pre><span class=linenum>0001</span>    <span class='comment'>//
<span class=linenum>0002</span>    </span><span class='comment'>//  JSONRPC.swift
<span class=linenum>0003</span>    </span><span class='comment'>//  SwiftLSPClient
<span class=linenum>0004</span>    </span><span class='comment'>//
<span class=linenum>0005</span>    </span><span class='comment'>//  Created by Matt Massicotte on 2018-10-13.
<span class=linenum>0006</span>    </span><span class='comment'>//  Copyright Â© 2018 Matt Massicotte. All rights reserved.
<span class=linenum>0007</span>    </span><span class='comment'>//
<span class=linenum>0008</span>    </span>
<span class=linenum>0009</span>    <span class='keyword'>import</span> <span class='identifier'>Foundation</span>
<span class=linenum>0010</span>    
<span class=linenum>0011</span>    <span class='builtin'>public</span> <span class='keyword'>enum</span> <span class='identifier'><a name='11_12' href='#' title='usrString2' onclick='return expand(this);'>JSONId<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#57_19"; return false;'>JSONRPC.swift:57</td><td><pre>    public let id: JSONId</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#74_19"; return false;'>JSONRPC.swift:74</td><td><pre>    public let id: JSONId</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#80_19"; return false;'>JSONRPC.swift:80</td><td><pre>    public let id: JSONId?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#84_20"; return false;'>JSONRPC.swift:84</td><td><pre>    public init(id: JSONId, result: T) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#93_18"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#98_20"; return false;'>JSONRPC.swift:98</td><td><pre>    public init(id: JSONId, error: ResponseError) {</pre></td></table></span></a></span>: <span class='typeidentifier'>Codable</span>, <span class='typeidentifier'>Hashable</span> {
<span class=linenum>0012</span>        <span class='keyword'>case</span> <span class='identifier'><a name='12_9' href='#' title='usrString2' onclick='return expand(this);'>numericId<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#19_20"; return false;'>JSONRPC.swift:19</td><td><pre>            self = .numericId(value)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#32_14"; return false;'>JSONRPC.swift:32</td><td><pre>        case .numericId(let value):</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#93_25"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#55_30"; event.stopPropagation(); return false;'>ProtocolTransport.swift:55</td><td><pre>        let issuedId = JSONId.numericId(id)</pre></td></table></span></a></span>(<span class='typeidentifier'>Int</span>)
<span class=linenum>0013</span>        <span class='keyword'>case</span> <span class='identifier'><a name='13_9' href='#' title='usrString2' onclick='return expand(this);'>stringId<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#21_20"; return false;'>JSONRPC.swift:21</td><td><pre>            self = .stringId(value)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#34_14"; return false;'>JSONRPC.swift:34</td><td><pre>        case .stringId(let value):</pre></td></table></span></a></span>(<span class='typeidentifier'>String</span>)
<span class=linenum>0014</span>        
<span class=linenum>0015</span>        <span class='builtin'>public</span> <span class='keyword'>init</span>(<span class='identifier'><a name='15_16' href='JSONRPC.swift.html#15_11' title='usrString1'>from</a></span> <span class='identifier'><a name='15_21' title='usrString2' onclick='return expand(this);'>decoder<span class='references'><table></table></span></a></span>: <span class='typeidentifier'>Decoder</span>) <span class='keyword'>throws</span> {
<span class=linenum>0016</span>            <span class='keyword'>let</span> <span class='identifier'><a name='16_12' title='usrString3'>container</a></span> = <span class='keyword'>try</span> <span class='identifier'><a name='16_28' href='JSONRPC.swift.html#15_21' title='usrString1'>decoder</a></span>.<span class='identifier'>singleValueContainer</span>()
<span class=linenum>0017</span>            
<span class=linenum>0018</span>            <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'><a name='18_15' title='usrString3'>value</a></span> = <span class='keyword'>try</span>? <span class='identifier'><a name='18_28' href='JSONRPC.swift.html#16_12' title='usrString1'>container</a></span>.<span class='identifier'>decode</span>(<span class='identifier'>Int</span>.<span class='keyword'>self</span>) {
<span class=linenum>0019</span>                <span class='keyword'>self</span> = .<span class='identifier'><a name='19_20' href='JSONRPC.swift.html#12_9' title='usrString1'>numericId</a></span>(<span class='identifier'><a name='19_30' href='JSONRPC.swift.html#18_15' title='usrString1'>value</a></span>)
<span class=linenum>0020</span>            } <span class='keyword'>else</span> <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'><a name='20_22' title='usrString3'>value</a></span> = <span class='keyword'>try</span>? <span class='identifier'><a name='20_35' href='JSONRPC.swift.html#16_12' title='usrString1'>container</a></span>.<span class='identifier'>decode</span>(<span class='identifier'>String</span>.<span class='keyword'>self</span>) {
<span class=linenum>0021</span>                <span class='keyword'>self</span> = .<span class='identifier'><a name='21_20' href='JSONRPC.swift.html#13_9' title='usrString1'>stringId</a></span>(<span class='identifier'><a name='21_29' href='JSONRPC.swift.html#20_22' title='usrString1'>value</a></span>)
<span class=linenum>0022</span>            } <span class='keyword'>else</span> {
<span class=linenum>0023</span>                <span class='keyword'>let</span> <span class='identifier'><a name='23_16' title='usrString3'>ctx</a></span> = <span class='identifier'>DecodingError</span>.<span class='identifier'>Context</span>(<span class='identifier'>codingPath</span>: <span class='identifier'><a name='23_56' href='JSONRPC.swift.html#16_12' title='usrString1'>container</a></span>.<span class='identifier'>codingPath</span>, <span class='identifier'>debugDescription</span>: <span class='string'>"Unknown JSONId Type"</span>)
<span class=linenum>0024</span>                <span class='keyword'>throw</span> <span class='identifier'>DecodingError</span>.<span class='identifier'>typeMismatch</span>(<span class='identifier'><a name='24_45' href='JSONValue.swift.html#11_12' title='usrString1'>JSONValue</a></span>.<span class='keyword'>self</span>, <span class='identifier'><a name='24_61' href='JSONRPC.swift.html#23_16' title='usrString1'>ctx</a></span>)
<span class=linenum>0025</span>            }
<span class=linenum>0026</span>        }
<span class=linenum>0027</span>        
<span class=linenum>0028</span>        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='28_16' title='usrString2' onclick='return expand(this);'>encode<span class='references'><table></table></span></a></span>(<span class='identifier'><a name='28_23' href='JSONRPC.swift.html#28_16' title='usrString1'>to</a></span> <span class='identifier'><a name='28_26' title='usrString2' onclick='return expand(this);'>encoder<span class='references'><table></table></span></a></span>: <span class='typeidentifier'>Encoder</span>) <span class='keyword'>throws</span> {
<span class=linenum>0029</span>            <span class='keyword'>var</span> <span class='identifier'><a name='29_12' title='usrString3'>container</a></span> = <span class='identifier'><a name='29_24' href='JSONRPC.swift.html#28_26' title='usrString1'>encoder</a></span>.<span class='identifier'>singleValueContainer</span>()
<span class=linenum>0030</span>            
<span class=linenum>0031</span>            <span class='keyword'>switch</span> <span class='keyword'>self</span> {
<span class=linenum>0032</span>            <span class='keyword'>case</span> .<span class='identifier'><a name='32_14' href='JSONRPC.swift.html#12_9' title='usrString1'>numericId</a></span>(<span class='keyword'>let</span> <span class='identifier'><a name='32_28' title='usrString3'>value</a></span>):
<span class=linenum>0033</span>                <span class='keyword'>try</span> <span class='identifier'><a name='33_16' href='JSONRPC.swift.html#29_12' title='usrString1'>container</a></span>.<span class='identifier'>encode</span>(<span class='identifier'><a name='33_33' href='JSONRPC.swift.html#32_28' title='usrString1'>value</a></span>)
<span class=linenum>0034</span>            <span class='keyword'>case</span> .<span class='identifier'><a name='34_14' href='JSONRPC.swift.html#13_9' title='usrString1'>stringId</a></span>(<span class='keyword'>let</span> <span class='identifier'><a name='34_27' title='usrString3'>value</a></span>):
<span class=linenum>0035</span>                <span class='keyword'>try</span> <span class='identifier'><a name='35_16' href='JSONRPC.swift.html#29_12' title='usrString1'>container</a></span>.<span class='identifier'>encode</span>(<span class='identifier'><a name='35_33' href='JSONRPC.swift.html#34_27' title='usrString1'>value</a></span>)
<span class=linenum>0036</span>            }
<span class=linenum>0037</span>        }
<span class=linenum>0038</span>    }
<span class=linenum>0039</span>    
<span class=linenum>0040</span>    <span class='builtin'>public</span> <span class='keyword'>enum</span> <span class='identifier'><a name='40_12' title='usrString2' onclick='return expand(this);'>ProtocolErrorCode<span class='references'><table></table></span></a></span>: <span class='typeidentifier'>Int</span>, <span class='typeidentifier'>Codable</span> {
<span class=linenum>0041</span>        <span class='keyword'>case</span> <span class='identifier'><a name='41_9' title='usrString2' onclick='return expand(this);'>parseError<span class='references'><table></table></span></a></span> = <span class='number'>-32700</span>
<span class=linenum>0042</span>        <span class='keyword'>case</span> <span class='identifier'><a name='42_9' title='usrString2' onclick='return expand(this);'>invalidRequest<span class='references'><table></table></span></a></span> = <span class='number'>-32600</span>
<span class=linenum>0043</span>        <span class='keyword'>case</span> <span class='identifier'><a name='43_9' title='usrString2' onclick='return expand(this);'>methodNotFound<span class='references'><table></table></span></a></span> = <span class='number'>-32601</span>
<span class=linenum>0044</span>        <span class='keyword'>case</span> <span class='identifier'><a name='44_9' title='usrString2' onclick='return expand(this);'>invalidParams<span class='references'><table></table></span></a></span> = <span class='number'>-32602</span>
<span class=linenum>0045</span>        <span class='keyword'>case</span> <span class='identifier'><a name='45_9' title='usrString2' onclick='return expand(this);'>internalError<span class='references'><table></table></span></a></span> = <span class='number'>-32603</span>
<span class=linenum>0046</span>        <span class='keyword'>case</span> <span class='identifier'><a name='46_9' title='usrString2' onclick='return expand(this);'>serverErrorStart<span class='references'><table></table></span></a></span> = <span class='number'>-32099</span>
<span class=linenum>0047</span>        <span class='keyword'>case</span> <span class='identifier'><a name='47_9' title='usrString2' onclick='return expand(this);'>serverErrorEnd<span class='references'><table></table></span></a></span> = <span class='number'>-32000</span>
<span class=linenum>0048</span>        <span class='keyword'>case</span> <span class='identifier'><a name='48_9' title='usrString2' onclick='return expand(this);'>serverNotInitialized<span class='references'><table></table></span></a></span> = <span class='number'>-32002</span>
<span class=linenum>0049</span>        <span class='keyword'>case</span> <span class='identifier'><a name='49_9' title='usrString2' onclick='return expand(this);'>unknownErrorCode<span class='references'><table></table></span></a></span> = <span class='number'>-32001</span>
<span class=linenum>0050</span>        
<span class=linenum>0051</span>        <span class='keyword'>case</span> <span class='identifier'><a name='51_9' title='usrString2' onclick='return expand(this);'>requestCancelled<span class='references'><table></table></span></a></span> = <span class='number'>-32800</span>
<span class=linenum>0052</span>    }
<span class=linenum>0053</span>    
<span class=linenum>0054</span>    <span class='comment'>// MARK: Requests, Responses, and Errors
<span class=linenum>0055</span>    </span><span class='builtin'>public</span> <span class='keyword'>struct</span> <span class='identifier'><a name='55_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCRequest<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#66_29"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>&lt;<span class='identifier'><a name='55_29' href='#' title='usrString2' onclick='return expand(this);'>T<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#55_47"; return false;'>JSONRPC.swift:55</td><td><pre>public struct JSONRPCRequest&lt;T>: Codable where T: Codable {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#59_23"; return false;'>JSONRPC.swift:59</td><td><pre>    public let params: T?</pre></td></table></span></a></span>>: <span class='typeidentifier'>Codable</span> <span class='keyword'>where</span> <span class='typeidentifier'><a name='55_47' href='JSONRPC.swift.html#55_29' title='usrString1'>T</a></span>: <span class='typeidentifier'>Codable</span> {
<span class=linenum>0056</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='56_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span> = <span class='string'>"2.0"</span>
<span class=linenum>0057</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='57_15' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#66_44"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='57_19' href='JSONRPC.swift.html#11_12' title='usrString1'>JSONId</a></span>
<span class=linenum>0058</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='58_15' href='#' title='usrString2' onclick='return expand(this);'>method<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#66_58"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>: <span class='typeidentifier'>String</span>
<span class=linenum>0059</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='59_15' href='#' title='usrString2' onclick='return expand(this);'>params<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#66_74"; event.stopPropagation(); return false;'>ProtocolTransport.swift:66</td><td><pre>            let rpcRequest = JSONRPCRequest(id: issuedId, method: method, params: request)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='59_23' href='JSONRPC.swift.html#55_29' title='usrString1'>T</a></span>?
<span class=linenum>0060</span>    }
<span class=linenum>0061</span>    
<span class=linenum>0062</span>    <span class='builtin'>public</span> <span class='keyword'>struct</span> <span class='identifier'><a name='62_14' href='#' title='usrString2' onclick='return expand(this);'>ResponseError<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#75_22"; return false;'>JSONRPC.swift:75</td><td><pre>    public let error: ResponseError?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#82_22"; return false;'>JSONRPC.swift:82</td><td><pre>    public let error: ResponseError?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#98_35"; return false;'>JSONRPC.swift:98</td><td><pre>    public init(id: JSONId, error: ResponseError) {</pre></td></table></span></a></span>: <span class='typeidentifier'>Codable</span> {
<span class=linenum>0063</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='63_15' href='#' title='usrString2' onclick='return expand(this);'>code<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#68_53"; return false;'>JSONRPC.swift:68</td><td><pre>        return LanguageServerError.serverError(code: code, message: message, data: nil)</pre></td></table></span></a></span>: <span class='typeidentifier'>Int</span>
<span class=linenum>0064</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='64_15' href='#' title='usrString2' onclick='return expand(this);'>message<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#68_68"; return false;'>JSONRPC.swift:68</td><td><pre>        return LanguageServerError.serverError(code: code, message: message, data: nil)</pre></td></table></span></a></span>: <span class='typeidentifier'>String</span>
<span class=linenum>0065</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='65_15' title='usrString2' onclick='return expand(this);'>data<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='65_21' href='JSONValue.swift.html#11_12' title='usrString1'>JSONValue</a></span>
<span class=linenum>0066</span>    
<span class=linenum>0067</span>        <span class='builtin'>public</span> <span class='keyword'>var</span> <span class='identifier'><a name='67_15' href='#' title='usrString2' onclick='return expand(this);'>languageServerError<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.swift.html#93_38"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:93</td><td><pre>            block(.failure(errorParam.languageServerError))</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='67_36' href='LanguageServer.swift.html#11_12' title='usrString1'>LanguageServerError</a></span> {
<span class=linenum>0068</span>            <span class='keyword'>return</span> <span class='identifier'><a name='68_15' href='LanguageServer.swift.html#11_12' title='usrString1'>LanguageServerError</a></span>.<span class='identifier'><a name='68_35' href='LanguageServer.swift.html#21_9' title='usrString1'>serverError</a></span>(<span class='identifier'><a name='68_47' href='LanguageServer.swift.html#21_9' title='usrString1'>code</a></span>: <span class='identifier'><a name='68_53' href='JSONRPC.swift.html#63_15' title='usrString1'>code</a></span>, <span class='identifier'><a name='68_59' href='LanguageServer.swift.html#21_9' title='usrString1'>message</a></span>: <span class='identifier'><a name='68_68' href='JSONRPC.swift.html#64_15' title='usrString1'>message</a></span>, <span class='identifier'><a name='68_77' href='LanguageServer.swift.html#21_9' title='usrString1'>data</a></span>: <span class='keyword'>nil</span>)
<span class=linenum>0069</span>        }
<span class=linenum>0070</span>    }
<span class=linenum>0071</span>    
<span class=linenum>0072</span>    <span class='builtin'>public</span> <span class='keyword'>struct</span> <span class='identifier'><a name='72_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCResponse<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#124_54"; event.stopPropagation(); return false;'>ProtocolTransport.swift:124</td><td><pre>            if let message = try? self.decoder.decode(JSONRPCResponse.self, from: data) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#138_44"; event.stopPropagation(); return false;'>ProtocolTransport.swift:138</td><td><pre>    private func dispatchMessage(_ message: JSONRPCResponse, originalData data: Data) {</pre></td></table></span></a></span>: <span class='typeidentifier'>Codable</span> {
<span class=linenum>0073</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='73_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span>: <span class='typeidentifier'>String</span>
<span class=linenum>0074</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='74_15' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#143_49"; event.stopPropagation(); return false;'>ProtocolTransport.swift:143</td><td><pre>        guard let responder = responders[message.id] else {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#145_56"; event.stopPropagation(); return false;'>ProtocolTransport.swift:145</td><td><pre>            print("not matching responder for \(message.id), dropping message")</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#152_47"; event.stopPropagation(); return false;'>ProtocolTransport.swift:152</td><td><pre>        responders.removeValue(forKey: message.id)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='74_19' href='JSONRPC.swift.html#11_12' title='usrString1'>JSONId</a></span>
<span class=linenum>0075</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='75_15' title='usrString2' onclick='return expand(this);'>error<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='75_22' href='JSONRPC.swift.html#62_14' title='usrString1'>ResponseError</a></span>?
<span class=linenum>0076</span>    }
<span class=linenum>0077</span>    
<span class=linenum>0078</span>    <span class='builtin'>public</span> <span class='keyword'>struct</span> <span class='identifier'><a name='78_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCResultResponse<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#24_57"; event.stopPropagation(); return false;'>ProtocolTransport.swift:24</td><td><pre>    public typealias ResponseResult&lt;T: Codable> = Result&lt;JSONRPCResultResponse&lt;T>, ProtocolTransportError></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#92_61"; event.stopPropagation(); return false;'>ProtocolTransport.swift:92</td><td><pre>                    let jsonResult = try self.decoder.decode(JSONRPCResultResponse&lt;T>.self, from: data)</pre></td></table></span></a></span>&lt;<span class='identifier'><a name='78_36' href='#' title='usrString2' onclick='return expand(this);'>T<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#78_54"; return false;'>JSONRPC.swift:78</td><td><pre>public struct JSONRPCResultResponse&lt;T>: Codable where T: Codable {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#81_23"; return false;'>JSONRPC.swift:81</td><td><pre>    public let result: T?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#84_36"; return false;'>JSONRPC.swift:84</td><td><pre>    public init(id: JSONId, result: T) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#91_33"; return false;'>JSONRPC.swift:91</td><td><pre>    public init(id: Int, result: T) {</pre></td></table></span></a></span>>: <span class='typeidentifier'>Codable</span> <span class='keyword'>where</span> <span class='typeidentifier'><a name='78_54' href='JSONRPC.swift.html#78_36' title='usrString1'>T</a></span>: <span class='typeidentifier'>Codable</span> {
<span class=linenum>0079</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='79_15' href='#' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#85_13"; return false;'>JSONRPC.swift:85</td><td><pre>        self.jsonrpc = "2.0"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#92_13"; return false;'>JSONRPC.swift:92</td><td><pre>        self.jsonrpc = "2.0"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#99_13"; return false;'>JSONRPC.swift:99</td><td><pre>        self.jsonrpc = "2.0"</pre></td></table></span></a></span>: <span class='typeidentifier'>String</span>
<span class=linenum>0080</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='80_15' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#86_13"; return false;'>JSONRPC.swift:86</td><td><pre>        self.id = id</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#93_13"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#100_13"; return false;'>JSONRPC.swift:100</td><td><pre>        self.id = id</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='80_19' href='JSONRPC.swift.html#11_12' title='usrString1'>JSONId</a></span>?
<span class=linenum>0081</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='81_15' href='#' title='usrString2' onclick='return expand(this);'>result<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#87_13"; return false;'>JSONRPC.swift:87</td><td><pre>        self.result = result</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#94_13"; return false;'>JSONRPC.swift:94</td><td><pre>        self.result = result</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#101_13"; return false;'>JSONRPC.swift:101</td><td><pre>        self.result = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.swift.html#90_47"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:90</td><td><pre>        if let responseParam = responseMessage.result {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='81_23' href='JSONRPC.swift.html#78_36' title='usrString1'>T</a></span>?
<span class=linenum>0082</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='82_15' href='#' title='usrString2' onclick='return expand(this);'>error<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#88_13"; return false;'>JSONRPC.swift:88</td><td><pre>        self.error = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#95_13"; return false;'>JSONRPC.swift:95</td><td><pre>        self.error = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#102_13"; return false;'>JSONRPC.swift:102</td><td><pre>        self.error = error</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.swift.html#92_51"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:92</td><td><pre>        } else if let errorParam = responseMessage.error {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='82_22' href='JSONRPC.swift.html#62_14' title='usrString1'>ResponseError</a></span>?
<span class=linenum>0083</span>    
<span class=linenum>0084</span>        <span class='builtin'>public</span> <span class='keyword'>init</span>(<span class='identifier'><a name='84_16' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#86_18"; return false;'>JSONRPC.swift:86</td><td><pre>        self.id = id</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='84_20' href='JSONRPC.swift.html#11_12' title='usrString1'>JSONId</a></span>, <span class='identifier'><a name='84_28' href='#' title='usrString2' onclick='return expand(this);'>result<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#87_22"; return false;'>JSONRPC.swift:87</td><td><pre>        self.result = result</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='84_36' href='JSONRPC.swift.html#78_36' title='usrString1'>T</a></span>) {
<span class=linenum>0085</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='85_13' href='JSONRPC.swift.html#79_15' title='usrString1'>jsonrpc</a></span> = <span class='string'>"2.0"</span>
<span class=linenum>0086</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='86_13' href='JSONRPC.swift.html#80_15' title='usrString1'>id</a></span> = <span class='identifier'><a name='86_18' href='JSONRPC.swift.html#84_16' title='usrString1'>id</a></span>
<span class=linenum>0087</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='87_13' href='JSONRPC.swift.html#81_15' title='usrString1'>result</a></span> = <span class='identifier'><a name='87_22' href='JSONRPC.swift.html#84_28' title='usrString1'>result</a></span>
<span class=linenum>0088</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='88_13' href='JSONRPC.swift.html#82_15' title='usrString1'>error</a></span> = <span class='keyword'>nil</span>
<span class=linenum>0089</span>        }
<span class=linenum>0090</span>    
<span class=linenum>0091</span>        <span class='builtin'>public</span> <span class='keyword'>init</span>(<span class='identifier'><a name='91_16' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#93_35"; return false;'>JSONRPC.swift:93</td><td><pre>        self.id = JSONId.numericId(id)</pre></td></table></span></a></span>: <span class='typeidentifier'>Int</span>, <span class='identifier'><a name='91_25' href='#' title='usrString2' onclick='return expand(this);'>result<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#94_22"; return false;'>JSONRPC.swift:94</td><td><pre>        self.result = result</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='91_33' href='JSONRPC.swift.html#78_36' title='usrString1'>T</a></span>) {
<span class=linenum>0092</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='92_13' href='JSONRPC.swift.html#79_15' title='usrString1'>jsonrpc</a></span> = <span class='string'>"2.0"</span>
<span class=linenum>0093</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='93_13' href='JSONRPC.swift.html#80_15' title='usrString1'>id</a></span> = <span class='identifier'><a name='93_18' href='JSONRPC.swift.html#11_12' title='usrString1'>JSONId</a></span>.<span class='identifier'><a name='93_25' href='JSONRPC.swift.html#12_9' title='usrString1'>numericId</a></span>(<span class='identifier'><a name='93_35' href='JSONRPC.swift.html#91_16' title='usrString1'>id</a></span>)
<span class=linenum>0094</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='94_13' href='JSONRPC.swift.html#81_15' title='usrString1'>result</a></span> = <span class='identifier'><a name='94_22' href='JSONRPC.swift.html#91_25' title='usrString1'>result</a></span>
<span class=linenum>0095</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='95_13' href='JSONRPC.swift.html#82_15' title='usrString1'>error</a></span> = <span class='keyword'>nil</span>
<span class=linenum>0096</span>        }
<span class=linenum>0097</span>    
<span class=linenum>0098</span>        <span class='builtin'>public</span> <span class='keyword'>init</span>(<span class='identifier'><a name='98_16' href='#' title='usrString2' onclick='return expand(this);'>id<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#100_18"; return false;'>JSONRPC.swift:100</td><td><pre>        self.id = id</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='98_20' href='JSONRPC.swift.html#11_12' title='usrString1'>JSONId</a></span>, <span class='identifier'><a name='98_28' href='#' title='usrString2' onclick='return expand(this);'>error<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#102_21"; return false;'>JSONRPC.swift:102</td><td><pre>        self.error = error</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='98_35' href='JSONRPC.swift.html#62_14' title='usrString1'>ResponseError</a></span>) {
<span class=linenum>0099</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='99_13' href='JSONRPC.swift.html#79_15' title='usrString1'>jsonrpc</a></span> = <span class='string'>"2.0"</span>
<span class=linenum>0100</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='100_13' href='JSONRPC.swift.html#80_15' title='usrString1'>id</a></span> = <span class='identifier'><a name='100_18' href='JSONRPC.swift.html#98_16' title='usrString1'>id</a></span>
<span class=linenum>0101</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='101_13' href='JSONRPC.swift.html#81_15' title='usrString1'>result</a></span> = <span class='keyword'>nil</span>
<span class=linenum>0102</span>            <span class='keyword'>self</span>.<span class='identifier'><a name='102_13' href='JSONRPC.swift.html#82_15' title='usrString1'>error</a></span> = <span class='identifier'><a name='102_21' href='JSONRPC.swift.html#98_28' title='usrString1'>error</a></span>
<span class=linenum>0103</span>        }
<span class=linenum>0104</span>    }
<span class=linenum>0105</span>    
<span class=linenum>0106</span>    <span class='builtin'>public</span> <span class='keyword'>struct</span> <span class='identifier'><a name='106_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCNotification<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#129_59"; event.stopPropagation(); return false;'>ProtocolTransport.swift:129</td><td><pre>            if let notification = try? self.decoder.decode(JSONRPCNotification.self, from: data) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#155_54"; event.stopPropagation(); return false;'>ProtocolTransport.swift:155</td><td><pre>    private func dispatchNotification(_ notification: JSONRPCNotification, originalData data: Data) {</pre></td></table></span></a></span>: <span class='typeidentifier'>Codable</span> {
<span class=linenum>0107</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='107_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span> = <span class='string'>"2.0"</span>
<span class=linenum>0108</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='108_15' href='#' title='usrString2' onclick='return expand(this);'>method<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#156_34"; event.stopPropagation(); return false;'>ProtocolTransport.swift:156</td><td><pre>        let method = notification.method</pre></td></table></span></a></span>: <span class='typeidentifier'>String</span>
<span class=linenum>0109</span>    }
<span class=linenum>0110</span>    
<span class=linenum>0111</span>    <span class='builtin'>public</span> <span class='keyword'>struct</span> <span class='identifier'><a name='111_14' href='#' title='usrString2' onclick='return expand(this);'>JSONRPCNotificationParams<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.swift.html#67_29"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:67</td><td><pre>            let resultType = JSONRPCNotificationParams&lt;T>.self</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#103_27"; event.stopPropagation(); return false;'>ProtocolTransport.swift:103</td><td><pre>        let notification = JSONRPCNotificationParams(method: method, params: params)</pre></td></table></span></a></span>&lt;<span class='identifier'><a name='111_40' href='#' title='usrString2' onclick='return expand(this);'>T<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#111_58"; return false;'>JSONRPC.swift:111</td><td><pre>public struct JSONRPCNotificationParams&lt;T>: Codable where T: Codable {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPC.swift.html#114_23"; return false;'>JSONRPC.swift:114</td><td><pre>    public let params: T?</pre></td></table></span></a></span>>: <span class='typeidentifier'>Codable</span> <span class='keyword'>where</span> <span class='typeidentifier'><a name='111_58' href='JSONRPC.swift.html#111_40' title='usrString1'>T</a></span>: <span class='typeidentifier'>Codable</span> {
<span class=linenum>0112</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='112_15' title='usrString2' onclick='return expand(this);'>jsonrpc<span class='references'><table></table></span></a></span> = <span class='string'>"2.0"</span>
<span class=linenum>0113</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='113_15' href='#' title='usrString2' onclick='return expand(this);'>method<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#103_53"; event.stopPropagation(); return false;'>ProtocolTransport.swift:103</td><td><pre>        let notification = JSONRPCNotificationParams(method: method, params: params)</pre></td></table></span></a></span>: <span class='typeidentifier'>String</span>
<span class=linenum>0114</span>        <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='114_15' href='#' title='usrString2' onclick='return expand(this);'>params<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="JSONRPCLanguageServer.swift.html#70_38"; event.stopPropagation(); return false;'>JSONRPCLanguageServer.swift:70</td><td><pre>            guard let params = result.params else {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="ProtocolTransport.swift.html#103_69"; event.stopPropagation(); return false;'>ProtocolTransport.swift:103</td><td><pre>        let notification = JSONRPCNotificationParams(method: method, params: params)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='114_23' href='JSONRPC.swift.html#111_40' title='usrString1'>T</a></span>?
<span class=linenum>0115</span>    }
<span class=linenum>0116</span>    