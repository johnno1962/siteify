<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>0001    <span class='comment'><a name='1_0'>//
0002    </a></span><span class='comment'><a name='2_0'>//  StdioDataTransport.swift
0003    </a></span><span class='comment'><a name='3_0'>//  SwiftLSPClient
0004    </a></span><span class='comment'><a name='4_0'>//
0005    </a></span><span class='comment'><a name='5_0'>//  Created by Matt Massicotte on 2018-10-15.
0006    </a></span><span class='comment'><a name='6_0'>//  Copyright Â© 2018 Chime Systems. All rights reserved.
0007    </a></span><span class='comment'><a name='7_0'>//
0008    </a></span>
0009    <span class='keyword'><a name='9_0'>import</a></span> <span class='identifier'><a name='9_7'>Foundation</a></span>
0010    
0011    <span class='builtin'><a name='11_0'>public</a></span> <span class='keyword'><a name='11_7'>class</a></span> <span class='identifier'><a name='11_13' href='#' title='usrString2' onclick='return expand(this);'>StdioDataTransport<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="LanguageServerProcessHost.html#22_27"; event.stopPropagation(); return false;'>LanguageServerProcessHost.swift:22</td><td><pre>    private let transport: StdioDataTransport</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="LanguageServerProcessHost.html#39_25"; event.stopPropagation(); return false;'>LanguageServerProcessHost.swift:39</td><td><pre>        self.transport = StdioDataTransport()</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='11_33'>DataTransport</a></span> {
0012        <span class='builtin'><a name='12_4'>public</a></span> <span class='keyword'><a name='12_11'>let</a></span> <span class='identifier'><a name='12_15' href='#' title='usrString2' onclick='return expand(this);'>stdinPipe<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#20_13"; return false;'>StdioDataTransport.swift:20</td><td><pre>        self.stdinPipe = Pipe()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#35_30"; return false;'>StdioDataTransport.swift:35</td><td><pre>        let fileHandle = self.stdinPipe.fileHandleForWriting</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#56_37"; return false;'>StdioDataTransport.swift:56</td><td><pre>            [stdoutPipe, stderrPipe, stdinPipe].forEach { (pipe) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="LanguageServerProcessHost.html#43_42"; event.stopPropagation(); return false;'>LanguageServerProcessHost.swift:43</td><td><pre>        process.standardInput = transport.stdinPipe</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='12_26'>Pipe</a></span>
0013        <span class='builtin'><a name='13_4'>public</a></span> <span class='keyword'><a name='13_11'>let</a></span> <span class='identifier'><a name='13_15' href='#' title='usrString2' onclick='return expand(this);'>stdoutPipe<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#21_13"; return false;'>StdioDataTransport.swift:21</td><td><pre>        self.stdoutPipe = Pipe()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#56_13"; return false;'>StdioDataTransport.swift:56</td><td><pre>            [stdoutPipe, stderrPipe, stdinPipe].forEach { (pipe) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#64_8"; return false;'>StdioDataTransport.swift:64</td><td><pre>        stdoutPipe.fileHandleForReading.readabilityHandler = { [unowned self] (handle) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="LanguageServerProcessHost.html#44_43"; event.stopPropagation(); return false;'>LanguageServerProcessHost.swift:44</td><td><pre>        process.standardOutput = transport.stdoutPipe</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='13_27'>Pipe</a></span>
0014        <span class='builtin'><a name='14_4'>public</a></span> <span class='keyword'><a name='14_11'>let</a></span> <span class='identifier'><a name='14_15' href='#' title='usrString2' onclick='return expand(this);'>stderrPipe<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#22_13"; return false;'>StdioDataTransport.swift:22</td><td><pre>        self.stderrPipe = Pipe()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#56_25"; return false;'>StdioDataTransport.swift:56</td><td><pre>            [stdoutPipe, stderrPipe, stdinPipe].forEach { (pipe) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#74_8"; return false;'>StdioDataTransport.swift:74</td><td><pre>        stderrPipe.fileHandleForReading.readabilityHandler = { [unowned self] (handle) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="LanguageServerProcessHost.html#45_42"; event.stopPropagation(); return false;'>LanguageServerProcessHost.swift:45</td><td><pre>        process.standardError = transport.stderrPipe</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='14_27'>Pipe</a></span>
0015        <span class='keyword'><a name='15_4'>var</a></span> <span class='identifier'><a name='15_8' href='#' title='usrString2' onclick='return expand(this);'>readHandler<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#23_13"; return false;'>StdioDataTransport.swift:23</td><td><pre>        self.readHandler = nil</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#44_17"; return false;'>StdioDataTransport.swift:44</td><td><pre>            self.readHandler = handler</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#91_17"; return false;'>StdioDataTransport.swift:91</td><td><pre>            self.readHandler?(data)</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='15_21'>ReadHandler</a></span>?
0016        <span class='builtin'><a name='16_4'>private</a></span> <span class='keyword'><a name='16_12'>var</a></span> <span class='identifier'><a name='16_16' href='#' title='usrString2' onclick='return expand(this);'>closed<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#24_13"; return false;'>StdioDataTransport.swift:24</td><td><pre>        self.closed = false</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#31_11"; return false;'>StdioDataTransport.swift:31</td><td><pre>        if closed {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#50_20"; return false;'>StdioDataTransport.swift:50</td><td><pre>            if self.closed {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#54_17"; return false;'>StdioDataTransport.swift:54</td><td><pre>            self.closed = true</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#87_20"; return false;'>StdioDataTransport.swift:87</td><td><pre>            if self.closed {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#97_20"; return false;'>StdioDataTransport.swift:97</td><td><pre>            if self.closed {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='16_24'>Bool</a></span>
0017        <span class='builtin'><a name='17_4'>private</a></span> <span class='keyword'><a name='17_12'>var</a></span> <span class='identifier'><a name='17_16' href='#' title='usrString2' onclick='return expand(this);'>queue<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#25_13"; return false;'>StdioDataTransport.swift:25</td><td><pre>        self.queue = DispatchQueue(label: "com.chimehq.SwiftLSPClient.StdioDataTransport")</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#37_13"; return false;'>StdioDataTransport.swift:37</td><td><pre>        self.queue.async {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#43_8"; return false;'>StdioDataTransport.swift:43</td><td><pre>        queue.sync { [unowned self] in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#49_8"; return false;'>StdioDataTransport.swift:49</td><td><pre>        queue.sync {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#86_8"; return false;'>StdioDataTransport.swift:86</td><td><pre>        queue.async { [unowned self] in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#96_8"; return false;'>StdioDataTransport.swift:96</td><td><pre>        queue.async { [unowned self] in</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='17_23'>DispatchQueue</a></span>
0018        
0019        <span class='builtin'><a name='19_4'>public</a></span> <span class='keyword'><a name='19_11'>init</a></span>() {
0020            <span class='keyword'><a name='20_8'>self</a></span>.<span class='identifier'><a name='20_13' href='StdioDataTransport.html#12_15' title='usrString1'>stdinPipe</a></span> = <span class='identifier'><a name='20_25'>Pipe</a></span>()
0021            <span class='keyword'><a name='21_8'>self</a></span>.<span class='identifier'><a name='21_13' href='StdioDataTransport.html#13_15' title='usrString1'>stdoutPipe</a></span> = <span class='identifier'><a name='21_26'>Pipe</a></span>()
0022            <span class='keyword'><a name='22_8'>self</a></span>.<span class='identifier'><a name='22_13' href='StdioDataTransport.html#14_15' title='usrString1'>stderrPipe</a></span> = <span class='identifier'><a name='22_26'>Pipe</a></span>()
0023            <span class='keyword'><a name='23_8'>self</a></span>.<span class='identifier'><a name='23_13' href='StdioDataTransport.html#15_8' title='usrString1'>readHandler</a></span> = <span class='keyword'><a name='23_27'>nil</a></span>
0024            <span class='keyword'><a name='24_8'>self</a></span>.<span class='identifier'><a name='24_13' href='StdioDataTransport.html#16_16' title='usrString1'>closed</a></span> = <span class='keyword'><a name='24_22'>false</a></span>
0025            <span class='keyword'><a name='25_8'>self</a></span>.<span class='identifier'><a name='25_13' href='StdioDataTransport.html#17_16' title='usrString1'>queue</a></span> = <span class='identifier'><a name='25_21'>DispatchQueue</a></span>(<span class='identifier'><a name='25_35'>label</a></span>: <span class='string'><a name='25_42'>"com.chimehq.SwiftLSPClient.StdioDataTransport"</a></span>)
0026    
0027            <span class='identifier'><a name='27_8' href='StdioDataTransport.html#63_17' title='usrString1'>setupFileHandleHandlers</a></span>()
0028        }
0029        
0030        <span class='builtin'><a name='30_4'>public</a></span> <span class='keyword'><a name='30_11'>func</a></span> <span class='identifier'><a name='30_16' title='usrString2' onclick='return expand(this);'>write<span class='references'><table></table></span></a></span>(<span class='keyword'><a name='30_22'>_</a></span> <span class='identifier'><a name='30_24' title='usrString2' onclick='return expand(this);'>data<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='30_30'>Data</a></span>) {
0031            <span class='keyword'><a name='31_8'>if</a></span> <span class='identifier'><a name='31_11' href='StdioDataTransport.html#16_16' title='usrString1'>closed</a></span> {
0032                <span class='keyword'><a name='32_12'>return</a></span>
0033            }
0034    
0035            <span class='keyword'><a name='35_8'>let</a></span> <span class='identifier'><a name='35_12' title='usrString3'>fileHandle</a></span> = <span class='keyword'><a name='35_25'>self</a></span>.<span class='identifier'><a name='35_30' href='StdioDataTransport.html#12_15' title='usrString1'>stdinPipe</a></span>.<span class='identifier'><a name='35_40'>fileHandleForWriting</a></span>
0036    
0037            <span class='keyword'><a name='37_8'>self</a></span>.<span class='identifier'><a name='37_13' href='StdioDataTransport.html#17_16' title='usrString1'>queue</a></span>.<span class='identifier'><a name='37_19'>async</a></span> {
0038                <span class='identifier'><a name='38_12' href='StdioDataTransport.html#35_12' title='usrString1'>fileHandle</a></span>.<span class='identifier'><a name='38_23'>write</a></span>(<span class='identifier'><a name='38_29' href='StdioDataTransport.html#30_24' title='usrString1'>data</a></span>)
0039            }
0040        }
0041        
0042        <span class='builtin'><a name='42_4'>public</a></span> <span class='keyword'><a name='42_11'>func</a></span> <span class='identifier'><a name='42_16' title='usrString2' onclick='return expand(this);'>setReaderHandler<span class='references'><table></table></span></a></span>(<span class='keyword'><a name='42_33'>_</a></span> <span class='identifier'><a name='42_35' title='usrString2' onclick='return expand(this);'>handler<span class='references'><table></table></span></a></span>: <span class='builtin'><a name='42_44'>@escaping</a></span> (<span class='typeidentifier'><a name='42_55'>Data</a></span>) -> <span class='typeidentifier'><a name='42_64'>Void</a></span>) {
0043            <span class='identifier'><a name='43_8' href='StdioDataTransport.html#17_16' title='usrString1'>queue</a></span>.<span class='identifier'><a name='43_14'>sync</a></span> { [<span class='builtin'><a name='43_22'>unowned</a></span> <span class='keyword'><a name='43_30'>self</a></span>] <span class='keyword'><a name='43_36'>in</a></span>
0044                <span class='keyword'><a name='44_12'>self</a></span>.<span class='identifier'><a name='44_17' href='StdioDataTransport.html#15_8' title='usrString1'>readHandler</a></span> = <span class='identifier'><a name='44_31' href='StdioDataTransport.html#42_35' title='usrString1'>handler</a></span>
0045            }
0046        }
0047    
0048        <span class='builtin'><a name='48_4'>public</a></span> <span class='keyword'><a name='48_11'>func</a></span> <span class='identifier'><a name='48_16' href='#' title='usrString2' onclick='return expand(this);'>close<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="LanguageServerProcessHost.html#52_27"; event.stopPropagation(); return false;'>LanguageServerProcessHost.swift:52</td><td><pre>            self.transport.close()</pre></td></table></span></a></span>() {
0049            <span class='identifier'><a name='49_8' href='StdioDataTransport.html#17_16' title='usrString1'>queue</a></span>.<span class='identifier'><a name='49_14'>sync</a></span> {
0050                <span class='keyword'><a name='50_12'>if</a></span> <span class='keyword'><a name='50_15'>self</a></span>.<span class='identifier'><a name='50_20' href='StdioDataTransport.html#16_16' title='usrString1'>closed</a></span> {
0051                    <span class='keyword'><a name='51_16'>return</a></span>
0052                }
0053    
0054                <span class='keyword'><a name='54_12'>self</a></span>.<span class='identifier'><a name='54_17' href='StdioDataTransport.html#16_16' title='usrString1'>closed</a></span> = <span class='keyword'><a name='54_26'>true</a></span>
0055    
0056                [<span class='identifier'><a name='56_13' href='StdioDataTransport.html#13_15' title='usrString1'>stdoutPipe</a></span>, <span class='identifier'><a name='56_25' href='StdioDataTransport.html#14_15' title='usrString1'>stderrPipe</a></span>, <span class='identifier'><a name='56_37' href='StdioDataTransport.html#12_15' title='usrString1'>stdinPipe</a></span>].<span class='identifier'><a name='56_48'>forEach</a></span> { (<span class='identifier'><a name='56_59' title='usrString3'>pipe</a></span>) <span class='keyword'><a name='56_65'>in</a></span>
0057                    <span class='identifier'><a name='57_16' href='StdioDataTransport.html#56_59' title='usrString1'>pipe</a></span>.<span class='identifier'><a name='57_21'>fileHandleForWriting</a></span>.<span class='identifier'><a name='57_42'>closeFile</a></span>()
0058                    <span class='identifier'><a name='58_16' href='StdioDataTransport.html#56_59' title='usrString1'>pipe</a></span>.<span class='identifier'><a name='58_21'>fileHandleForReading</a></span>.<span class='identifier'><a name='58_42'>closeFile</a></span>()
0059                }
0060            }
0061        }
0062    
0063        <span class='builtin'><a name='63_4'>private</a></span> <span class='keyword'><a name='63_12'>func</a></span> <span class='identifier'><a name='63_17' href='#' title='usrString2' onclick='return expand(this);'>setupFileHandleHandlers<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#27_8"; return false;'>StdioDataTransport.swift:27</td><td><pre>        setupFileHandleHandlers()</pre></td></table></span></a></span>() {
0064            <span class='identifier'><a name='64_8' href='StdioDataTransport.html#13_15' title='usrString1'>stdoutPipe</a></span>.<span class='identifier'><a name='64_19'>fileHandleForReading</a></span>.<span class='identifier'><a name='64_40'>readabilityHandler</a></span> = { [<span class='builtin'><a name='64_64'>unowned</a></span> <span class='keyword'><a name='64_72'>self</a></span>] (<span class='identifier'><a name='64_79' title='usrString3'>handle</a></span>) <span class='keyword'><a name='64_87'>in</a></span>
0065                <span class='keyword'><a name='65_12'>let</a></span> <span class='identifier'><a name='65_16' title='usrString3'>data</a></span> = <span class='identifier'><a name='65_23' href='StdioDataTransport.html#64_79' title='usrString1'>handle</a></span>.<span class='identifier'><a name='65_30'>availableData</a></span>
0066    
0067                <span class='keyword'><a name='67_12'>guard</a></span> <span class='identifier'><a name='67_18' href='StdioDataTransport.html#65_16' title='usrString1'>data</a></span>.<span class='identifier'><a name='67_23'>count</a></span> > <span class='number'><a name='67_31'>0</a></span> <span class='keyword'><a name='67_33'>else</a></span> {
0068                    <span class='keyword'><a name='68_16'>return</a></span>
0069                }
0070    
0071                <span class='keyword'><a name='71_12'>self</a></span>.<span class='identifier'><a name='71_17' href='StdioDataTransport.html#85_17' title='usrString1'>forwardDataToHandler</a></span>(<span class='identifier'><a name='71_38' href='StdioDataTransport.html#65_16' title='usrString1'>data</a></span>)
0072            }
0073    
0074            <span class='identifier'><a name='74_8' href='StdioDataTransport.html#14_15' title='usrString1'>stderrPipe</a></span>.<span class='identifier'><a name='74_19'>fileHandleForReading</a></span>.<span class='identifier'><a name='74_40'>readabilityHandler</a></span> = { [<span class='builtin'><a name='74_64'>unowned</a></span> <span class='keyword'><a name='74_72'>self</a></span>] (<span class='identifier'><a name='74_79' title='usrString3'>handle</a></span>) <span class='keyword'><a name='74_87'>in</a></span>
0075                <span class='keyword'><a name='75_12'>let</a></span> <span class='identifier'><a name='75_16' title='usrString3'>data</a></span> = <span class='identifier'><a name='75_23' href='StdioDataTransport.html#74_79' title='usrString1'>handle</a></span>.<span class='identifier'><a name='75_30'>availableData</a></span>
0076    
0077                <span class='keyword'><a name='77_12'>guard</a></span> <span class='identifier'><a name='77_18' href='StdioDataTransport.html#75_16' title='usrString1'>data</a></span>.<span class='identifier'><a name='77_23'>count</a></span> > <span class='number'><a name='77_31'>0</a></span> <span class='keyword'><a name='77_33'>else</a></span> {
0078                    <span class='keyword'><a name='78_16'>return</a></span>
0079                }
0080    
0081                <span class='keyword'><a name='81_12'>self</a></span>.<span class='identifier'><a name='81_17' href='StdioDataTransport.html#95_17' title='usrString1'>forwardErrorDataToHandler</a></span>(<span class='identifier'><a name='81_43' href='StdioDataTransport.html#75_16' title='usrString1'>data</a></span>)
0082            }
0083        }
0084    
0085        <span class='builtin'><a name='85_4'>private</a></span> <span class='keyword'><a name='85_12'>func</a></span> <span class='identifier'><a name='85_17' href='#' title='usrString2' onclick='return expand(this);'>forwardDataToHandler<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#71_17"; return false;'>StdioDataTransport.swift:71</td><td><pre>            self.forwardDataToHandler(data)</pre></td></table></span></a></span>(<span class='keyword'><a name='85_38'>_</a></span> <span class='identifier'><a name='85_40' title='usrString2' onclick='return expand(this);'>data<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='85_46'>Data</a></span>) {
0086            <span class='identifier'><a name='86_8' href='StdioDataTransport.html#17_16' title='usrString1'>queue</a></span>.<span class='identifier'><a name='86_14'>async</a></span> { [<span class='builtin'><a name='86_23'>unowned</a></span> <span class='keyword'><a name='86_31'>self</a></span>] <span class='keyword'><a name='86_37'>in</a></span>
0087                <span class='keyword'><a name='87_12'>if</a></span> <span class='keyword'><a name='87_15'>self</a></span>.<span class='identifier'><a name='87_20' href='StdioDataTransport.html#16_16' title='usrString1'>closed</a></span> {
0088                    <span class='keyword'><a name='88_16'>return</a></span>
0089                }
0090    
0091                <span class='keyword'><a name='91_12'>self</a></span>.<span class='identifier'><a name='91_17' href='StdioDataTransport.html#15_8' title='usrString1'>readHandler</a></span>?(<span class='identifier'><a name='91_30' href='StdioDataTransport.html#85_40' title='usrString1'>data</a></span>)
0092            }
0093        }
0094    
0095        <span class='builtin'><a name='95_4'>private</a></span> <span class='keyword'><a name='95_12'>func</a></span> <span class='identifier'><a name='95_17' href='#' title='usrString2' onclick='return expand(this);'>forwardErrorDataToHandler<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="StdioDataTransport.html#81_17"; return false;'>StdioDataTransport.swift:81</td><td><pre>            self.forwardErrorDataToHandler(data)</pre></td></table></span></a></span>(<span class='keyword'><a name='95_43'>_</a></span> <span class='identifier'><a name='95_45' title='usrString2' onclick='return expand(this);'>data<span class='references'><table></table></span></a></span>: <span class='typeidentifier'><a name='95_51'>Data</a></span>) {
0096            <span class='identifier'><a name='96_8' href='StdioDataTransport.html#17_16' title='usrString1'>queue</a></span>.<span class='identifier'><a name='96_14'>async</a></span> { [<span class='builtin'><a name='96_23'>unowned</a></span> <span class='keyword'><a name='96_31'>self</a></span>] <span class='keyword'><a name='96_37'>in</a></span>
0097                <span class='keyword'><a name='97_12'>if</a></span> <span class='keyword'><a name='97_15'>self</a></span>.<span class='identifier'><a name='97_20' href='StdioDataTransport.html#16_16' title='usrString1'>closed</a></span> {
0098                    <span class='keyword'><a name='98_16'>return</a></span>
0099                }
0100    
0101                <span class='comment'><a name='101_12'>// Just print for now. Perhaps provide a way to hook
0102    </a></span>            <span class='comment'><a name='102_12'>// this up to a caller?
0103    </a></span>            <span class='keyword'><a name='103_12'>if</a></span> <span class='keyword'><a name='103_15'>let</a></span> <span class='identifier'><a name='103_19' title='usrString3'>string</a></span> = <span class='identifier'><a name='103_28'>String</a></span>(<span class='identifier'><a name='103_35'>bytes</a></span>: <span class='identifier'><a name='103_42' href='StdioDataTransport.html#95_45' title='usrString1'>data</a></span>, <span class='identifier'><a name='103_48'>encoding</a></span>: .<span class='identifier'><a name='103_59'>utf8</a></span>) {
0104                    <span class='identifier'><a name='104_16'>print</a></span>(<span class='string'><a name='104_22'>"stderr: </a></span>\<span class='string_interpolation_anchor'><a name='104_32'>(</a></span><span class='identifier'><a name='104_33' href='StdioDataTransport.html#103_19' title='usrString1'>string</a></span><span class='string_interpolation_anchor'><a name='104_39'>)</a></span><span class='string'><a name='104_40'>"</a></span>)
0105                }
0106            }
0107        }
0108    }
0109    