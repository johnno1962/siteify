<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>
0001    <span class='comment'>//
0002    </span><span class='comment'>//  SwiftRegex.swift
0003    </span><span class='comment'>//  SwiftRegex
0004    </span><span class='comment'>//
0005    </span><span class='comment'>//  Created by John Holdsworth on 26/06/2014.
0006    </span><span class='comment'>//  Copyright (c) 2014 John Holdsworth.
0007    </span><span class='comment'>//
0008    </span><span class='comment'>//  $Id: //depot/siteify/siteify/SwiftRegex.swift#1 $
0009    </span><span class='comment'>//
0010    </span><span class='comment'>//  This code is in the public domain from:
0011    </span><span class='comment'>//  </span><span class='url'><a href='https://github.com/johnno1962/SwiftRegex'>https://github.com/johnno1962/SwiftRegex</a></span><span class='comment'>
0012    </span><span class='comment'>//
0013    </span>
0014    <span class='keyword'>import</span> <span class='identifier'>Foundation</span>
0015    
0016    <span class='builtin'>private</span> <span class='keyword'>var</span> <span class='identifier'><a name='16_13' href='#' onclick='return expand(this);'>swiftRegexCache<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#27_24"; return false;'>SwiftRegex.swift:27</td><td> &nbsp; &nbsp; &nbsp; &nbsp;if let regex = <b></b>swiftRegexCache[pattern] {</td><tr><td onclick='document.location.href="SwiftRegex.html#32_17"; return false;'>SwiftRegex.swift:32</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>swiftRegexCache[pattern] = regex</td></table></span></a></span> = <span class='identifier'>Dictionary</span><<span class='typeidentifier'>String</span>,<span class='typeidentifier'>NSRegularExpression</span>>()
0017    <span class='builtin'>public</span> <span class='keyword'>let</span> <span class='identifier'><a name='17_12'>regexNoGroup</a></span> = <span class='string'>"__nil__"</span>
0018    
0019    <span class='builtin'>public</span> <span class='keyword'>class</span> <span class='identifier'><a name='19_14' href='#' onclick='return expand(this);'>SwiftRegex<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#35_17"; return false;'>SwiftRegex.swift:35</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>SwiftRegex.failure("Error in pattern: \(pattern) - \(error.localizedDescription)")</td><tr><td onclick='document.location.href="SwiftRegex.html#141_17"; return false;'>SwiftRegex.swift:141</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>SwiftRegex.failure("Group modify on non-mutable")</td><tr><td onclick='document.location.href="SwiftRegex.html#198_13"; return false;'>SwiftRegex.swift:198</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>SwiftRegex.failure("Modify on non-mutable")</td><tr><td onclick='document.location.href="SwiftRegex.html#242_16"; return false;'>SwiftRegex.swift:242</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern, options: options )</td><tr><td onclick='document.location.href="SwiftRegex.html#248_16"; return false;'>SwiftRegex.swift:248</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern, options: options )</td><tr><td onclick='document.location.href="SwiftRegex.html#254_16"; return false;'>SwiftRegex.swift:254</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern )</td><tr><td onclick='document.location.href="SwiftRegex.html#260_16"; return false;'>SwiftRegex.swift:260</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern )</td><tr><td onclick='document.location.href="SwiftRegex.html#272_21"; return false;'>SwiftRegex.swift:272</td><td> &nbsp; &nbsp;if let groups = <b></b>SwiftRegex( target: right, pattern: left ).groups() {</td><tr><td onclick='document.location.href="SwiftRegex.html#280_24"; return false;'>SwiftRegex.swift:280</td><td>public func ~= ( left: <b></b>SwiftRegex, right: String ) -> Bool {</td><tr><td onclick='document.location.href="SwiftRegex.html#288_24"; return false;'>SwiftRegex.swift:288</td><td>public func ~= ( left: <b></b>SwiftRegex, right: [String] ) -> Bool {</td><tr><td onclick='document.location.href="SwiftRegex.html#302_24"; return false;'>SwiftRegex.swift:302</td><td>public func ~= ( left: <b></b>SwiftRegex, right: (String) -> String ) -> Bool {</td><tr><td onclick='document.location.href="SwiftRegex.html#309_24"; return false;'>SwiftRegex.swift:309</td><td>public func ~= ( left: <b></b>SwiftRegex, right: ([String]) -> String ) -> Bool {</td><tr><td onclick='document.location.href="SwiftRegex.html#323_20"; return false;'>SwiftRegex.swift:323</td><td> &nbsp; &nbsp; &nbsp; &nbsp;contents = <b></b>SwiftRegex.loadFile( path )</td><tr><td onclick='document.location.href="SwiftRegex.html#327_21"; return false;'>SwiftRegex.swift:327</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let regex = <b></b>SwiftRegex( target: contents, pattern: pattern )</td><tr><td onclick='document.location.href="SwiftRegex.html#333_9"; return false;'>SwiftRegex.swift:333</td><td> &nbsp; &nbsp; &nbsp; &nbsp;<b></b>SwiftRegex.saveFile( filepath, newContents: contents )</td></table></span></a></span>: <span class='typeidentifier'>NSObject</span>, <span class='typeidentifier'>BooleanType</span> {
0020    
0021        <span class='keyword'>let</span> <span class='identifier'><a name='21_9' href='#' onclick='return expand(this);'>target<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#26_14"; return false;'>SwiftRegex.swift:26</td><td> &nbsp; &nbsp; &nbsp; &nbsp;self.<b></b>target = target</td><tr><td onclick='document.location.href="SwiftRegex.html#81_44"; return false;'>SwiftRegex.swift:81</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return NSRange(location: 0,length: <b></b>target.length)</td><tr><td onclick='document.location.href="SwiftRegex.html#86_20"; return false;'>SwiftRegex.swift:86</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>target.substringWithRange(range)</td><tr><td onclick='document.location.href="SwiftRegex.html#97_49"; return false;'>SwiftRegex.swift:97</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return regex.rangeOfFirstMatchInString( <b></b>target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange )</td><tr><td onclick='document.location.href="SwiftRegex.html#105_57"; return false;'>SwiftRegex.swift:105</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return groupsForMatch( regex.firstMatchInString(<b></b>target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange) )</td><tr><td onclick='document.location.href="SwiftRegex.html#134_36"; return false;'>SwiftRegex.swift:134</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if let mutableTarget = <b></b>target as? NSMutableString {</td><tr><td onclick='document.location.href="SwiftRegex.html#137_35"; return false;'>SwiftRegex.swift:137</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;inString: <b></b>target as String, offset: 0, template: newValue )</td><tr><td onclick='document.location.href="SwiftRegex.html#153_39"; return false;'>SwiftRegex.swift:153</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return regex.matchesInString( <b></b>target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange ) as [NSTextCheckingResult]</td><tr><td onclick='document.location.href="SwiftRegex.html#181_41"; return false;'>SwiftRegex.swift:181</td><td> &nbsp; &nbsp; &nbsp; &nbsp;regex.enumerateMatchesInString( <b></b>target as String, options: NSMatchingOptions(rawValue: 0), range: targetRange ) {</td><tr><td onclick='document.location.href="SwiftRegex.html#192_32"; return false;'>SwiftRegex.swift:192</td><td> &nbsp; &nbsp; &nbsp; &nbsp;if let mutableTarget = <b></b>target as? NSMutableString {</td><tr><td onclick='document.location.href="SwiftRegex.html#193_23"; return false;'>SwiftRegex.swift:193</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if out != <b></b>target {</td><tr><td onclick='document.location.href="SwiftRegex.html#205_71"; return false;'>SwiftRegex.swift:205</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let mutable = /*target as? NSMutableString ??*/ RegexMutable( <b></b>target )</td><tr><td onclick='document.location.href="SwiftRegex.html#284_28"; return false;'>SwiftRegex.swift:284</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;inString: left.<b></b>target as String, offset: 0, template: right )</td><tr><td onclick='document.location.href="SwiftRegex.html#298_28"; return false;'>SwiftRegex.swift:298</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;inString: left.<b></b>target as String, offset: 0, template: right[matchNumber-1] )</td></table></span></a></span>: <span class='typeidentifier'>NSString</span>
0022        <span class='keyword'>let</span> <span class='identifier'><a name='22_9' href='#' onclick='return expand(this);'>regex<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#28_18"; return false;'>SwiftRegex.swift:28</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.<b></b>regex = regex</td><tr><td onclick='document.location.href="SwiftRegex.html#33_22"; return false;'>SwiftRegex.swift:33</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.<b></b>regex = regex</td><tr><td onclick='document.location.href="SwiftRegex.html#36_22"; return false;'>SwiftRegex.swift:36</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.<b></b>regex = NSRegularExpression()</td><tr><td onclick='document.location.href="SwiftRegex.html#97_16"; return false;'>SwiftRegex.swift:97</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>regex.rangeOfFirstMatchInString( target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange )</td><tr><td onclick='document.location.href="SwiftRegex.html#105_32"; return false;'>SwiftRegex.swift:105</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return groupsForMatch( <b></b>regex.firstMatchInString(target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange) )</td><tr><td onclick='document.location.href="SwiftRegex.html#111_32"; return false;'>SwiftRegex.swift:111</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for groupno in 0...<b></b>regex.numberOfCaptureGroups {</td><tr><td onclick='document.location.href="SwiftRegex.html#136_39"; return false;'>SwiftRegex.swift:136</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;let replacement = <b></b>regex.replacementStringForResult( match,</td><tr><td onclick='document.location.href="SwiftRegex.html#153_16"; return false;'>SwiftRegex.swift:153</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>regex.matchesInString( target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange ) as [NSTextCheckingResult]</td><tr><td onclick='document.location.href="SwiftRegex.html#181_9"; return false;'>SwiftRegex.swift:181</td><td> &nbsp; &nbsp; &nbsp; &nbsp;<b></b>regex.enumerateMatchesInString( target as String, options: NSMatchingOptions(rawValue: 0), range: targetRange ) {</td><tr><td onclick='document.location.href="SwiftRegex.html#206_9"; return false;'>SwiftRegex.swift:206</td><td> &nbsp; &nbsp; &nbsp; &nbsp;<b></b>regex.replaceMatchesInString( mutable, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange, withTemplate: template )</td><tr><td onclick='document.location.href="SwiftRegex.html#283_21"; return false;'>SwiftRegex.swift:283</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return left.<b></b>regex.replacementStringForResult( match,</td><tr><td onclick='document.location.href="SwiftRegex.html#297_21"; return false;'>SwiftRegex.swift:297</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return left.<b></b>regex.replacementStringForResult( match,</td></table></span></a></span>: <span class='typeidentifier'>NSRegularExpression</span>
0023        <span class='keyword'>var</span> <span class='identifier'><a name='23_9' href='#' onclick='return expand(this);'>regexFile<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#328_15"; return false;'>SwiftRegex.swift:328</td><td> &nbsp; &nbsp; &nbsp; &nbsp;regex.<b></b>regexFile = self // retains until after substitution</td></table></span></a></span>: <span class='typeidentifier'><a name='23_20' href='SwiftRegex.html#316_14'>RegexFile<a></span>?
0024    
0025        <span class='keyword'><a name='25_5' href='#' onclick='return expand(this);'>init<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#242_16"; return false;'>SwiftRegex.swift:242</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern, options: options )</td><tr><td onclick='document.location.href="SwiftRegex.html#248_16"; return false;'>SwiftRegex.swift:248</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern, options: options )</td><tr><td onclick='document.location.href="SwiftRegex.html#254_16"; return false;'>SwiftRegex.swift:254</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern )</td><tr><td onclick='document.location.href="SwiftRegex.html#260_16"; return false;'>SwiftRegex.swift:260</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>SwiftRegex( target: self, pattern: pattern )</td><tr><td onclick='document.location.href="SwiftRegex.html#272_21"; return false;'>SwiftRegex.swift:272</td><td> &nbsp; &nbsp;if let groups = <b></b>SwiftRegex( target: right, pattern: left ).groups() {</td><tr><td onclick='document.location.href="SwiftRegex.html#327_21"; return false;'>SwiftRegex.swift:327</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let regex = <b></b>SwiftRegex( target: contents, pattern: pattern )</td></table></span></a></span>( <span class='identifier'>target</span>:<span class='typeidentifier'>NSString</span>, <span class='identifier'>pattern</span>:<span class='typeidentifier'>String</span>, <span class='identifier'>options</span>:<span class='typeidentifier'>NSRegularExpressionOptions</span> = .<span class='identifier'>DotMatchesLineSeparators</span> ) {
0026            <span class='keyword'>self</span>.<span class='identifier'>target</span> = <span class='identifier'>target</span>
0027            <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'>regex</span> = <span class='identifier'><a name='27_24' href='SwiftRegex.html#16_13'>swiftRegexCache<a></span>[<span class='identifier'>pattern</span>] {
0028                <span class='keyword'>self</span>.<span class='identifier'>regex</span> = <span class='identifier'>regex</span>
0029            } <span class='keyword'>else</span> {
0030                <span class='keyword'>do</span> {
0031                    <span class='keyword'>let</span> <span class='identifier'>regex</span> = <span class='keyword'>try</span> <span class='identifier'>NSRegularExpression</span>( <span class='identifier'>pattern</span>: <span class='identifier'>pattern</span>, <span class='identifier'>options</span>:<span class='identifier'>options</span>)
0032                    <span class='identifier'><a name='32_17' href='SwiftRegex.html#16_13'>swiftRegexCache<a></span>[<span class='identifier'>pattern</span>] = <span class='identifier'>regex</span>
0033                    <span class='keyword'>self</span>.<span class='identifier'>regex</span> = <span class='identifier'>regex</span>
0034                } <span class='keyword'>catch</span> <span class='keyword'>let</span> <span class='identifier'>error</span> <span class='keyword'>as</span> <span class='typeidentifier'>NSError</span> {
0035                    <span class='identifier'><a name='35_17' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>.<span class='identifier'><a name='35_28' href='SwiftRegex.html#42_16'>failure<a></span>(<span class='string'>"Error in pattern: </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>pattern</span><span class='string_interpolation_anchor'>)</span><span class='string'> - </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>error</span>.<span class='identifier'>localizedDescription</span><span class='string_interpolation_anchor'>)</span><span class='string'>"</span>)
0036                    <span class='keyword'>self</span>.<span class='identifier'>regex</span> = <span class='identifier'>NSRegularExpression</span>()
0037                }
0038            }
0039            <span class='keyword'>super</span>.<span class='keyword'>init</span>()
0040        }
0041    
0042        <span class='keyword'>class</span> <span class='keyword'>func</span> <span class='identifier'><a name='42_16' href='#' onclick='return expand(this);'>failure<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#35_28"; return false;'>SwiftRegex.swift:35</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SwiftRegex.<b></b>failure("Error in pattern: \(pattern) - \(error.localizedDescription)")</td><tr><td onclick='document.location.href="SwiftRegex.html#53_17"; return false;'>SwiftRegex.swift:53</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>failure( "Could not load file: \(path), \(error.localizedDescription)" )</td><tr><td onclick='document.location.href="SwiftRegex.html#67_17"; return false;'>SwiftRegex.swift:67</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>failure( "Could not write to file: \(path), \(error.localizedDescription)" )</td><tr><td onclick='document.location.href="SwiftRegex.html#141_28"; return false;'>SwiftRegex.swift:141</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SwiftRegex.<b></b>failure("Group modify on non-mutable")</td><tr><td onclick='document.location.href="SwiftRegex.html#198_24"; return false;'>SwiftRegex.swift:198</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SwiftRegex.<b></b>failure("Modify on non-mutable")</td></table></span></a></span>( <span class='identifier'>message</span>: <span class='typeidentifier'>String</span> ) {
0043            <span class='identifier'>NSLog</span>( <span class='string'>"*** SwiftRegex: </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>message</span><span class='string_interpolation_anchor'>)</span><span class='string'>"</span>[<span class='string'>"%"</span>][<span class='string'>"%%"</span>] )
0044            <span class='comment'>//assert(false,"SwiftRegex: failed")
0045    </span>    }
0046    
0047        <span class='builtin'>public</span> <span class='keyword'>class</span> <span class='keyword'>func</span> <span class='identifier'><a name='47_23' href='#' onclick='return expand(this);'>loadFile<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#60_37"; return false;'>SwiftRegex.swift:60</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let current = force ? nil : <b></b>loadFile( path, bleat: false )</td><tr><td onclick='document.location.href="SwiftRegex.html#75_23"; return false;'>SwiftRegex.swift:75</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let patched = <b></b>loadFile( path )</td><tr><td onclick='document.location.href="SwiftRegex.html#323_31"; return false;'>SwiftRegex.swift:323</td><td> &nbsp; &nbsp; &nbsp; &nbsp;contents = SwiftRegex.<b></b>loadFile( path )</td></table></span></a></span>( <span class='identifier'>path</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>bleat</span>: <span class='typeidentifier'>Bool</span> = <span class='keyword'>true</span> ) -> <span class='typeidentifier'>NSMutableString</span>! {
0048            <span class='keyword'>do</span> {
0049                <span class='keyword'>let</span> <span class='identifier'>string</span> = <span class='keyword'>try</span> <span class='identifier'>NSMutableString</span>( <span class='identifier'>contentsOfFile</span>: <span class='identifier'>path</span>, <span class='identifier'>encoding</span>: <span class='identifier'>NSUTF8StringEncoding</span> )
0050                <span class='keyword'>return</span> <span class='identifier'>string</span>
0051            } <span class='keyword'>catch</span> <span class='keyword'>let</span> <span class='identifier'>error</span> <span class='keyword'>as</span> <span class='typeidentifier'>NSError</span> {
0052                <span class='keyword'>if</span> <span class='identifier'>bleat</span> {
0053                    <span class='identifier'><a name='53_17' href='SwiftRegex.html#42_16'>failure<a></span>( <span class='string'>"Could not load file: </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>path</span><span class='string_interpolation_anchor'>)</span><span class='string'>, </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>error</span>.<span class='identifier'>localizedDescription</span><span class='string_interpolation_anchor'>)</span><span class='string'>"</span> )
0054                }
0055            }
0056            <span class='keyword'>return</span> <span class='keyword'>nil</span>
0057        }
0058    
0059        <span class='builtin'>public</span> <span class='keyword'>class</span> <span class='keyword'>func</span> <span class='identifier'><a name='59_23' href='#' onclick='return expand(this);'>saveFile<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#77_16"; return false;'>SwiftRegex.swift:77</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>saveFile( path, newContents: patched )</td><tr><td onclick='document.location.href="SwiftRegex.html#333_20"; return false;'>SwiftRegex.swift:333</td><td> &nbsp; &nbsp; &nbsp; &nbsp;SwiftRegex.<b></b>saveFile( filepath, newContents: contents )</td></table></span></a></span>( <span class='identifier'>path</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>newContents</span>: <span class='typeidentifier'>NSString</span>, <span class='identifier'>force</span>: <span class='typeidentifier'>Bool</span> = <span class='keyword'>false</span> ) -> <span class='typeidentifier'>Bool</span> {
0060            <span class='keyword'>let</span> <span class='identifier'>current</span> = <span class='identifier'>force</span> ? <span class='keyword'>nil</span> : <span class='identifier'><a name='60_37' href='SwiftRegex.html#47_23'>loadFile<a></span>( <span class='identifier'>path</span>, <span class='identifier'>bleat</span>: <span class='keyword'>false</span> )
0061    
0062            <span class='keyword'>if</span> <span class='identifier'>current</span> == <span class='keyword'>nil</span> || <span class='identifier'>current</span> != <span class='identifier'>newContents</span> {
0063                <span class='keyword'>do</span> {
0064                    <span class='keyword'>try</span> <span class='identifier'>newContents</span>.<span class='identifier'>writeToFile</span>( <span class='identifier'>path</span>, <span class='identifier'>atomically</span>: <span class='keyword'>true</span>, <span class='identifier'>encoding</span>: <span class='identifier'>NSUTF8StringEncoding</span>)
0065                    <span class='keyword'>return</span> <span class='keyword'>true</span>
0066                } <span class='keyword'>catch</span> <span class='keyword'>let</span> <span class='identifier'>error</span> <span class='keyword'>as</span> <span class='typeidentifier'>NSError</span> {
0067                    <span class='identifier'><a name='67_17' href='SwiftRegex.html#42_16'>failure<a></span>( <span class='string'>"Could not write to file: </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>path</span><span class='string_interpolation_anchor'>)</span><span class='string'>, </span>\<span class='string_interpolation_anchor'>(</span><span class='identifier'>error</span>.<span class='identifier'>localizedDescription</span><span class='string_interpolation_anchor'>)</span><span class='string'>"</span> )
0068                }
0069            }
0070    
0071            <span class='keyword'>return</span> <span class='keyword'>false</span>
0072        }
0073    
0074        <span class='builtin'>public</span> <span class='keyword'>class</span> <span class='keyword'>func</span> <span class='identifier'><a name='74_23'>patchFile</a></span>( <span class='identifier'>path</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>replace</span> <span class='identifier'>pattern</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>with</span> <span class='identifier'>template</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>Bool</span> {
0075            <span class='keyword'>let</span> <span class='identifier'>patched</span> = <span class='identifier'><a name='75_23' href='SwiftRegex.html#47_23'>loadFile<a></span>( <span class='identifier'>path</span> )
0076            <span class='identifier'>patched</span>[<span class='identifier'>pattern</span>] ~= <span class='identifier'>template</span>
0077            <span class='keyword'>return</span> <span class='identifier'><a name='77_16' href='SwiftRegex.html#59_23'>saveFile<a></span>( <span class='identifier'>path</span>, <span class='identifier'>newContents</span>: <span class='identifier'>patched</span> )
0078        }
0079        
0080        <span class='builtin'>final</span> <span class='keyword'>var</span> <span class='identifier'><a name='80_15' href='#' onclick='return expand(this);'>targetRange<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#97_126"; return false;'>SwiftRegex.swift:97</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return regex.rangeOfFirstMatchInString( target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: <b></b>targetRange )</td><tr><td onclick='document.location.href="SwiftRegex.html#105_134"; return false;'>SwiftRegex.swift:105</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return groupsForMatch( regex.firstMatchInString(target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: <b></b>targetRange) )</td><tr><td onclick='document.location.href="SwiftRegex.html#153_116"; return false;'>SwiftRegex.swift:153</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return regex.matchesInString( target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: <b></b>targetRange ) as [NSTextCheckingResult]</td><tr><td onclick='document.location.href="SwiftRegex.html#181_107"; return false;'>SwiftRegex.swift:181</td><td> &nbsp; &nbsp; &nbsp; &nbsp;regex.enumerateMatchesInString( target as String, options: NSMatchingOptions(rawValue: 0), range: <b></b>targetRange ) {</td><tr><td onclick='document.location.href="SwiftRegex.html#190_67"; return false;'>SwiftRegex.swift:190</td><td> &nbsp; &nbsp; &nbsp; &nbsp;out.appendString( substring( NSRange(location:pos, length:<b></b>targetRange.length-pos) ) )</td><tr><td onclick='document.location.href="SwiftRegex.html#206_107"; return false;'>SwiftRegex.swift:206</td><td> &nbsp; &nbsp; &nbsp; &nbsp;regex.replaceMatchesInString( mutable, options: options ?? NSMatchingOptions(rawValue: 0), range: <b></b>targetRange, withTemplate: template )</td></table></span></a></span>: <span class='typeidentifier'>NSRange</span> {
0081            <span class='keyword'>return</span> <span class='identifier'>NSRange</span>(<span class='identifier'>location</span>: <span class='number'>0</span>,<span class='identifier'>length</span>: <span class='identifier'>target</span>.<span class='identifier'>length</span>)
0082        }
0083    
0084        <span class='builtin'>final</span> <span class='keyword'>func</span> <span class='identifier'><a name='84_16' href='#' onclick='return expand(this);'>substring<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#101_16"; return false;'>SwiftRegex.swift:101</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>substring( range( options ) )</td><tr><td onclick='document.location.href="SwiftRegex.html#112_32"; return false;'>SwiftRegex.swift:112</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if let group = <b></b>substring( match.rangeAtIndex(groupno) ) as String! {</td><tr><td onclick='document.location.href="SwiftRegex.html#161_51"; return false;'>SwiftRegex.swift:161</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return matchResults( options ).map { self.<b></b>substring($0.range) }</td><tr><td onclick='document.location.href="SwiftRegex.html#171_17"; return false;'>SwiftRegex.swift:171</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;out[<b></b>substring(match.rangeAtIndex(1))] =</td><tr><td onclick='document.location.href="SwiftRegex.html#172_17"; return false;'>SwiftRegex.swift:172</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<b></b>substring(match.rangeAtIndex(2))</td><tr><td onclick='document.location.href="SwiftRegex.html#185_36"; return false;'>SwiftRegex.swift:185</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;out.appendString( self.<b></b>substring( NSRange(location:pos, length:matchRange.location-pos) ) )</td><tr><td onclick='document.location.href="SwiftRegex.html#190_27"; return false;'>SwiftRegex.swift:190</td><td> &nbsp; &nbsp; &nbsp; &nbsp;out.appendString( <b></b>substring( NSRange(location:pos, length:targetRange.length-pos) ) )</td><tr><td onclick='document.location.href="SwiftRegex.html#305_28"; return false;'>SwiftRegex.swift:305</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return right( left.<b></b>substring(match.range) )</td></table></span></a></span>( <span class='identifier'>range</span>: <span class='typeidentifier'>NSRange</span> ) -> <span class='typeidentifier'>String</span>! {
0085            <span class='keyword'>if</span> ( <span class='identifier'>range</span>.<span class='identifier'>location</span> != <span class='identifier'>NSNotFound</span> ) {
0086                <span class='keyword'>return</span> <span class='identifier'>target</span>.<span class='identifier'>substringWithRange</span>(<span class='identifier'>range</span>)
0087            } <span class='keyword'>else</span> {
0088                <span class='keyword'>return</span> <span class='keyword'>nil</span>
0089            }
0090        }
0091    
0092        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='92_17' href='#' onclick='return expand(this);'>doesMatch<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#236_16"; return false;'>SwiftRegex.swift:236</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>doesMatch()</td></table></span></a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> <span class='typeidentifier'>Bool</span> {
0093            <span class='keyword'>return</span> <span class='identifier'><a name='93_16' href='SwiftRegex.html#96_17'>range<a></span>(<span class='identifier'>options</span>).<span class='identifier'>location</span> != <span class='identifier'>NSNotFound</span>
0094        }
0095    
0096        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='96_17' href='#' onclick='return expand(this);'>range<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#93_16"; return false;'>SwiftRegex.swift:93</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>range(options).location != NSNotFound</td><tr><td onclick='document.location.href="SwiftRegex.html#101_27"; return false;'>SwiftRegex.swift:101</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return substring( <b></b>range( options ) )</td></table></span></a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> <span class='typeidentifier'>NSRange</span> {
0097            <span class='keyword'>return</span> <span class='identifier'>regex</span>.<span class='identifier'>rangeOfFirstMatchInString</span>( <span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='identifier'>options</span> ?? <span class='identifier'>NSMatchingOptions</span>(<span class='identifier'>rawValue</span>: <span class='number'>0</span>), <span class='identifier'>range</span>: <span class='identifier'><a name='97_126' href='SwiftRegex.html#80_36'>targetRange<a></span> )
0098        }
0099    
0100        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='100_17'>match</a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> <span class='typeidentifier'>String</span>! {
0101            <span class='keyword'>return</span> <span class='identifier'><a name='101_16' href='SwiftRegex.html#84_16'>substring<a></span>( <span class='identifier'><a name='101_27' href='SwiftRegex.html#96_17'>range<a></span>( <span class='identifier'>options</span> ) )
0102        }
0103    
0104        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='104_17' href='#' onclick='return expand(this);'>groups<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#126_29"; return false;'>SwiftRegex.swift:126</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if let groups = <b></b>groups() {</td><tr><td onclick='document.location.href="SwiftRegex.html#272_64"; return false;'>SwiftRegex.swift:272</td><td> &nbsp; &nbsp;if let groups = SwiftRegex( target: right, pattern: left ).<b></b>groups() {</td></table></span></a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> [<span class='typeidentifier'>String</span>]! {
0105            <span class='keyword'>return</span> <span class='identifier'><a name='105_16' href='SwiftRegex.html#108_10'>groupsForMatch<a></span>( <span class='identifier'>regex</span>.<span class='identifier'>firstMatchInString</span>(<span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='identifier'>options</span> ?? <span class='identifier'>NSMatchingOptions</span>(<span class='identifier'>rawValue</span>: <span class='number'>0</span>), <span class='identifier'>range</span>: <span class='identifier'><a name='105_134' href='SwiftRegex.html#80_36'>targetRange<a></span>) )
0106        }
0107    
0108        <span class='keyword'>func</span> <span class='identifier'><a name='108_10' href='#' onclick='return expand(this);'>groupsForMatch<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#105_16"; return false;'>SwiftRegex.swift:105</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>groupsForMatch( regex.firstMatchInString(target as String, options: options ?? NSMatchingOptions(rawValue: 0), range: targetRange) )</td><tr><td onclick='document.location.href="SwiftRegex.html#165_51"; return false;'>SwiftRegex.swift:165</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return matchResults( options ).map { self.<b></b>groupsForMatch($0) }</td><tr><td onclick='document.location.href="SwiftRegex.html#312_28"; return false;'>SwiftRegex.swift:312</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return right( left.<b></b>groupsForMatch(match) )</td></table></span></a></span>( <span class='identifier'>match</span>: <span class='typeidentifier'>NSTextCheckingResult</span>! ) -> [<span class='typeidentifier'>String</span>]! {
0109            <span class='keyword'>if</span> <span class='identifier'>match</span> != <span class='keyword'>nil</span> {
0110                <span class='keyword'>var</span> <span class='identifier'>groups</span> = [<span class='identifier'>String</span>]()
0111                <span class='keyword'>for</span> <span class='identifier'>groupno</span> <span class='keyword'>in</span> <span class='number'>0</span>...<span class='identifier'>regex</span>.<span class='identifier'>numberOfCaptureGroups</span> {
0112                    <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'>group</span> = <span class='identifier'><a name='112_32' href='SwiftRegex.html#84_16'>substring<a></span>( <span class='identifier'>match</span>.<span class='identifier'>rangeAtIndex</span>(<span class='identifier'>groupno</span>) ) <span class='keyword'>as</span> <span class='typeidentifier'>String</span>! {
0113                        <span class='identifier'>groups</span>.<span class='identifier'>append</span>( <span class='identifier'>group</span> )
0114                    } <span class='keyword'>else</span> {
0115                        <span class='identifier'>groups</span>.<span class='identifier'>append</span>( <span class='identifier'>regexNoGroup</span> ) <span class='comment'>// avoids bridging problems
0116    </span>                }
0117                }
0118                <span class='keyword'>return</span> <span class='identifier'>groups</span>
0119            } <span class='keyword'>else</span> {
0120                <span class='keyword'>return</span> <span class='keyword'>nil</span>
0121            }
0122        }
0123    
0124        <span class='builtin'>public</span> <span class='keyword'><a name='124_12' href='#' onclick='return expand(this);'>subscript<span class='references'><table><tr><td onclick='document.location.href="main.html#82_71"; return false;'>main.swift:82</td><td> &nbsp; &nbsp;if storingLog == nil, let symroot = line[" &nbsp; &nbsp;SYMROOT = ([^\n]+)"]<b></b>[1] where !filemgr.fileExistsAtPath( symroot ) {</td><tr><td onclick='document.location.href="main.html#90_27"; return false;'>main.swift:90</td><td> &nbsp; &nbsp;if let primary = regex<b></b>[1] ?? regex[2] {</td><tr><td onclick='document.location.href="main.html#90_39"; return false;'>main.swift:90</td><td> &nbsp; &nbsp;if let primary = regex[1] ?? regex<b></b>[2] {</td></table></span></a></span>( <span class='identifier'>groupno</span>: <span class='typeidentifier'>Int</span> ) -> <span class='typeidentifier'>String</span>! {
0125            <span class='keyword'><a name='125_9' href='#' onclick='return expand(this);'>get<span class='references'><table><tr><td onclick='document.location.href="main.html#82_71"; return false;'>main.swift:82</td><td> &nbsp; &nbsp;if storingLog == nil, let symroot = line[" &nbsp; &nbsp;SYMROOT = ([^\n]+)"]<b></b>[1] where !filemgr.fileExistsAtPath( symroot ) {</td><tr><td onclick='document.location.href="main.html#90_27"; return false;'>main.swift:90</td><td> &nbsp; &nbsp;if let primary = regex<b></b>[1] ?? regex[2] {</td><tr><td onclick='document.location.href="main.html#90_39"; return false;'>main.swift:90</td><td> &nbsp; &nbsp;if let primary = regex[1] ?? regex<b></b>[2] {</td></table></span></a></span> {
0126                <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'>groups</span> = <span class='identifier'><a name='126_29' href='SwiftRegex.html#104_17'>groups<a></span>() {
0127                    <span class='keyword'>let</span> <span class='identifier'>group</span> = <span class='identifier'>groups</span>[<span class='identifier'>groupno</span>]
0128                    <span class='keyword'>return</span> <span class='identifier'>group</span> != <span class='identifier'>regexNoGroup</span> ? <span class='identifier'>group</span> : <span class='keyword'>nil</span>
0129                } <span class='keyword'>else</span> {
0130                    <span class='keyword'>return</span> <span class='keyword'>nil</span>
0131                }
0132            }
0133            <span class='keyword'><a name='133_9'>set</a></span>( <span class='identifier'>newValue</span> ) {
0134                <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'>mutableTarget</span> = <span class='identifier'>target</span> <span class='keyword'>as</span>? <span class='typeidentifier'>NSMutableString</span> {
0135                    <span class='keyword'>for</span> <span class='identifier'>match</span> <span class='keyword'>in</span> <span class='identifier'>Array</span>(<span class='identifier'><a name='135_36' href='SwiftRegex.html#152_10'>matchResults<a></span>().<span class='identifier'>reverse</span>()) {
0136                        <span class='keyword'>let</span> <span class='identifier'>replacement</span> = <span class='identifier'>regex</span>.<span class='identifier'>replacementStringForResult</span>( <span class='identifier'>match</span>,
0137                            <span class='identifier'>inString</span>: <span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>offset</span>: <span class='number'>0</span>, <span class='identifier'>template</span>: <span class='identifier'>newValue</span> )
0138                        <span class='identifier'>mutableTarget</span>.<span class='identifier'>replaceCharactersInRange</span>( <span class='identifier'>match</span>.<span class='identifier'>rangeAtIndex</span>(<span class='identifier'>groupno</span>), <span class='identifier'>withString</span>: <span class='identifier'>replacement</span> )
0139                    }
0140                } <span class='keyword'>else</span> {
0141                    <span class='identifier'><a name='141_17' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>.<span class='identifier'><a name='141_28' href='SwiftRegex.html#42_16'>failure<a></span>(<span class='string'>"Group modify on non-mutable"</span>)
0142                }
0143            }
0144        }
0145    
0146        <span class='builtin'>public</span> <span class='keyword'><a name='146_12' href='#' onclick='return expand(this);'>subscript<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#43_49"; return false;'>SwiftRegex.swift:43</td><td> &nbsp; &nbsp; &nbsp; &nbsp;NSLog( "*** SwiftRegex: \(message)"["%"]<b></b>["%%"] )</td></table></span></a></span>( <span class='identifier'>template</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>String</span> {
0147            <span class='keyword'><a name='147_9' href='#' onclick='return expand(this);'>get<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#43_49"; return false;'>SwiftRegex.swift:43</td><td> &nbsp; &nbsp; &nbsp; &nbsp;NSLog( "*** SwiftRegex: \(message)"["%"]<b></b>["%%"] )</td></table></span></a></span> {
0148                <span class='keyword'>return</span> <span class='identifier'><a name='148_20' href='SwiftRegex.html#204_10'>replaceWith<a></span>( <span class='identifier'>template</span> ) <span class='keyword'>as</span> <span class='typeidentifier'>String</span>
0149            }
0150        }
0151    
0152        <span class='keyword'>func</span> <span class='identifier'><a name='152_10' href='#' onclick='return expand(this);'>matchResults<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#135_36"; return false;'>SwiftRegex.swift:135</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for match in Array(<b></b>matchResults().reverse()) {</td><tr><td onclick='document.location.href="SwiftRegex.html#157_16"; return false;'>SwiftRegex.swift:157</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>matchResults( options ).map { $0.range }</td><tr><td onclick='document.location.href="SwiftRegex.html#161_16"; return false;'>SwiftRegex.swift:161</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>matchResults( options ).map { self.substring($0.range) }</td><tr><td onclick='document.location.href="SwiftRegex.html#165_16"; return false;'>SwiftRegex.swift:165</td><td> &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>matchResults( options ).map { self.groupsForMatch($0) }</td><tr><td onclick='document.location.href="SwiftRegex.html#170_22"; return false;'>SwiftRegex.swift:170</td><td> &nbsp; &nbsp; &nbsp; &nbsp;for match in <b></b>matchResults(options) {</td></table></span></a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> [<span class='typeidentifier'>NSTextCheckingResult</span>] {
0153            <span class='keyword'>return</span> <span class='identifier'>regex</span>.<span class='identifier'>matchesInString</span>( <span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='identifier'>options</span> ?? <span class='identifier'>NSMatchingOptions</span>(<span class='identifier'>rawValue</span>: <span class='number'>0</span>), <span class='identifier'>range</span>: <span class='identifier'><a name='153_116' href='SwiftRegex.html#80_36'>targetRange<a></span> ) <span class='keyword'>as</span> [<span class='typeidentifier'>NSTextCheckingResult</span>]
0154        }
0155        
0156        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='156_17'>ranges</a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> [<span class='typeidentifier'>NSRange</span>] {
0157            <span class='keyword'>return</span> <span class='identifier'><a name='157_16' href='SwiftRegex.html#152_10'>matchResults<a></span>( <span class='identifier'>options</span> ).<span class='identifier'>map</span> { <span class='identifier'>$0</span>.<span class='identifier'>range</span> }
0158        }
0159    
0160        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='160_17'>matches</a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> [<span class='typeidentifier'>String</span>] {
0161            <span class='keyword'>return</span> <span class='identifier'><a name='161_16' href='SwiftRegex.html#152_10'>matchResults<a></span>( <span class='identifier'>options</span> ).<span class='identifier'>map</span> { <span class='keyword'>self</span>.<span class='identifier'><a name='161_51' href='SwiftRegex.html#84_16'>substring<a></span>(<span class='identifier'>$0</span>.<span class='identifier'>range</span>) }
0162        }
0163        
0164        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='164_17'>allGroups</a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> [[<span class='typeidentifier'>String</span>]] {
0165            <span class='keyword'>return</span> <span class='identifier'><a name='165_16' href='SwiftRegex.html#152_10'>matchResults<a></span>( <span class='identifier'>options</span> ).<span class='identifier'>map</span> { <span class='keyword'>self</span>.<span class='identifier'><a name='165_51' href='SwiftRegex.html#108_10'>groupsForMatch<a></span>(<span class='identifier'>$0</span>) }
0166        }
0167    
0168        <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='168_17'>dictionary</a></span>( <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> <span class='typeidentifier'>Dictionary</span><<span class='typeidentifier'>String</span>,<span class='typeidentifier'>String</span>> {
0169            <span class='keyword'>var</span> <span class='identifier'>out</span> = <span class='identifier'>Dictionary</span><<span class='typeidentifier'>String</span>,<span class='typeidentifier'>String</span>>()
0170            <span class='keyword'>for</span> <span class='identifier'>match</span> <span class='keyword'>in</span> <span class='identifier'><a name='170_22' href='SwiftRegex.html#152_10'>matchResults<a></span>(<span class='identifier'>options</span>) {
0171                <span class='identifier'>out</span>[<span class='identifier'><a name='171_17' href='SwiftRegex.html#84_16'>substring<a></span>(<span class='identifier'>match</span>.<span class='identifier'>rangeAtIndex</span>(<span class='number'>1</span>))] =
0172                    <span class='identifier'><a name='172_17' href='SwiftRegex.html#84_16'>substring<a></span>(<span class='identifier'>match</span>.<span class='identifier'>rangeAtIndex</span>(<span class='number'>2</span>))
0173            }
0174            <span class='keyword'>return</span> <span class='identifier'>out</span>
0175        }
0176    
0177        <span class='keyword'>func</span> <span class='identifier'><a name='177_10' href='#' onclick='return expand(this);'>substituteMatches<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#281_17"; return false;'>SwiftRegex.swift:281</td><td> &nbsp; &nbsp;return left.<b></b>substituteMatches( {</td><tr><td onclick='document.location.href="SwiftRegex.html#290_17"; return false;'>SwiftRegex.swift:290</td><td> &nbsp; &nbsp;return left.<b></b>substituteMatches( {</td><tr><td onclick='document.location.href="SwiftRegex.html#303_17"; return false;'>SwiftRegex.swift:303</td><td> &nbsp; &nbsp;return left.<b></b>substituteMatches( {</td><tr><td onclick='document.location.href="SwiftRegex.html#310_17"; return false;'>SwiftRegex.swift:310</td><td> &nbsp; &nbsp;return left.<b></b>substituteMatches( {</td></table></span></a></span>( <span class='identifier'>substitution</span>: (<span class='typeidentifier'>NSTextCheckingResult</span>, <span class='typeidentifier'>UnsafeMutablePointer</span><<span class='typeidentifier'>ObjCBool</span>>) -> <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>Bool</span> {
0178            <span class='keyword'>let</span> <span class='identifier'>out</span> = <span class='identifier'>NSMutableString</span>()
0179            <span class='keyword'>var</span> <span class='identifier'>pos</span> = <span class='number'>0</span>
0180    
0181            <span class='identifier'>regex</span>.<span class='identifier'>enumerateMatchesInString</span>( <span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='identifier'>NSMatchingOptions</span>(<span class='identifier'>rawValue</span>: <span class='number'>0</span>), <span class='identifier'>range</span>: <span class='identifier'><a name='181_107' href='SwiftRegex.html#80_36'>targetRange<a></span> ) {
0182                (<span class='identifier'>match</span>: <span class='typeidentifier'>NSTextCheckingResult</span>?, <span class='identifier'>flags</span>: <span class='typeidentifier'>NSMatchingFlags</span>, <span class='identifier'>stop</span>: <span class='typeidentifier'>UnsafeMutablePointer</span><<span class='typeidentifier'>ObjCBool</span>>) <span class='keyword'>in</span>
0183    
0184                <span class='keyword'>let</span> <span class='identifier'>matchRange</span> = <span class='identifier'>match</span>!.<span class='identifier'>range</span>
0185                <span class='identifier'>out</span>.<span class='identifier'>appendString</span>( <span class='keyword'>self</span>.<span class='identifier'><a name='185_36' href='SwiftRegex.html#84_16'>substring<a></span>( <span class='identifier'>NSRange</span>(<span class='identifier'>location</span>:<span class='identifier'>pos</span>, <span class='identifier'>length</span>:<span class='identifier'>matchRange</span>.<span class='identifier'>location</span>-<span class='identifier'>pos</span>) ) )
0186                <span class='identifier'>out</span>.<span class='identifier'>appendString</span>( <span class='identifier'>substitution</span>(<span class='identifier'>match</span>!, <span class='identifier'>stop</span>) )
0187                <span class='identifier'>pos</span> = <span class='identifier'>matchRange</span>.<span class='identifier'>location</span> + <span class='identifier'>matchRange</span>.<span class='identifier'>length</span>
0188            }
0189    
0190            <span class='identifier'>out</span>.<span class='identifier'>appendString</span>( <span class='identifier'><a name='190_27' href='SwiftRegex.html#84_16'>substring<a></span>( <span class='identifier'>NSRange</span>(<span class='identifier'>location</span>:<span class='identifier'>pos</span>, <span class='identifier'>length</span>:<span class='identifier'><a name='190_67' href='SwiftRegex.html#80_36'>targetRange<a></span>.<span class='identifier'>length</span>-<span class='identifier'>pos</span>) ) )
0191    
0192            <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'>mutableTarget</span> = <span class='identifier'>target</span> <span class='keyword'>as</span>? <span class='typeidentifier'>NSMutableString</span> {
0193                <span class='keyword'>if</span> <span class='identifier'>out</span> != <span class='identifier'>target</span> {
0194                    <span class='identifier'>mutableTarget</span>.<span class='identifier'>setString</span>(<span class='identifier'>out</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>)
0195                    <span class='keyword'>return</span> <span class='keyword'>true</span>
0196                }
0197            } <span class='keyword'>else</span> {
0198                <span class='identifier'><a name='198_13' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>.<span class='identifier'><a name='198_24' href='SwiftRegex.html#42_16'>failure<a></span>(<span class='string'>"Modify on non-mutable"</span>)
0199            }
0200            <span class='keyword'>return</span> <span class='keyword'>false</span>
0201    
0202        }
0203    
0204        <span class='keyword'>func</span> <span class='identifier'><a name='204_10' href='#' onclick='return expand(this);'>replaceWith<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#148_20"; return false;'>SwiftRegex.swift:148</td><td> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return <b></b>replaceWith( template ) as String</td></table></span></a></span>( <span class='identifier'>template</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='typeidentifier'>NSMatchingOptions</span>? = <span class='keyword'>nil</span> ) -> <span class='typeidentifier'>NSMutableString</span> {
0205            <span class='keyword'>let</span> <span class='identifier'>mutable</span> = <span class='comment'>/*target as? NSMutableString ??*/</span> <span class='identifier'><a name='205_57' href='SwiftRegex.html#264_13'>RegexMutable<a></span>( <span class='identifier'>target</span> )
0206            <span class='identifier'>regex</span>.<span class='identifier'>replaceMatchesInString</span>( <span class='identifier'>mutable</span>, <span class='identifier'>options</span>: <span class='identifier'>options</span> ?? <span class='identifier'>NSMatchingOptions</span>(<span class='identifier'>rawValue</span>: <span class='number'>0</span>), <span class='identifier'>range</span>: <span class='identifier'><a name='206_107' href='SwiftRegex.html#80_36'>targetRange<a></span>, <span class='identifier'>withTemplate</span>: <span class='identifier'>template</span> )
0207            <span class='keyword'>return</span> <span class='identifier'>mutable</span>
0208        }
0209    
0210    <span class='comment'>/* removed Beta6
0211        public func __conversion() -> Bool {
0212            return doesMatch()
0213        }
0214    
0215        public func __conversion() -> NSRange {
0216            return range()
0217        }
0218    
0219        public func __conversion() -> String {
0220            return match()
0221        }
0222    
0223        public func __conversion() -> [String] {
0224            return matches()
0225        }
0226    
0227        public func __conversion() -> [[String]] {
0228            return allGroups()
0229        }
0230    
0231        public func __conversion() -> [String:String] {
0232            return dictionary()
0233        }
0234    */</span>
0235        <span class='builtin'>public</span> <span class='keyword'>var</span> <span class='identifier'><a name='235_16'>boolValue</a></span>: <span class='typeidentifier'>Bool</span> {
0236            <span class='keyword'>return</span> <span class='identifier'><a name='236_16' href='SwiftRegex.html#92_17'>doesMatch<a></span>()
0237        }
0238    }
0239    
0240    <span class='keyword'>extension</span> <span class='typeidentifier'>NSString</span> {
0241        <span class='builtin'>public</span> <span class='keyword'><a name='241_12'>subscript</a></span>( <span class='identifier'>pattern</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='typeidentifier'>NSRegularExpressionOptions</span> ) -> <span class='typeidentifier'>SwiftRegex</span> {
0242            <span class='keyword'>return</span> <span class='identifier'><a name='242_16' href='SwiftRegex.html#25_5'>SwiftRegex<a></span>( <span class='identifier'>target</span>: <span class='keyword'>self</span>, <span class='identifier'>pattern</span>: <span class='identifier'>pattern</span>, <span class='identifier'>options</span>: <span class='identifier'>options</span> )
0243        }
0244    }
0245    
0246    <span class='keyword'>extension</span> <span class='typeidentifier'>String</span> {
0247        <span class='builtin'>public</span> <span class='keyword'><a name='247_12'>subscript</a></span>( <span class='identifier'>pattern</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>options</span>: <span class='typeidentifier'>NSRegularExpressionOptions</span> ) -> <span class='typeidentifier'>SwiftRegex</span> {
0248            <span class='keyword'>return</span> <span class='identifier'><a name='248_16' href='SwiftRegex.html#25_5'>SwiftRegex<a></span>( <span class='identifier'>target</span>: <span class='keyword'>self</span>, <span class='identifier'>pattern</span>: <span class='identifier'>pattern</span>, <span class='identifier'>options</span>: <span class='identifier'>options</span> )
0249        }
0250    }
0251    
0252    <span class='keyword'>extension</span> <span class='typeidentifier'>NSString</span> {
0253        <span class='builtin'>public</span> <span class='keyword'><a name='253_12' href='#' onclick='return expand(this);'>subscript<span class='references'><table><tr><td onclick='document.location.href="main.html#365_13"; return false;'>main.swift:365</td><td> &nbsp; &nbsp; &nbsp; &nbsp;htmp<b></b>["(^|\\n)"] ~= { (group: String) in</td><tr><td onclick='document.location.href="SwiftRegex.html#76_16"; return false;'>SwiftRegex.swift:76</td><td> &nbsp; &nbsp; &nbsp; &nbsp;patched<b></b>[pattern] ~= template</td></table></span></a></span>( <span class='identifier'>pattern</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>SwiftRegex</span> {
0254            <span class='keyword'>return</span> <span class='identifier'><a name='254_16' href='SwiftRegex.html#25_5'>SwiftRegex<a></span>( <span class='identifier'>target</span>: <span class='keyword'>self</span>, <span class='identifier'>pattern</span>: <span class='identifier'>pattern</span> )
0255        }
0256    }
0257    
0258    <span class='keyword'>extension</span> <span class='typeidentifier'>String</span> {
0259        <span class='builtin'>public</span> <span class='keyword'><a name='259_12' href='#' onclick='return expand(this);'>subscript<span class='references'><table><tr><td onclick='document.location.href="main.html#82_45"; return false;'>main.swift:82</td><td> &nbsp; &nbsp;if storingLog == nil, let symroot = line<b></b>[" &nbsp; &nbsp;SYMROOT = ([^\n]+)"][1] where !filemgr.fileExistsAtPath( symroot ) {</td><tr><td onclick='document.location.href="main.html#88_21"; return false;'>main.swift:88</td><td> &nbsp; &nbsp;let regex = line<b></b>["-primary-file (?:\"([^\"]+)\"|(\\S+)) "]</td><tr><td onclick='document.location.href="SwiftRegex.html#43_44"; return false;'>SwiftRegex.swift:43</td><td> &nbsp; &nbsp; &nbsp; &nbsp;NSLog( "*** SwiftRegex: \(message)"<b></b>["%"]["%%"] )</td></table></span></a></span>( <span class='identifier'>pattern</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>SwiftRegex</span> {
0260            <span class='keyword'>return</span> <span class='identifier'><a name='260_16' href='SwiftRegex.html#25_5'>SwiftRegex<a></span>( <span class='identifier'>target</span>: <span class='keyword'>self</span>, <span class='identifier'>pattern</span>: <span class='identifier'>pattern</span> )
0261        }
0262    }
0263    
0264    <span class='builtin'>public</span> <span class='keyword'>func</span> <span class='identifier'><a name='264_13' href='#' onclick='return expand(this);'>RegexMutable<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#205_57"; return false;'>SwiftRegex.swift:205</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let mutable = /*target as? NSMutableString ??*/ <b></b>RegexMutable( target )</td></table></span></a></span>( <span class='identifier'>string</span>: <span class='typeidentifier'>NSString</span> ) -> <span class='typeidentifier'>NSMutableString</span> {
0265        <span class='keyword'>return</span> <span class='identifier'>NSMutableString</span>( <span class='identifier'>string</span>: <span class='identifier'>string</span> )
0266    }
0267    
0268    <span class='comment'>// for switch
0269    </span><span class='builtin'>public</span> <span class='keyword'>var</span> <span class='identifier'><a name='269_12' href='#' onclick='return expand(this);'>lastRegexMatchGroups<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#273_9"; return false;'>SwiftRegex.swift:273</td><td> &nbsp; &nbsp; &nbsp; &nbsp;<b></b>lastRegexMatchGroups = groups.map { $0 != regexNoGroup ? $0 : nil }</td></table></span></a></span>: [<span class='typeidentifier'>String</span>!]!
0270    
0271    <span class='builtin'>public</span> <span class='keyword'>func</span> ~= ( <span class='identifier'>left</span>: <span class='typeidentifier'>String</span>, <span class='identifier'>right</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>Bool</span> {
0272        <span class='keyword'>if</span> <span class='keyword'>let</span> <span class='identifier'>groups</span> = <span class='identifier'><a name='272_21' href='SwiftRegex.html#25_5'>SwiftRegex<a></span>( <span class='identifier'>target</span>: <span class='identifier'>right</span>, <span class='identifier'>pattern</span>: <span class='identifier'>left</span> ).<span class='identifier'><a name='272_64' href='SwiftRegex.html#104_17'>groups<a></span>() {
0273            <span class='identifier'><a name='273_9' href='SwiftRegex.html#269_12'>lastRegexMatchGroups<a></span> = <span class='identifier'>groups</span>.<span class='identifier'>map</span> { <span class='identifier'>$0</span> != <span class='identifier'>regexNoGroup</span> ? <span class='identifier'>$0</span> : <span class='keyword'>nil</span> }
0274            <span class='keyword'>return</span> <span class='keyword'>true</span>
0275        }
0276        <span class='keyword'>return</span> <span class='keyword'>false</span>
0277    }
0278    
0279    <span class='comment'>// for replacements
0280    </span><span class='builtin'>public</span> <span class='keyword'>func</span> ~= ( <span class='identifier'>left</span>: <span class='typeidentifier'><a name='280_24' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>, <span class='identifier'>right</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>Bool</span> {
0281        <span class='keyword'>return</span> <span class='identifier'>left</span>.<span class='identifier'><a name='281_17' href='SwiftRegex.html#177_10'>substituteMatches<a></span>( {
0282            (<span class='identifier'>match</span>: <span class='typeidentifier'>NSTextCheckingResult</span>, <span class='identifier'>stop</span>: <span class='typeidentifier'>UnsafeMutablePointer</span><<span class='typeidentifier'>ObjCBool</span>>) <span class='keyword'>in</span>
0283            <span class='keyword'>return</span> <span class='identifier'>left</span>.<span class='identifier'>regex</span>.<span class='identifier'>replacementStringForResult</span>( <span class='identifier'>match</span>,
0284                <span class='identifier'>inString</span>: <span class='identifier'>left</span>.<span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>offset</span>: <span class='number'>0</span>, <span class='identifier'>template</span>: <span class='identifier'>right</span> )
0285        } )
0286    }
0287    
0288    <span class='builtin'>public</span> <span class='keyword'>func</span> ~= ( <span class='identifier'>left</span>: <span class='typeidentifier'><a name='288_24' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>, <span class='identifier'>right</span>: [<span class='typeidentifier'>String</span>] ) -> <span class='typeidentifier'>Bool</span> {
0289        <span class='keyword'>var</span> <span class='identifier'>matchNumber</span> = <span class='number'>0</span>
0290        <span class='keyword'>return</span> <span class='identifier'>left</span>.<span class='identifier'><a name='290_17' href='SwiftRegex.html#177_10'>substituteMatches<a></span>( {
0291            (<span class='identifier'>match</span>: <span class='typeidentifier'>NSTextCheckingResult</span>, <span class='identifier'>stop</span>: <span class='typeidentifier'>UnsafeMutablePointer</span><<span class='typeidentifier'>ObjCBool</span>>) <span class='keyword'>in</span>
0292    
0293            <span class='keyword'>if</span> ++<span class='identifier'>matchNumber</span> == <span class='identifier'>right</span>.<span class='identifier'>count</span> {
0294                <span class='identifier'>stop</span>.<span class='identifier'>memory</span> = <span class='keyword'>true</span>
0295            }
0296    
0297            <span class='keyword'>return</span> <span class='identifier'>left</span>.<span class='identifier'>regex</span>.<span class='identifier'>replacementStringForResult</span>( <span class='identifier'>match</span>,
0298                <span class='identifier'>inString</span>: <span class='identifier'>left</span>.<span class='identifier'>target</span> <span class='keyword'>as</span> <span class='typeidentifier'>String</span>, <span class='identifier'>offset</span>: <span class='number'>0</span>, <span class='identifier'>template</span>: <span class='identifier'>right</span>[<span class='identifier'>matchNumber</span>-<span class='number'>1</span>] )
0299        } )
0300    }
0301    
0302    <span class='builtin'>public</span> <span class='keyword'>func</span> ~= ( <span class='identifier'>left</span>: <span class='typeidentifier'><a name='302_24' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>, <span class='identifier'>right</span>: (<span class='typeidentifier'>String</span>) -> <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>Bool</span> {
0303        <span class='keyword'>return</span> <span class='identifier'>left</span>.<span class='identifier'><a name='303_17' href='SwiftRegex.html#177_10'>substituteMatches<a></span>( {
0304            (<span class='identifier'>match</span>: <span class='typeidentifier'>NSTextCheckingResult</span>, <span class='identifier'>stop</span>: <span class='typeidentifier'>UnsafeMutablePointer</span><<span class='typeidentifier'>ObjCBool</span>>) <span class='keyword'>in</span>
0305            <span class='keyword'>return</span> <span class='identifier'>right</span>( <span class='identifier'>left</span>.<span class='identifier'><a name='305_28' href='SwiftRegex.html#84_16'>substring<a></span>(<span class='identifier'>match</span>.<span class='identifier'>range</span>) )
0306        } )
0307    }
0308    
0309    <span class='builtin'>public</span> <span class='keyword'>func</span> ~= ( <span class='identifier'>left</span>: <span class='typeidentifier'><a name='309_24' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>, <span class='identifier'>right</span>: ([<span class='typeidentifier'>String</span>]) -> <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>Bool</span> {
0310        <span class='keyword'>return</span> <span class='identifier'>left</span>.<span class='identifier'><a name='310_17' href='SwiftRegex.html#177_10'>substituteMatches<a></span>( {
0311            (<span class='identifier'>match</span>: <span class='typeidentifier'>NSTextCheckingResult</span>, <span class='identifier'>stop</span>: <span class='typeidentifier'>UnsafeMutablePointer</span><<span class='typeidentifier'>ObjCBool</span>>) <span class='keyword'>in</span>
0312            <span class='keyword'>return</span> <span class='identifier'>right</span>( <span class='identifier'>left</span>.<span class='identifier'><a name='312_28' href='SwiftRegex.html#108_10'>groupsForMatch<a></span>(<span class='identifier'>match</span>) )
0313        } )
0314    }
0315    
0316    <span class='builtin'>public</span> <span class='keyword'>class</span> <span class='identifier'><a name='316_14' href='#' onclick='return expand(this);'>RegexFile<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#23_20"; return false;'>SwiftRegex.swift:23</td><td> &nbsp; &nbsp;var regexFile: <b></b>RegexFile?</td></table></span></a></span> {
0317    
0318        <span class='keyword'>let</span> <span class='identifier'><a name='318_9' href='#' onclick='return expand(this);'>filepath<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#322_9"; return false;'>SwiftRegex.swift:322</td><td> &nbsp; &nbsp; &nbsp; &nbsp;<b></b>filepath = path</td><tr><td onclick='document.location.href="SwiftRegex.html#333_30"; return false;'>SwiftRegex.swift:333</td><td> &nbsp; &nbsp; &nbsp; &nbsp;SwiftRegex.saveFile( <b></b>filepath, newContents: contents )</td></table></span></a></span>: <span class='typeidentifier'>String</span>
0319        <span class='keyword'>let</span> <span class='identifier'><a name='319_9' href='#' onclick='return expand(this);'>contents<span class='references'><table><tr><td onclick='document.location.href="SwiftRegex.html#323_9"; return false;'>SwiftRegex.swift:323</td><td> &nbsp; &nbsp; &nbsp; &nbsp;<b></b>contents = SwiftRegex.loadFile( path )</td><tr><td onclick='document.location.href="SwiftRegex.html#327_41"; return false;'>SwiftRegex.swift:327</td><td> &nbsp; &nbsp; &nbsp; &nbsp;let regex = SwiftRegex( target: <b></b>contents, pattern: pattern )</td><tr><td onclick='document.location.href="SwiftRegex.html#333_53"; return false;'>SwiftRegex.swift:333</td><td> &nbsp; &nbsp; &nbsp; &nbsp;SwiftRegex.saveFile( filepath, newContents: <b></b>contents )</td></table></span></a></span>: <span class='typeidentifier'>NSMutableString</span>!
0320    
0321        <span class='builtin'>public</span> <span class='keyword'><a name='321_12'>init</a></span>( <span class='keyword'>_</span> <span class='identifier'>path</span>: <span class='typeidentifier'>String</span> ) {
0322            <span class='identifier'>filepath</span> = <span class='identifier'>path</span>
0323            <span class='identifier'>contents</span> = <span class='identifier'><a name='323_20' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>.<span class='identifier'><a name='323_31' href='SwiftRegex.html#47_23'>loadFile<a></span>( <span class='identifier'>path</span> )
0324        }
0325    
0326        <span class='builtin'>public</span> <span class='keyword'><a name='326_12'>subscript</a></span>( <span class='identifier'>pattern</span>: <span class='typeidentifier'>String</span> ) -> <span class='typeidentifier'>SwiftRegex</span> {
0327            <span class='keyword'>let</span> <span class='identifier'>regex</span> = <span class='identifier'><a name='327_21' href='SwiftRegex.html#25_5'>SwiftRegex<a></span>( <span class='identifier'>target</span>: <span class='identifier'>contents</span>, <span class='identifier'>pattern</span>: <span class='identifier'>pattern</span> )
0328            <span class='identifier'>regex</span>.<span class='identifier'>regexFile</span> = <span class='keyword'>self</span> <span class='comment'>// retains until after substitution
0329    </span>        <span class='keyword'>return</span> <span class='identifier'>regex</span>
0330        }
0331    
0332        <span class='keyword'><a name='332_5'>deinit</a></span> {
0333            <span class='identifier'><a name='333_9' href='SwiftRegex.html#19_14'>SwiftRegex<a></span>.<span class='identifier'><a name='333_20' href='SwiftRegex.html#59_23'>saveFile<a></span>( <span class='identifier'>filepath</span>, <span class='identifier'>newContents</span>: <span class='identifier'>contents</span> )
0334        }
0335    
0336    }
0337    