<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>
0001    <span class='comment'><a name='1_1'>//
0002    </a></span><span class='comment'><a name='2_1'>//  main.swift
0003    </a></span><span class='comment'><a name='3_1'>//  siteify
0004    </a></span><span class='comment'><a name='4_1'>//
0005    </a></span><span class='comment'><a name='5_1'>//  Created by John Holdsworth on 16/02/2016.
0006    </a></span><span class='comment'><a name='6_1'>//  Copyright Â© 2016 John Holdsworth. All rights reserved.
0007    </a></span><span class='comment'><a name='7_1'>//
0008    </a></span><span class='comment'><a name='8_1'>//  $Id: //depot/siteify/siteify/main.swift#34 $
0009    </a></span><span class='comment'><a name='9_1'>//
0010    </a></span><span class='comment'><a name='10_1'>//  Repo: </a></span><span class='url'><a href='https://github.com/johnno1962/siteify'>https://github.com/johnno1962/siteify</a></span><span class='comment'><a name='10_48'>
0011    </a></span><span class='comment'><a name='11_1'>//
0012    </a></span>
0013    <span class='keyword'><a name='13_1'>import</a></span> <span class='identifier'><a name='13_8'>Foundation</a></span>
0014    
0015    <span class='keyword'><a name='15_1'>let</a></span> <span class='identifier'><a name='15_5' href='#' title='s:v7siteify7filemgrCSo13NSFileManager' onclick='return expand(this);'>filemgr<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#27_9"; return false;'>main.swift:27</td><td><pre>        <b title='source.lang.swift.ref.var.global'>filemgr</b>.createFileAtPath( path, contents:nil, attributes:nil )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#51_16"; return false;'>main.swift:51</td><td><pre>            if <b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( failedLog ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#52_22"; return false;'>main.swift:52</td><td><pre>                try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.removeItemAtPath( failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#57_22"; return false;'>main.swift:57</td><td><pre>                try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.moveItemAtPath( storedLog, toPath: failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#67_4"; return false;'>main.swift:67</td><td><pre>if <b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( storedLog ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#70_9"; return false;'>main.swift:70</td><td><pre>else if <b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( "Package.swift" ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#71_8"; return false;'>main.swift:71</td><td><pre>    if <b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( ".build" ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#72_14"; return false;'>main.swift:72</td><td><pre>        try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.removeItemAtPath( ".build" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#91_83"; return false;'>main.swift:91</td><td><pre>    if storingLog == nil, let symroot = line["^    SYMROOT = ([^\n]+)"][1] where !<b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( symroot ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#93_14"; return false;'>main.swift:93</td><td><pre>        try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.removeItemAtPath( storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#211_5"; return false;'>main.swift:211</td><td><pre>if !<b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( "html" ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_10"; return false;'>main.swift:212</td><td><pre>    try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.createDirectoryAtPath( "html", withIntermediateDirectories: false, attributes: nil )</pre></td></table></span></a></span> = <span class='identifier'><a name='15_15' title='c:objc(cs)NSFileManager'>NSFileManager</a></span>.<span class='identifier'><a name='15_29' title='c:objc(cs)NSFileManager(cm)defaultManager'>defaultManager</a></span>()
0016    <span class='keyword'><a name='16_1'>let</a></span> <span class='identifier'><a name='16_5' href='#' title='s:v7siteify2SKCS_9SourceKit' onclick='return expand(this);'>SK<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#103_40"; return false;'>main.swift:103</td><td><pre>        compilations.append( (primary, <b title='source.lang.swift.ref.var.global'>SK</b>.array( SK.compilerArgs( line ) ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#103_50"; return false;'>main.swift:103</td><td><pre>        compilations.append( (primary, SK.array( <b title='source.lang.swift.ref.var.global'>SK</b>.compilerArgs( line ) ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#132_20"; return false;'>main.swift:132</td><td><pre>        let resp = <b title='source.lang.swift.ref.var.global'>SK</b>.indexFile( file, compilerArgs: argv )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#134_9"; return false;'>main.swift:134</td><td><pre>        <b title='source.lang.swift.ref.var.global'>SK</b>.recurseOver( SK.entitiesID, resp: dict, block: { dict in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#134_25"; return false;'>main.swift:134</td><td><pre>        SK.recurseOver( <b title='source.lang.swift.ref.var.global'>SK</b>.entitiesID, resp: dict, block: { dict in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#135_48"; return false;'>main.swift:135</td><td><pre>            if let usrString = dict.getString( <b title='source.lang.swift.ref.var.global'>SK</b>.usrID ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#136_48"; return false;'>main.swift:136</td><td><pre>                let kind = dict.getUUIDString( <b title='source.lang.swift.ref.var.global'>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#138_40"; return false;'>main.swift:138</td><td><pre>                    line: dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.lineID ),</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#139_39"; return false;'>main.swift:139</td><td><pre>                    col: dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.colID ),</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#160_34"; return false;'>main.swift:160</td><td><pre>    if let usr = dict.getString( <b title='source.lang.swift.ref.var.global'>SK</b>.usrID ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#259_20"; return false;'>main.swift:259</td><td><pre>        let resp = <b title='source.lang.swift.ref.var.global'>SK</b>.syntaxMap( file, compilerArgs: argv )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#261_66"; return false;'>main.swift:261</td><td><pre>        let map = sourcekitd_variant_dictionary_get_value( dict, <b title='source.lang.swift.ref.var.global'>SK</b>.syntaxID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#263_39"; return false;'>main.swift:263</td><td><pre>            let offset = dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.offsetID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#264_39"; return false;'>main.swift:264</td><td><pre>            let length = dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.lengthID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#272_44"; return false;'>main.swift:272</td><td><pre>            let kind = dict.getUUIDString( <b title='source.lang.swift.ref.var.global'>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#278_75"; return false;'>main.swift:278</td><td><pre>            else if let dict = entities[ent], usrString = dict.getString( <b title='source.lang.swift.ref.var.global'>SK</b>.usrID ) {</pre></td></table></span></a></span> = <span class='identifier'><a name='16_10' href='SourceKit.html#97_5' title='s:FC7siteify9SourceKitcFMS0_FT_S0_'>SourceKit</a></span>()
0017    <span class='identifier'><a name='17_1' href='SourceKit.html#15_5' title='s:v7siteify5isTTYSb'>isTTY</a></span> = <span class='keyword'><a name='17_9'>false</a></span>
0018    
0019    <span class='keyword'><a name='19_1'>func</a></span> <span class='identifier'><a name='19_6' href='#' title='s:F7siteify8progressFSST_' onclick='return expand(this);'>progress<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#105_13"; return false;'>main.swift:105</td><td><pre>            <b title='source.lang.swift.ref.function.free'>progress</b>( "Built \(primary)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#129_5"; return false;'>main.swift:129</td><td><pre>    <b title='source.lang.swift.ref.function.free'>progress</b>( "Indexing \(fileno)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#234_9"; return false;'>main.swift:234</td><td><pre>        <b title='source.lang.swift.ref.function.free'>progress</b>( "Saving \(fileno)/\(compilations.count) html/\(filename)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#345_1"; return false;'>main.swift:345</td><td><pre><b title='source.lang.swift.ref.function.free'>progress</b>( "Site built, open ./html/index.html in your browser.\n" )</pre></td></table></span></a></span>( <span class='identifier'><a name='19_16'>str</a></span>: <span class='typeidentifier'><a name='19_21' title='s:SS'>String</a></span> ) {
0020        <span class='identifier'><a name='20_5' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='20_12'>"\u{001b}[2K"</a></span>+<span class='identifier'><a name='20_26'>str</a></span>, <span class='identifier'><a name='20_31'>separator</a></span>: <span class='string'><a name='20_42'>""</a></span>, <span class='identifier'><a name='20_46'>terminator</a></span>: <span class='string'><a name='20_58'>"\r"</a></span> )
0021        <span class='identifier'><a name='21_5' title='c:@F@fflush'>fflush</a></span>( <span class='identifier'><a name='21_13' title='s:v6Darwin6stdoutGVSs20UnsafeMutablePointerVSC7__sFILE_'>stdout</a></span> )
0022    }
0023    
0024    <span class='keyword'><a name='24_1'>extension</a></span> <span class='typeidentifier'><a name='24_11' title='c:objc(cs)NSFileHandle'>NSFileHandle</a></span> {
0025    
0026        <span class='builtin'><a name='26_5'>convenience</a></span> <span class='keyword'><a name='26_17' href='#' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__' onclick='return expand(this);'>init<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#76_18"; return false;'>main.swift:76</td><td><pre>    storingLog = <b title='source.lang.swift.ref.function.constructor'>NSFileHandle</b>( createForWritingAtPath: storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_18"; return false;'>main.swift:84</td><td><pre>    storingLog = <b title='source.lang.swift.ref.function.constructor'>NSFileHandle</b>( createForWritingAtPath: storedLog )</pre></td></table></span></a></span>?( <span class='identifier'><a name='26_24'>createForWritingAtPath</a></span> <span class='identifier'><a name='26_47'>path</a></span>: <span class='typeidentifier'><a name='26_53' title='s:SS'>String</a></span> ) {
0027            <span class='identifier'><a name='27_9' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='27_17' title='c:objc(cs)NSFileManager(im)createFileAtPath:contents:attributes:'>createFileAtPath</a></span>( <span class='identifier'><a name='27_35'>path</a></span>, <span class='identifier'><a name='27_41'>contents</a></span>:<span class='keyword'><a name='27_50'>nil</a></span>, <span class='identifier'><a name='27_55'>attributes</a></span>:<span class='keyword'><a name='27_66'>nil</a></span> )
0028            <span class='keyword'><a name='28_9'>self</a></span>.<span class='keyword'><a name='28_14' title='c:objc(cs)NSFileHandle(cm)fileHandleForWritingAtPath:'>init</a></span>( <span class='identifier'><a name='28_20'>forWritingAtPath</a></span>: <span class='identifier'><a name='28_38'>path</a></span> )
0029        }
0030    
0031        <span class='keyword'><a name='31_5'>func</a></span> <span class='identifier'><a name='31_10' href='#' title='s:FE7siteifyCSo12NSFileHandle11writeStringFS0_FSST_' onclick='return expand(this);'>writeString<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#109_17"; return false;'>main.swift:109</td><td><pre>    storingLog?.<b title='source.lang.swift.ref.function.method.instance'>writeString</b>( line+"\n" )</pre></td></table></span></a></span>( <span class='identifier'><a name='31_23'>str</a></span>: <span class='typeidentifier'><a name='31_28' title='s:SS'>String</a></span> ) {
0032            <span class='identifier'><a name='32_9'>str</a></span>.<span class='identifier'><a name='32_13' title='s:FSS11withCStringurFSSFzFzGVSs13UnsafePointerVSs4Int8_q_q_'>withCString</a></span> { <span class='identifier'><a name='32_27'>bytes</a></span> <span class='keyword'><a name='32_33'>in</a></span>
0033                <span class='identifier'><a name='33_13' title='c:objc(cs)NSFileHandle(im)writeData:'>writeData</a></span>( <span class='identifier'><a name='33_24' title='c:objc(cs)NSData(im)initWithBytesNoCopy:length:freeWhenDone:'>NSData</a></span>( <span class='identifier'><a name='33_32'>bytesNoCopy</a></span>: <span class='identifier'><a name='33_45' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span>&lt;<span class='typeidentifier'><a name='33_66' title='s:Ss4Void'>Void</a></span>>(<span class='identifier'><a name='33_72'>bytes</a></span>),
0034                    <span class='identifier'><a name='34_17'>length</a></span>: <span class='identifier'><a name='34_25' title='s:FSicFMSiFSuSi'>Int</a></span>(<span class='identifier'><a name='34_29'>strlen</a></span>(<span class='identifier'><a name='34_36'>bytes</a></span>)), <span class='identifier'><a name='34_45'>freeWhenDone</a></span>: <span class='keyword'><a name='34_59'>false</a></span> ) )
0035            }
0036        }
0037    
0038    }
0039    
0040    <span class='keyword'><a name='40_1'>let</a></span> <span class='identifier'><a name='40_5' href='#' title='s:v7siteify8buildLogCS_13FileGenerator' onclick='return expand(this);'>buildLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#68_5"; return false;'>main.swift:68</td><td><pre>    <b title='source.lang.swift.ref.var.global'>buildLog</b> = FileGenerator(path: storedLog)!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#74_5"; return false;'>main.swift:74</td><td><pre>    <b title='source.lang.swift.ref.var.global'>buildLog</b> = StatusGenerator( launchPath: "/Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin/swift",</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#83_5"; return false;'>main.swift:83</td><td><pre>    <b title='source.lang.swift.ref.var.global'>buildLog</b> = StatusGenerator( launchPath: "/usr/bin/xcodebuild", arguments: buildargs )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#89_13"; return false;'>main.swift:89</td><td><pre>for line in <b title='source.lang.swift.ref.var.global'>buildLog</b>.sequence {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='40_15' href='LineGenerators.html#51_7' title='s:C7siteify13FileGenerator'>FileGenerator</a></span>
0041    <span class='keyword'><a name='41_1'>let</a></span> <span class='identifier'><a name='41_5' href='#' title='s:v7siteify9storedLogSS' onclick='return expand(this);'>storedLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#57_46"; return false;'>main.swift:57</td><td><pre>                try! filemgr.moveItemAtPath( <b title='source.lang.swift.ref.var.global'>storedLog</b>, toPath: failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#67_30"; return false;'>main.swift:67</td><td><pre>if filemgr.fileExistsAtPath( <b title='source.lang.swift.ref.var.global'>storedLog</b> ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#68_36"; return false;'>main.swift:68</td><td><pre>    buildLog = FileGenerator(path: <b title='source.lang.swift.ref.var.global'>storedLog</b>)!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#76_56"; return false;'>main.swift:76</td><td><pre>    storingLog = NSFileHandle( createForWritingAtPath: <b title='source.lang.swift.ref.var.global'>storedLog</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_56"; return false;'>main.swift:84</td><td><pre>    storingLog = NSFileHandle( createForWritingAtPath: <b title='source.lang.swift.ref.var.global'>storedLog</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#93_40"; return false;'>main.swift:93</td><td><pre>        try! filemgr.removeItemAtPath( <b title='source.lang.swift.ref.var.global'>storedLog</b> )</pre></td></table></span></a></span> = <span class='string'><a name='41_17'>"siteify.log"</a></span>
0042    <span class='keyword'><a name='42_1'>var</a></span> <span class='identifier'><a name='42_5' href='#' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_' onclick='return expand(this);'>storingLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#76_5"; return false;'>main.swift:76</td><td><pre>    <b title='source.lang.swift.ref.var.global'>storingLog</b> = NSFileHandle( createForWritingAtPath: storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_5"; return false;'>main.swift:84</td><td><pre>    <b title='source.lang.swift.ref.var.global'>storingLog</b> = NSFileHandle( createForWritingAtPath: storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#91_8"; return false;'>main.swift:91</td><td><pre>    if <b title='source.lang.swift.ref.var.global'>storingLog</b> == nil, let symroot = line["^    SYMROOT = ([^\n]+)"][1] where !filemgr.fileExistsAtPath( symroot ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#104_12"; return false;'>main.swift:104</td><td><pre>        if <b title='source.lang.swift.ref.var.global'>storingLog</b> != nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#109_5"; return false;'>main.swift:109</td><td><pre>    <b title='source.lang.swift.ref.var.global'>storingLog</b>?.writeString( line+"\n" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#112_1"; return false;'>main.swift:112</td><td><pre><b title='source.lang.swift.ref.var.global'>storingLog</b>?.closeFile()</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='42_17' title='c:objc(cs)NSFileHandle'>NSFileHandle</a></span>? = <span class='keyword'><a name='42_33'>nil</a></span>
0043    <span class='keyword'><a name='43_1'>var</a></span> <span class='identifier'><a name='43_5' href='#' title='s:v7siteify11linkProblemSb' onclick='return expand(this);'>linkProblem<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#56_59"; return false;'>main.swift:56</td><td><pre>            if task.terminationStatus != EXIT_SUCCESS &amp;&amp; !<b title='source.lang.swift.ref.var.global'>linkProblem</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#97_9"; return false;'>main.swift:97</td><td><pre>        <b title='source.lang.swift.ref.var.global'>linkProblem</b> = true</pre></td></table></span></a></span> = <span class='keyword'><a name='43_19'>false</a></span>
0044    
0045    <span class='keyword'><a name='45_1'>class</a></span> <span class='identifier'><a name='45_7' href='#' title='s:C7siteify15StatusGenerator' onclick='return expand(this);'>StatusGenerator<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#74_16"; return false;'>main.swift:74</td><td><pre>    buildLog = <b title='source.lang.swift.ref.class'>StatusGenerator</b>( launchPath: "/Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin/swift",</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#83_16"; return false;'>main.swift:83</td><td><pre>    buildLog = <b title='source.lang.swift.ref.class'>StatusGenerator</b>( launchPath: "/usr/bin/xcodebuild", arguments: buildargs )</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='45_24' href='LineGenerators.html#15_7' title='s:C7siteify13TaskGenerator'>TaskGenerator</a></span> {
0046    
0047        <span class='builtin'><a name='47_5'>override</a></span> <span class='keyword'><a name='47_14'>func</a></span> <span class='identifier'><a name='47_19'>next</a></span>() -> <span class='typeidentifier'><a name='47_29' title='s:SS'>String</a></span>? {
0048            <span class='keyword'><a name='48_9'>let</a></span> <span class='identifier'><a name='48_13'>next</a></span> = <span class='keyword'><a name='48_20'>super</a></span>.<span class='identifier'><a name='48_26' href='LineGenerators.html#67_10' title='s:FC7siteify13FileGenerator4nextFS0_FT_GSqSS_'>next</a></span>()
0049            <span class='keyword'><a name='49_9'>if</a></span> <span class='identifier'><a name='49_12'>next</a></span> == <span class='keyword'><a name='49_20'>nil</a></span> {
0050                <span class='keyword'><a name='50_13'>let</a></span> <span class='identifier'><a name='50_17'>failedLog</a></span> = <span class='string'><a name='50_29'>"failed.log"</a></span>
0051                <span class='keyword'><a name='51_13'>if</a></span> <span class='identifier'><a name='51_16' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='51_24' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='51_42'>failedLog</a></span> ) {
0052                    <span class='keyword'><a name='52_17'>try</a></span>! <span class='identifier'><a name='52_22' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='52_30' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='identifier'><a name='52_48'>failedLog</a></span> )
0053                }
0054    
0055                <span class='identifier'><a name='55_13' href='LineGenerators.html#17_9' title='s:vC7siteify13TaskGenerator4taskCSo6NSTask'>task</a></span>.<span class='identifier'><a name='55_18' title='c:objc(cs)NSTask(im)waitUntilExit'>waitUntilExit</a></span>()
0056                <span class='keyword'><a name='56_13'>if</a></span> <span class='identifier'><a name='56_16' href='LineGenerators.html#17_9' title='s:vC7siteify13TaskGenerator4taskCSo6NSTask'>task</a></span>.<span class='identifier'><a name='56_21' title='c:objc(cs)NSTask(py)terminationStatus'>terminationStatus</a></span> != <span class='identifier'><a name='56_42' title='c:@macro@EXIT_SUCCESS'>EXIT_SUCCESS</a></span> &amp;&amp; !<span class='identifier'><a name='56_59' href='main.html#43_5' title='s:v7siteify11linkProblemSb'>linkProblem</a></span> {
0057                    <span class='keyword'><a name='57_17'>try</a></span>! <span class='identifier'><a name='57_22' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='57_30' title='c:objc(cs)NSFileManager(im)moveItemAtPath:toPath:error:'>moveItemAtPath</a></span>( <span class='identifier'><a name='57_46' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span>, <span class='identifier'><a name='57_57'>toPath</a></span>: <span class='identifier'><a name='57_65'>failedLog</a></span> )
0058                    <span class='identifier'><a name='58_17' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='58_24'>"\nxcodebuild failed, consult ./</a></span>\<span class='string_interpolation_anchor'><a name='58_57'>(</a></span><span class='identifier'><a name='58_58'>failedLog</a></span><span class='string_interpolation_anchor'><a name='58_67'>)</a></span><span class='string'><a name='58_68'>"</a></span> )
0059                    <span class='identifier'><a name='59_17' title='c:@F@exit'>exit</a></span>( <span class='number'><a name='59_23'>1</a></span> )
0060                }
0061            }
0062            <span class='keyword'><a name='62_9'>return</a></span> <span class='identifier'><a name='62_16'>next</a></span>
0063        }
0064    
0065    }
0066    
0067    <span class='keyword'><a name='67_1'>if</a></span> <span class='identifier'><a name='67_4' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='67_12' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='67_30' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> ) {
0068        <span class='identifier'><a name='68_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='68_16' href='LineGenerators.html#57_17' title='s:FC7siteify13FileGeneratorcFMS0_FT4pathSS13lineSeparatorGSqSS__GSqS0__'>FileGenerator</a></span>(<span class='identifier'><a name='68_30'>path</a></span>: <span class='identifier'><a name='68_36' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span>)!
0069    }
0070    <span class='keyword'><a name='70_1'>else</a></span> <span class='keyword'><a name='70_6'>if</a></span> <span class='identifier'><a name='70_9' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='70_17' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='string'><a name='70_35'>"Package.swift"</a></span> ) {
0071        <span class='keyword'><a name='71_5'>if</a></span> <span class='identifier'><a name='71_8' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='71_16' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='string'><a name='71_34'>".build"</a></span> ) {
0072            <span class='keyword'><a name='72_9'>try</a></span>! <span class='identifier'><a name='72_14' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='72_22' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='string'><a name='72_40'>".build"</a></span> )
0073        }
0074        <span class='identifier'><a name='74_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='74_16' href='LineGenerators.html#23_17' title='s:FC7siteify13TaskGeneratorcFMS0_FT10launchPathSS9argumentsGSaSS_9directoryGSqSS_13lineSeparatorGSqSS__S0_'>StatusGenerator</a></span>( <span class='identifier'><a name='74_33'>launchPath</a></span>: <span class='string'><a name='74_45'>"/Library/Developer/Toolchains/swift-latest.xctoolchain/usr/bin/swift"</a></span>,
0075                                    <span class='identifier'><a name='75_33'>arguments</a></span>: [<span class='string'><a name='75_45'>"build"</a></span>, <span class='string'><a name='75_54'>"-v"</a></span>, <span class='string'><a name='75_60'>"-v"</a></span>] )
0076        <span class='identifier'><a name='76_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> = <span class='identifier'><a name='76_18' href='main.html#26_17' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__'>NSFileHandle</a></span>( <span class='identifier'><a name='76_32'>createForWritingAtPath</a></span>: <span class='identifier'><a name='76_56' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0077    }
0078    <span class='keyword'><a name='78_1'>else</a></span> {
0079        <span class='keyword'><a name='79_5'>var</a></span> <span class='identifier'><a name='79_9'>buildargs</a></span> = <span class='identifier'><a name='79_21' title='s:OSs7Process'>Process</a></span>.<span class='identifier'><a name='79_29' title='s:ZvOSs7Process9argumentsGSaSS_'>arguments</a></span>
0080        <span class='string'><a name='80_5'>"/tmp/siteify.XXXX"</a></span>.<span class='identifier'><a name='80_25' title='s:FSS11withCStringurFSSFzFzGVSs13UnsafePointerVSs4Int8_q_q_'>withCString</a></span>( { (<span class='identifier'><a name='80_41'>str</a></span>) <span class='keyword'><a name='80_46'>in</a></span>
0081            <span class='identifier'><a name='81_9'>buildargs</a></span>[<span class='number'><a name='81_19'>0</a></span>] = <span class='string'><a name='81_24'>"SYMROOT="</a></span>+<span class='identifier'><a name='81_35' title='s:SS'>String</a></span>.<span class='identifier'><a name='81_42' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='81_55' title='c:@F@mktemp'>mktemp</a></span>( <span class='identifier'><a name='81_63' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span>&lt;<span class='typeidentifier'><a name='81_84' title='s:VSs4Int8'>Int8</a></span>>(<span class='identifier'><a name='81_90'>str</a></span>) ) )!
0082        } )
0083        <span class='identifier'><a name='83_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='83_16' href='LineGenerators.html#23_17' title='s:FC7siteify13TaskGeneratorcFMS0_FT10launchPathSS9argumentsGSaSS_9directoryGSqSS_13lineSeparatorGSqSS__S0_'>StatusGenerator</a></span>( <span class='identifier'><a name='83_33'>launchPath</a></span>: <span class='string'><a name='83_45'>"/usr/bin/xcodebuild"</a></span>, <span class='identifier'><a name='83_68'>arguments</a></span>: <span class='identifier'><a name='83_79'>buildargs</a></span> )
0084        <span class='identifier'><a name='84_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> = <span class='identifier'><a name='84_18' href='main.html#26_17' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__'>NSFileHandle</a></span>( <span class='identifier'><a name='84_32'>createForWritingAtPath</a></span>: <span class='identifier'><a name='84_56' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0085    }
0086    
0087    <span class='keyword'><a name='87_1'>var</a></span> <span class='identifier'><a name='87_5' href='#' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____' onclick='return expand(this);'>compilations<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#103_9"; return false;'>main.swift:103</td><td><pre>        <b title='source.lang.swift.ref.var.global'>compilations</b>.append( (primary, SK.array( SK.compilerArgs( line ) ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#127_21"; return false;'>main.swift:127</td><td><pre>for (file, argv) in <b title='source.lang.swift.ref.var.global'>compilations</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#129_37"; return false;'>main.swift:129</td><td><pre>    progress( "Indexing \(fileno)/\(<b title='source.lang.swift.ref.var.global'>compilations</b>.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#227_21"; return false;'>main.swift:227</td><td><pre>for (file, argv) in <b title='source.lang.swift.ref.var.global'>compilations</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#234_39"; return false;'>main.swift:234</td><td><pre>        progress( "Saving \(fileno)/\(<b title='source.lang.swift.ref.var.global'>compilations</b>.count) html/\(filename)" )</pre></td></table></span></a></span> = [(<span class='identifier'><a name='87_22' title='s:SS'>String</a></span>, <span class='identifier'><a name='87_30' title='c:sourcekitd.h@T@sourcekitd_object_t'>sourcekitd_object_t</a></span>)]()
0088    
0089    <span class='keyword'><a name='89_1'>for</a></span> <span class='identifier'><a name='89_5'>line</a></span> <span class='keyword'><a name='89_10'>in</a></span> <span class='identifier'><a name='89_13' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span>.<span class='identifier'><a name='89_22' href='LineGenerators.html#99_9' title='s:vC7siteify13FileGenerator8sequenceGVSs11AnySequenceSS_'>sequence</a></span> {
0090    
0091        <span class='keyword'><a name='91_5'>if</a></span> <span class='identifier'><a name='91_8' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> == <span class='keyword'><a name='91_22'>nil</a></span>, <span class='keyword'><a name='91_27'>let</a></span> <span class='identifier'><a name='91_31'>symroot</a></span> = <span class='identifier'><a name='91_41'>line</a></span>[<span class='string'><a name='91_46'>"^    SYMROOT = ([^\n]+)"</a></span>][<span class='number'><a name='91_73'>1</a></span>] <span class='keyword'><a name='91_76'>where</a></span> !<span class='identifier'><a name='91_83' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='91_91' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='91_109'>symroot</a></span> ) {
0092            <span class='identifier'><a name='92_9' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='92_16'>"Pre-built project no longer exists, rerun to rebuild"</a></span> )
0093            <span class='keyword'><a name='93_9'>try</a></span>! <span class='identifier'><a name='93_14' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='93_22' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='identifier'><a name='93_40' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0094            <span class='identifier'><a name='94_9' title='c:@F@exit'>exit</a></span>( <span class='number'><a name='94_15'>1</a></span> )
0095        }
0096        <span class='keyword'><a name='96_5'>else</a></span> <span class='keyword'><a name='96_10'>if</a></span> <span class='identifier'><a name='96_13'>line</a></span>[<span class='string'><a name='96_18'>"ld: framework not found ImageIO for architecture x86_64"</a></span>] {
0097            <span class='identifier'><a name='97_9' href='main.html#43_5' title='s:v7siteify11linkProblemSb'>linkProblem</a></span> = <span class='keyword'><a name='97_23'>true</a></span>
0098        }
0099    
0100        <span class='keyword'><a name='100_5'>let</a></span> <span class='identifier'><a name='100_9'>regex</a></span> = <span class='identifier'><a name='100_17'>line</a></span>[<span class='string'><a name='100_22'>"-primary-file (?:\"([^\"]+)\"|(\\S+)) "</a></span>]
0101    
0102        <span class='keyword'><a name='102_5'>if</a></span> <span class='keyword'><a name='102_8'>let</a></span> <span class='identifier'><a name='102_12'>primary</a></span> = <span class='identifier'><a name='102_22'>regex</a></span>[<span class='number'><a name='102_28'>1</a></span>] ?? <span class='identifier'><a name='102_34'>regex</a></span>[<span class='number'><a name='102_40'>2</a></span>] {
0103            <span class='identifier'><a name='103_9' href='main.html#87_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='103_22' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( (<span class='identifier'><a name='103_31'>primary</a></span>, <span class='identifier'><a name='103_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='103_43' href='SourceKit.html#101_10' title='s:FC7siteify9SourceKit5arrayFS0_FGSaSS_GVSs20UnsafeMutablePointerT__'>array</a></span>( <span class='identifier'><a name='103_50' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='103_53' href='SourceKit.html#183_10' title='s:FC7siteify9SourceKit12compilerArgsFS0_FSSGSaSS_'>compilerArgs</a></span>( <span class='identifier'><a name='103_67'>line</a></span> ) ) ) )
0104            <span class='keyword'><a name='104_9'>if</a></span> <span class='identifier'><a name='104_12' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> != <span class='keyword'><a name='104_26'>nil</a></span> {
0105                <span class='identifier'><a name='105_13' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='105_23'>"Built </a></span>\<span class='string_interpolation_anchor'><a name='105_31'>(</a></span><span class='identifier'><a name='105_32'>primary</a></span><span class='string_interpolation_anchor'><a name='105_39'>)</a></span><span class='string'><a name='105_40'>"</a></span> )
0106            }
0107        }
0108    
0109        <span class='identifier'><a name='109_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span>?.<span class='identifier'><a name='109_17' href='main.html#31_10' title='s:FE7siteifyCSo12NSFileHandle11writeStringFS0_FSST_'>writeString</a></span>( <span class='identifier'><a name='109_30'>line</a></span>+<span class='string'><a name='109_35'>"\n"</a></span> )
0110    }
0111    
0112    <span class='identifier'><a name='112_1' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span>?.<span class='identifier'><a name='112_13' title='c:objc(cs)NSFileHandle(im)closeFile'>closeFile</a></span>()
0113    
0114    <span class='keyword'><a name='114_1'>var</a></span> <span class='identifier'><a name='114_5' href='#' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_' onclick='return expand(this);'>entities<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#151_25"; return false;'>main.swift:151</td><td><pre>                        <b title='source.lang.swift.ref.var.global'>entities</b>[entity] = dict</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#159_23"; return false;'>main.swift:159</td><td><pre>for (entity, dict) in <b title='source.lang.swift.ref.var.global'>entities</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#278_32"; return false;'>main.swift:278</td><td><pre>            else if let dict = <b title='source.lang.swift.ref.var.global'>entities</b>[ent], usrString = dict.getString( SK.usrID ) {</pre></td></table></span></a></span> = [<span class='identifier'><a name='114_17' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>:<span class='identifier'><a name='114_24' title='c:@SA@sourcekitd_variant_t'>sourcekitd_variant_t</a></span>]()
0115    
0116    <span class='keyword'><a name='116_1'>class</a></span> <span class='identifier'><a name='116_7' href='#' title='s:C7siteify3USR' onclick='return expand(this);'>USR<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#124_20"; return false;'>main.swift:124</td><td><pre>var usrs = [String:<b title='source.lang.swift.ref.class'>USR</b>]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#143_39"; return false;'>main.swift:143</td><td><pre>                    usrs[usrString] = <b title='source.lang.swift.ref.class'>USR</b>()</pre></td></table></span></a></span> {
0117    
0118        <span class='keyword'><a name='118_5'>var</a></span> <span class='identifier'><a name='118_9' href='#' title='s:vC7siteify3USR10referencesGSaCS_6Entity_' onclick='return expand(this);'>references<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#147_25"; return false;'>main.swift:147</td><td><pre>                    usr.<b title='source.lang.swift.ref.var.instance'>references</b>.append( entity )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#283_33"; return false;'>main.swift:283</td><td><pre>                    else if usr.<b title='source.lang.swift.ref.var.instance'>references</b>.count > 1 {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#285_42"; return false;'>main.swift:285</td><td><pre>                        for i in 0..&lt;usr.<b title='source.lang.swift.ref.var.instance'>references</b>.count {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#286_43"; return false;'>main.swift:286</td><td><pre>                            let ref = usr.<b title='source.lang.swift.ref.var.instance'>references</b>[i]</pre></td></table></span></a></span> = [<span class='identifier'><a name='118_23' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>]()
0119        <span class='keyword'><a name='119_5'>var</a></span> <span class='identifier'><a name='119_9' href='#' title='s:vC7siteify3USR8reflinesGSaSS_' onclick='return expand(this);'>reflines<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#148_25"; return false;'>main.swift:148</td><td><pre>                    usr.<b title='source.lang.swift.ref.var.instance'>reflines</b>.append( entity.patchText( data, value: "\\w*" )! )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#292_54"; return false;'>main.swift:292</td><td><pre>                            popup += "&lt;td>&lt;pre>\(usr.<b title='source.lang.swift.ref.var.instance'>reflines</b>[i])&lt;/pre>&lt;/td>"</pre></td></table></span></a></span> = [<span class='identifier'><a name='119_21' title='s:SS'>String</a></span>]()
0120        <span class='keyword'><a name='120_5'>var</a></span> <span class='identifier'><a name='120_9' href='#' title='s:vC7siteify3USR9declaringGSqCS_6Entity_' onclick='return expand(this);'>declaring<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#162_17"; return false;'>main.swift:162</td><td><pre>            usr.<b title='source.lang.swift.ref.var.instance'>declaring</b> = entity</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#279_58"; return false;'>main.swift:279</td><td><pre>                if let usr = usrs[usrString], decl = usr.<b title='source.lang.swift.ref.var.instance'>declaring</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#326_65"; return false;'>main.swift:326</td><td><pre>    if usrString.hasPrefix( "s:" ), let decl = usrs[usrString]?.<b title='source.lang.swift.ref.var.instance'>declaring</b> {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='120_20' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span>?
0121    
0122    }
0123    
0124    <span class='keyword'><a name='124_1'>var</a></span> <span class='identifier'><a name='124_5' href='#' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_' onclick='return expand(this);'>usrs<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#142_20"; return false;'>main.swift:142</td><td><pre>                if <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString] == nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#143_21"; return false;'>main.swift:143</td><td><pre>                    <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString] = USR()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#146_74"; return false;'>main.swift:146</td><td><pre>                if !kind.containsString( ".decl.extension." ), var usr = <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#161_35"; return false;'>main.swift:161</td><td><pre>        if entity.decl, var usr = <b title='source.lang.swift.ref.var.global'>usrs</b>[usr] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#279_30"; return false;'>main.swift:279</td><td><pre>                if let usr = <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString], decl = usr.declaring {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#325_25"; return false;'>main.swift:325</td><td><pre>for (usrString, usr) in <b title='source.lang.swift.ref.var.global'>usrs</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#326_48"; return false;'>main.swift:326</td><td><pre>    if usrString.hasPrefix( "s:" ), let decl = <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString]?.declaring {</pre></td></table></span></a></span> = [<span class='identifier'><a name='124_13' title='s:SS'>String</a></span>:<span class='identifier'><a name='124_20' href='main.html#116_7' title='s:C7siteify3USR'>USR</a></span>]()
0125    <span class='keyword'><a name='125_1'>var</a></span> <span class='identifier'><a name='125_5' href='#' title='s:v7siteify6filenoSi' onclick='return expand(this);'>fileno<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#128_5"; return false;'>main.swift:128</td><td><pre>    <b title='source.lang.swift.ref.var.global'>fileno</b> += 1</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#129_27"; return false;'>main.swift:129</td><td><pre>    progress( "Indexing \(<b title='source.lang.swift.ref.var.global'>fileno</b>)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#222_1"; return false;'>main.swift:222</td><td><pre><b title='source.lang.swift.ref.var.global'>fileno</b> = 0</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#233_9"; return false;'>main.swift:233</td><td><pre>        <b title='source.lang.swift.ref.var.global'>fileno</b> += 1</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#234_29"; return false;'>main.swift:234</td><td><pre>        progress( "Saving \(<b title='source.lang.swift.ref.var.global'>fileno</b>)/\(compilations.count) html/\(filename)" )</pre></td></table></span></a></span> = <span class='number'><a name='125_14'>0</a></span>
0126    
0127    <span class='keyword'><a name='127_1'>for</a></span> (<span class='identifier'><a name='127_6'>file</a></span>, <span class='identifier'><a name='127_12'>argv</a></span>) <span class='keyword'><a name='127_18'>in</a></span> <span class='identifier'><a name='127_21' href='main.html#87_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span> {
0128        <span class='identifier'><a name='128_5' href='main.html#125_5' title='s:v7siteify6filenoSi'>fileno</a></span> += <span class='number'><a name='128_15'>1</a></span>
0129        <span class='identifier'><a name='129_5' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='129_15'>"Indexing </a></span>\<span class='string_interpolation_anchor'><a name='129_26'>(</a></span><span class='identifier'><a name='129_27' href='main.html#125_5' title='s:v7siteify6filenoSi'>fileno</a></span><span class='string_interpolation_anchor'><a name='129_33'>)</a></span><span class='string'><a name='129_34'>/</a></span>\<span class='string_interpolation_anchor'><a name='129_36'>(</a></span><span class='identifier'><a name='129_37' href='main.html#87_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='129_50' title='s:vSa5countSi'>count</a></span><span class='string_interpolation_anchor'><a name='129_55'>)</a></span><span class='string'><a name='129_56'> </a></span>\<span class='string_interpolation_anchor'><a name='129_58'>(</a></span><span class='identifier'><a name='129_59'>file</a></span><span class='string_interpolation_anchor'><a name='129_63'>)</a></span><span class='string'><a name='129_64'>"</a></span> )
0130    
0131        <span class='keyword'><a name='131_5'>if</a></span> <span class='keyword'><a name='131_8'>let</a></span> <span class='identifier'><a name='131_12'>data</a></span> = <span class='identifier'><a name='131_19' title='c:objc(cs)NSData(im)initWithContentsOfFile:'>NSData</a></span>( <span class='identifier'><a name='131_27'>contentsOfFile</a></span>: <span class='identifier'><a name='131_43'>file</a></span> ) {
0132            <span class='keyword'><a name='132_9'>let</a></span> <span class='identifier'><a name='132_13'>resp</a></span> = <span class='identifier'><a name='132_20' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='132_23' href='SourceKit.html#139_10' title='s:FC7siteify9SourceKit9indexFileFS0_FTSS12compilerArgsGVSs20UnsafeMutablePointerT___GS1_T__'>indexFile</a></span>( <span class='identifier'><a name='132_34'>file</a></span>, <span class='identifier'><a name='132_40'>compilerArgs</a></span>: <span class='identifier'><a name='132_54'>argv</a></span> )
0133            <span class='keyword'><a name='133_9'>let</a></span> <span class='identifier'><a name='133_13'>dict</a></span> = <span class='identifier'><a name='133_20' title='c:@F@sourcekitd_response_get_value'>sourcekitd_response_get_value</a></span>( <span class='identifier'><a name='133_51'>resp</a></span> )
0134            <span class='identifier'><a name='134_9' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='134_12' href='SourceKit.html#163_10' title='s:FC7siteify9SourceKit11recurseOverFS0_FTVSs14COpaquePointer4respVSC20sourcekitd_variant_t6indentSS10visualiserGSqPS_10Visualiser__5blockFT4dictS2__T__T_'>recurseOver</a></span>( <span class='identifier'><a name='134_25' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='134_28' href='SourceKit.html#66_14' title='s:vC7siteify9SourceKit10entitiesIDVSs14COpaquePointer'>entitiesID</a></span>, <span class='identifier'><a name='134_40'>resp</a></span>: <span class='identifier'><a name='134_46'>dict</a></span>, <span class='identifier'><a name='134_52'>block</a></span>: { <span class='identifier'><a name='134_61'>dict</a></span> <span class='keyword'><a name='134_66'>in</a></span>
0135                <span class='keyword'><a name='135_13'>if</a></span> <span class='keyword'><a name='135_16'>let</a></span> <span class='identifier'><a name='135_20'>usrString</a></span> = <span class='identifier'><a name='135_32'>dict</a></span>.<span class='identifier'><a name='135_37' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='135_48' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='135_51' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0136                    <span class='keyword'><a name='136_17'>let</a></span> <span class='identifier'><a name='136_21'>kind</a></span> = <span class='identifier'><a name='136_28'>dict</a></span>.<span class='identifier'><a name='136_33' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='136_48' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='136_51' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0137                    <span class='keyword'><a name='137_17'>let</a></span> <span class='identifier'><a name='137_21'>entity</a></span> = <span class='identifier'><a name='137_30' href='Entity.html#19_5' title='s:FC7siteify6EntitycFMS0_FT4fileSS4lineSi3colSi4kindGSqSS_4declSb_S0_'>Entity</a></span>( <span class='identifier'><a name='137_38'>file</a></span>: <span class='identifier'><a name='137_44'>file</a></span>,
0138                        <span class='identifier'><a name='138_21'>line</a></span>: <span class='identifier'><a name='138_27'>dict</a></span>.<span class='identifier'><a name='138_32' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='138_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='138_43' href='SourceKit.html#77_14' title='s:vC7siteify9SourceKit6lineIDVSs14COpaquePointer'>lineID</a></span> ),
0139                        <span class='identifier'><a name='139_21'>col</a></span>: <span class='identifier'><a name='139_26'>dict</a></span>.<span class='identifier'><a name='139_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='139_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='139_42' href='SourceKit.html#78_14' title='s:vC7siteify9SourceKit5colIDVSs14COpaquePointer'>colID</a></span> ),
0140                        <span class='identifier'><a name='140_21'>kind</a></span>: <span class='identifier'><a name='140_27'>kind</a></span>, <span class='identifier'><a name='140_33'>decl</a></span>: <span class='identifier'><a name='140_39'>kind</a></span>.<span class='identifier'><a name='140_44' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='140_60'>".decl."</a></span> ) )
0141    
0142                    <span class='keyword'><a name='142_17'>if</a></span> <span class='identifier'><a name='142_20' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='142_25'>usrString</a></span>] == <span class='keyword'><a name='142_39'>nil</a></span> {
0143                        <span class='identifier'><a name='143_21' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='143_26'>usrString</a></span>] = <span class='identifier'><a name='143_39' href='main.html#116_7' title='s:C7siteify3USR'>USR</a></span>()
0144                    }
0145    
0146                    <span class='keyword'><a name='146_17'>if</a></span> !<span class='identifier'><a name='146_21'>kind</a></span>.<span class='identifier'><a name='146_26' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='146_42'>".decl.extension."</a></span> ), <span class='keyword'><a name='146_64'>var</a></span> <span class='identifier'><a name='146_68'>usr</a></span> = <span class='identifier'><a name='146_74' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='146_79'>usrString</a></span>] {
0147                        <span class='identifier'><a name='147_21'>usr</a></span>.<span class='identifier'><a name='147_25' href='main.html#118_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>.<span class='identifier'><a name='147_36' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='147_44'>entity</a></span> )
0148                        <span class='identifier'><a name='148_21'>usr</a></span>.<span class='identifier'><a name='148_25' href='main.html#119_9' title='s:vC7siteify3USR8reflinesGSaSS_'>reflines</a></span>.<span class='identifier'><a name='148_34' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='148_42'>entity</a></span>.<span class='identifier'><a name='148_49' href='Entity.html#47_10' title='s:FC7siteify6Entity9patchTextFS0_FTCSo6NSData5valueSS_GSqSS_'>patchText</a></span>( <span class='identifier'><a name='148_60'>data</a></span>, <span class='identifier'><a name='148_66'>value</a></span>: <span class='string'><a name='148_73'>"\\w*"</a></span> )! )
0149    
0150                        <span class='keyword'><a name='150_21'>if</a></span> !<span class='identifier'><a name='150_25'>kind</a></span>.<span class='identifier'><a name='150_30' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='150_46'>".accessor."</a></span> ) {
0151                            <span class='identifier'><a name='151_25' href='main.html#114_5' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span>[<span class='identifier'><a name='151_34'>entity</a></span>] = <span class='identifier'><a name='151_44'>dict</a></span>
0152                        }
0153                    }
0154                }
0155            } )
0156        }
0157    }
0158    
0159    <span class='keyword'><a name='159_1'>for</a></span> (<span class='identifier'><a name='159_6'>entity</a></span>, <span class='identifier'><a name='159_14'>dict</a></span>) <span class='keyword'><a name='159_20'>in</a></span> <span class='identifier'><a name='159_23' href='main.html#114_5' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span> {
0160        <span class='keyword'><a name='160_5'>if</a></span> <span class='keyword'><a name='160_8'>let</a></span> <span class='identifier'><a name='160_12'>usr</a></span> = <span class='identifier'><a name='160_18'>dict</a></span>.<span class='identifier'><a name='160_23' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='160_34' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='160_37' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0161            <span class='keyword'><a name='161_9'>if</a></span> <span class='identifier'><a name='161_12'>entity</a></span>.<span class='identifier'><a name='161_19' href='Entity.html#17_59' title='s:vC7siteify6Entity4declSb'>decl</a></span>, <span class='keyword'><a name='161_25'>var</a></span> <span class='identifier'><a name='161_29'>usr</a></span> = <span class='identifier'><a name='161_35' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='161_40'>usr</a></span>] {
0162                <span class='identifier'><a name='162_13'>usr</a></span>.<span class='identifier'><a name='162_17' href='main.html#120_9' title='s:vC7siteify3USR9declaringGSqCS_6Entity_'>declaring</a></span> = <span class='identifier'><a name='162_29'>entity</a></span>
0163            }
0164        }
0165    }
0166    
0167    <span class='keyword'><a name='167_1'>var</a></span> <span class='identifier'><a name='167_5' href='#' title='s:v7siteify15filenameForFileGVSs10DictionarySSSS_' onclick='return expand(this);'>filenameForFile<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#170_23"; return false;'>main.swift:170</td><td><pre>    if let filename = <b title='source.lang.swift.ref.var.global'>filenameForFile</b>[file] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#178_5"; return false;'>main.swift:178</td><td><pre>    <b title='source.lang.swift.ref.var.global'>filenameForFile</b>[file] = filename</pre></td></table></span></a></span> = [<span class='identifier'><a name='167_24' title='s:SS'>String</a></span>:<span class='identifier'><a name='167_31' title='s:SS'>String</a></span>](), <span class='identifier'><a name='167_42' href='#' title='s:v7siteify16filesForFileNameGVSs10DictionarySSSS_' onclick='return expand(this);'>filesForFileName<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#174_11"; return false;'>main.swift:174</td><td><pre>    while <b title='source.lang.swift.ref.var.global'>filesForFileName</b>[filename] != nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#177_5"; return false;'>main.swift:177</td><td><pre>    <b title='source.lang.swift.ref.var.global'>filesForFileName</b>[filename] = file</pre></td></table></span></a></span> = [<span class='identifier'><a name='167_62' title='s:SS'>String</a></span>:<span class='identifier'><a name='167_69' title='s:SS'>String</a></span>]()
0168    
0169    <span class='keyword'><a name='169_1'>func</a></span> <span class='identifier'><a name='169_6' href='#' title='s:F7siteify12fileFilenameFSSSS' onclick='return expand(this);'>fileFilename<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#189_16"; return false;'>main.swift:189</td><td><pre>        return <b title='source.lang.swift.ref.function.free'>fileFilename</b>( file )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#230_24"; return false;'>main.swift:230</td><td><pre>        let filename = <b title='source.lang.swift.ref.function.free'>fileFilename</b>( file )+".html"</pre></td></table></span></a></span>( <span class='identifier'><a name='169_20'>file</a></span>: <span class='typeidentifier'><a name='169_26' title='s:SS'>String</a></span> ) -> <span class='typeidentifier'><a name='169_38' title='s:SS'>String</a></span> {
0170        <span class='keyword'><a name='170_5'>if</a></span> <span class='keyword'><a name='170_8'>let</a></span> <span class='identifier'><a name='170_12'>filename</a></span> = <span class='identifier'><a name='170_23' href='main.html#167_5' title='s:v7siteify15filenameForFileGVSs10DictionarySSSS_'>filenameForFile</a></span>[<span class='identifier'><a name='170_39'>file</a></span>] {
0171            <span class='keyword'><a name='171_9'>return</a></span> <span class='identifier'><a name='171_16'>filename</a></span>
0172        }
0173        <span class='keyword'><a name='173_5'>var</a></span> <span class='identifier'><a name='173_9'>filename</a></span> = <span class='identifier'><a name='173_20' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>( <span class='identifier'><a name='173_27'>fileURLWithPath</a></span>: <span class='identifier'><a name='173_44'>file</a></span> ).<span class='identifier'><a name='173_51' title='c:objc(cs)NSURL(py)URLByDeletingPathExtension'>URLByDeletingPathExtension</a></span>!.<span class='identifier'><a name='173_79' title='c:objc(cs)NSURL(py)lastPathComponent'>lastPathComponent</a></span>!
0174        <span class='keyword'><a name='174_5'>while</a></span> <span class='identifier'><a name='174_11' href='main.html#167_42' title='s:v7siteify16filesForFileNameGVSs10DictionarySSSS_'>filesForFileName</a></span>[<span class='identifier'><a name='174_28'>filename</a></span>] != <span class='keyword'><a name='174_41'>nil</a></span> {
0175            <span class='identifier'><a name='175_9'>filename</a></span> += <span class='string'><a name='175_21'>"_"</a></span>
0176        }
0177        <span class='identifier'><a name='177_5' href='main.html#167_42' title='s:v7siteify16filesForFileNameGVSs10DictionarySSSS_'>filesForFileName</a></span>[<span class='identifier'><a name='177_22'>filename</a></span>] = <span class='identifier'><a name='177_34'>file</a></span>
0178        <span class='identifier'><a name='178_5' href='main.html#167_5' title='s:v7siteify15filenameForFileGVSs10DictionarySSSS_'>filenameForFile</a></span>[<span class='identifier'><a name='178_21'>file</a></span>] = <span class='identifier'><a name='178_29'>filename</a></span>
0179        <span class='keyword'><a name='179_5'>return</a></span> <span class='identifier'><a name='179_12'>filename</a></span>
0180    }
0181    
0182    <span class='keyword'><a name='182_1'>extension</a></span> <span class='typeidentifier'><a name='182_11' href='Entity.html#15_7' title='s:C7siteify6Entity'>Entity</a></span> {
0183    
0184        <span class='keyword'><a name='184_5'>var</a></span> <span class='identifier'><a name='184_9' href='#' title='s:vC7siteify6Entity6anchorSS' onclick='return expand(this);'>anchor<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#193_36"; return false;'>main.swift:193</td><td><pre>        return "\(filename).html#\(<b title='source.lang.swift.ref.var.instance'>anchor</b>)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#270_40"; return false;'>main.swift:270</td><td><pre>            var span = "&lt;a name='\(ent.<b title='source.lang.swift.ref.var.instance'>anchor</b>)'>\(text)&lt;/a>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#281_48"; return false;'>main.swift:281</td><td><pre>                        span = "&lt;a name='\(ent.<b title='source.lang.swift.ref.var.instance'>anchor</b>)' href='\(decl.href)' title='\(usrString)'>\(text)&lt;/a>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#294_48"; return false;'>main.swift:294</td><td><pre>                        span = "&lt;a name='\(ent.<b title='source.lang.swift.ref.var.instance'>anchor</b>)' href='#' title='\(usrString)' onclick='return expand(this);'>" +</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#299_44"; return false;'>main.swift:299</td><td><pre>                    span = "&lt;a name='\(ent.<b title='source.lang.swift.ref.var.instance'>anchor</b>)' title='\(usrString)'>\(text)&lt;/a>"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='184_17' title='s:SS'>String</a></span> {
0185            <span class='keyword'><a name='185_9'>return</a></span> <span class='string'><a name='185_16'>"</a></span>\<span class='string_interpolation_anchor'><a name='185_18'>(</a></span><span class='identifier'><a name='185_19' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='185_23'>)</a></span><span class='string'><a name='185_24'>_</a></span>\<span class='string_interpolation_anchor'><a name='185_26'>(</a></span><span class='identifier'><a name='185_27' href='Entity.html#17_34' title='s:vC7siteify6Entity3colSi'>col</a></span><span class='string_interpolation_anchor'><a name='185_30'>)</a></span><span class='string'><a name='185_31'>"</a></span>
0186        }
0187    
0188        <span class='keyword'><a name='188_5'>var</a></span> <span class='identifier'><a name='188_9' href='#' title='s:vC7siteify6Entity8filenameSS' onclick='return expand(this);'>filename<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#193_19"; return false;'>main.swift:193</td><td><pre>        return "\(<b title='source.lang.swift.ref.var.instance'>filename</b>).html#\(anchor)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#291_168"; return false;'>main.swift:291</td><td><pre>                            popup += "&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"\(ref.href)\"; \(keepListOpen)return false;'>\(ref.<b title='source.lang.swift.ref.var.instance'>filename</b>).swift:\(ref.line)&lt;/td>"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='188_19' title='s:SS'>String</a></span> {
0189            <span class='keyword'><a name='189_9'>return</a></span> <span class='identifier'><a name='189_16' href='main.html#169_6' title='s:F7siteify12fileFilenameFSSSS'>fileFilename</a></span>( <span class='identifier'><a name='189_30' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> )
0190        }
0191    
0192        <span class='keyword'><a name='192_5'>var</a></span> <span class='identifier'><a name='192_9' href='#' title='s:vC7siteify6Entity4hrefSS' onclick='return expand(this);'>href<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#281_70"; return false;'>main.swift:281</td><td><pre>                        span = "&lt;a name='\(ent.anchor)' href='\(decl.<b title='source.lang.swift.ref.var.instance'>href</b>)' title='\(usrString)'>\(text)&lt;/a>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#291_123"; return false;'>main.swift:291</td><td><pre>                            popup += "&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"\(ref.<b title='source.lang.swift.ref.var.instance'>href</b>)\"; \(keepListOpen)return false;'>\(ref.filename).swift:\(ref.line)&lt;/td>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#328_82"; return false;'>main.swift:328</td><td><pre>        symbols.append( (_stdlib_demangleName( "_T"+usrString ), usrString, decl.<b title='source.lang.swift.ref.var.instance'>href</b>) )</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='192_15' title='s:SS'>String</a></span> {
0193            <span class='keyword'><a name='193_9'>return</a></span> <span class='string'><a name='193_16'>"</a></span>\<span class='string_interpolation_anchor'><a name='193_18'>(</a></span><span class='identifier'><a name='193_19' href='main.html#188_9' title='s:vC7siteify6Entity8filenameSS'>filename</a></span><span class='string_interpolation_anchor'><a name='193_27'>)</a></span><span class='string'><a name='193_28'>.html#</a></span>\<span class='string_interpolation_anchor'><a name='193_35'>(</a></span><span class='identifier'><a name='193_36' href='main.html#184_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='193_42'>)</a></span><span class='string'><a name='193_43'>"</a></span>
0194        }
0195    
0196    }
0197    
0198    <span class='keyword'><a name='198_1'>let</a></span> <span class='identifier'><a name='198_5' href='#' title='s:v7siteify4homeSS' onclick='return expand(this);'>home<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#199_17"; return false;'>main.swift:199</td><td><pre>let resources = <b title='source.lang.swift.ref.var.global'>home</b>+"/Library/siteify/"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#220_59"; return false;'>main.swift:220</td><td><pre>    "__ROOT__": cwd.stringByReplacingOccurrencesOfString( <b title='source.lang.swift.ref.var.global'>home</b>, withString: "~" )] )</pre></td></table></span></a></span> = <span class='identifier'><a name='198_12' title='s:SS'>String</a></span>.<span class='identifier'><a name='198_19' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='198_32' title='c:@F@getenv'>getenv</a></span>(<span class='string'><a name='198_39'>"HOME"</a></span>) )!
0199    <span class='keyword'><a name='199_1'>let</a></span> <span class='identifier'><a name='199_5' href='#' title='s:v7siteify9resourcesSS' onclick='return expand(this);'>resources<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#202_48"; return false;'>main.swift:202</td><td><pre>    var input = try! NSString( contentsOfFile: <b title='source.lang.swift.ref.var.global'>resources</b>+template, encoding: NSUTF8StringEncoding )</pre></td></table></span></a></span> = <span class='identifier'><a name='199_17' href='main.html#198_5' title='s:v7siteify4homeSS'>home</a></span>+<span class='string'><a name='199_22'>"/Library/siteify/"</a></span>
0200    
0201    <span class='keyword'><a name='201_1'>func</a></span> <span class='identifier'><a name='201_6' href='#' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>copyTemplate<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#214_9"; return false;'>main.swift:214</td><td><pre>fclose( <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "siteify.css" ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#219_13"; return false;'>main.swift:219</td><td><pre>let index = <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "index.html", patches: ["__DATE__": NSDate().description,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#317_19"; return false;'>main.swift:317</td><td><pre>        let out = <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "source.html", patches: [:], dest: "html/"+filename )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#332_12"; return false;'>main.swift:332</td><td><pre>let xref = <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "xref.html" )</pre></td></table></span></a></span>( <span class='identifier'><a name='201_20'>template</a></span>: <span class='typeidentifier'><a name='201_30' title='s:SS'>String</a></span>, <span class='identifier'><a name='201_38'>patches</a></span>: [<span class='typeidentifier'><a name='201_48' title='s:SS'>String</a></span>:<span class='typeidentifier'><a name='201_55' title='s:SS'>String</a></span>] = [:], <span class='identifier'><a name='201_70'>dest</a></span>: <span class='typeidentifier'><a name='201_76' title='s:SS'>String</a></span>? = <span class='keyword'><a name='201_86'>nil</a></span> ) -> <span class='typeidentifier'><a name='201_95' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span>&lt;<span class='typeidentifier'><a name='201_116' title='c:@T@FILE'>FILE</a></span>> {
0202        <span class='keyword'><a name='202_5'>var</a></span> <span class='identifier'><a name='202_9'>input</a></span> = <span class='keyword'><a name='202_17'>try</a></span>! <span class='identifier'><a name='202_22' title='c:objc(cs)NSString(im)initWithContentsOfFile:encoding:error:'>NSString</a></span>( <span class='identifier'><a name='202_32'>contentsOfFile</a></span>: <span class='identifier'><a name='202_48' href='main.html#199_5' title='s:v7siteify9resourcesSS'>resources</a></span>+<span class='identifier'><a name='202_58'>template</a></span>, <span class='identifier'><a name='202_68'>encoding</a></span>: <span class='identifier'><a name='202_78' title='s:v10Foundation20NSUTF8StringEncodingSu'>NSUTF8StringEncoding</a></span> )
0203        <span class='keyword'><a name='203_5'>for</a></span> (<span class='identifier'><a name='203_10'>tag</a></span>, <span class='identifier'><a name='203_15'>value</a></span>) <span class='keyword'><a name='203_22'>in</a></span> <span class='identifier'><a name='203_25'>patches</a></span> {
0204            <span class='identifier'><a name='204_9'>input</a></span> = <span class='identifier'><a name='204_17'>input</a></span>.<span class='identifier'><a name='204_23' title='c:objc(cs)NSString(im)stringByReplacingOccurrencesOfString:withString:'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='204_61'>tag</a></span>, <span class='identifier'><a name='204_66'>withString</a></span>: <span class='identifier'><a name='204_78'>value</a></span> )
0205        }
0206        <span class='keyword'><a name='206_5'>let</a></span> <span class='identifier'><a name='206_9'>out</a></span> = <span class='identifier'><a name='206_15' title='c:@F@fopen'>fopen</a></span>( <span class='identifier'><a name='206_22'>dest</a></span> ?? <span class='string'><a name='206_30'>"html/"</a></span>+<span class='identifier'><a name='206_38'>template</a></span>, <span class='string'><a name='206_48'>"w"</a></span> )
0207        <span class='identifier'><a name='207_5' title='c:@F@fputs'>fputs</a></span>( <span class='identifier'><a name='207_12'>input</a></span>.<span class='identifier'><a name='207_18' title='c:objc(cs)NSString(py)UTF8String'>UTF8String</a></span>, <span class='identifier'><a name='207_30'>out</a></span> )
0208        <span class='keyword'><a name='208_5'>return</a></span> <span class='identifier'><a name='208_12'>out</a></span>
0209    }
0210    
0211    <span class='keyword'><a name='211_1'>if</a></span> !<span class='identifier'><a name='211_5' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='211_13' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='string'><a name='211_31'>"html"</a></span> ) {
0212        <span class='keyword'><a name='212_5'>try</a></span>! <span class='identifier'><a name='212_10' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='212_18' title='c:objc(cs)NSFileManager(im)createDirectoryAtPath:withIntermediateDirectories:attributes:error:'>createDirectoryAtPath</a></span>( <span class='string'><a name='212_41'>"html"</a></span>, <span class='identifier'><a name='212_49'>withIntermediateDirectories</a></span>: <span class='keyword'><a name='212_78'>false</a></span>, <span class='identifier'><a name='212_85'>attributes</a></span>: <span class='keyword'><a name='212_97'>nil</a></span> )
0213    }
0214    <span class='identifier'><a name='214_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='214_9' href='main.html#201_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='214_23'>"siteify.css"</a></span> ) )
0215    
0216    <span class='keyword'><a name='216_1'>var</a></span> <span class='identifier'><a name='216_5' href='#' title='s:v7siteify4buffGSaVSs4Int8_' onclick='return expand(this);'>buff<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#217_40"; return false;'>main.swift:217</td><td><pre>let cwd = String.fromCString( getcwd( &amp;<b title='source.lang.swift.ref.var.global'>buff</b>, buff.count ) )!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#217_46"; return false;'>main.swift:217</td><td><pre>let cwd = String.fromCString( getcwd( &amp;buff, <b title='source.lang.swift.ref.var.global'>buff</b>.count ) )!</pre></td></table></span></a></span> = [<span class='identifier'><a name='216_13' title='s:VSs4Int8'>Int8</a></span>]( <span class='identifier'><a name='216_20'>count</a></span>: <span class='identifier'><a name='216_27' title='s:FSicFMSiFVSs5Int32Si'>Int</a></span>(<span class='identifier'><a name='216_31' title='c:@macro@PATH_MAX'>PATH_MAX</a></span>), <span class='identifier'><a name='216_42'>repeatedValue</a></span>: <span class='number'><a name='216_57'>0</a></span> )
0217    <span class='keyword'><a name='217_1'>let</a></span> <span class='identifier'><a name='217_5' href='#' title='s:v7siteify3cwdSS' onclick='return expand(this);'>cwd<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#220_17"; return false;'>main.swift:220</td><td><pre>    "__ROOT__": <b title='source.lang.swift.ref.var.global'>cwd</b>.stringByReplacingOccurrencesOfString( home, withString: "~" )] )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#231_67"; return false;'>main.swift:231</td><td><pre>        let relative = file.stringByReplacingOccurrencesOfString( <b title='source.lang.swift.ref.var.global'>cwd</b>+"/", withString: "" )</pre></td></table></span></a></span> = <span class='identifier'><a name='217_11' title='s:SS'>String</a></span>.<span class='identifier'><a name='217_18' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='217_31' title='c:@F@getcwd'>getcwd</a></span>( &amp;<span class='identifier'><a name='217_40' href='main.html#216_5' title='s:v7siteify4buffGSaVSs4Int8_'>buff</a></span>, <span class='identifier'><a name='217_46' href='main.html#216_5' title='s:v7siteify4buffGSaVSs4Int8_'>buff</a></span>.<span class='identifier'><a name='217_51' title='s:vSa5countSi'>count</a></span> ) )!
0218    
0219    <span class='keyword'><a name='219_1'>let</a></span> <span class='identifier'><a name='219_5' href='#' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>index<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#236_108"; return false;'>main.swift:236</td><td><pre>        fputs( "&lt;a href='\(filename)'>\(relative)&lt;a> \(comma.stringFromNumber(data.length)!) bytes&lt;br>\n", <b title='source.lang.swift.ref.var.global'>index</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#341_57"; return false;'>main.swift:341</td><td><pre>fputs( "&lt;a href='xref.html'>Declared Symbols&lt;a>&lt;br>\n", <b title='source.lang.swift.ref.var.global'>index</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#343_9"; return false;'>main.swift:343</td><td><pre>fclose( <b title='source.lang.swift.ref.var.global'>index</b> )</pre></td></table></span></a></span> = <span class='identifier'><a name='219_13' href='main.html#201_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='219_27'>"index.html"</a></span>, <span class='identifier'><a name='219_41'>patches</a></span>: [<span class='string'><a name='219_51'>"__DATE__"</a></span>: <span class='identifier'><a name='219_63' title='c:objc(cs)NSDate(im)init'>NSDate</a></span>().<span class='identifier'><a name='219_72' title='c:objc(cs)NSDate(py)description'>description</a></span>,
0220        <span class='string'><a name='220_5'>"__ROOT__"</a></span>: <span class='identifier'><a name='220_17' href='main.html#217_5' title='s:v7siteify3cwdSS'>cwd</a></span>.<span class='identifier'><a name='220_21' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='220_59' href='main.html#198_5' title='s:v7siteify4homeSS'>home</a></span>, <span class='identifier'><a name='220_65'>withString</a></span>: <span class='string'><a name='220_77'>"~"</a></span> )] )
0221    
0222    <span class='identifier'><a name='222_1' href='main.html#125_5' title='s:v7siteify6filenoSi'>fileno</a></span> = <span class='number'><a name='222_10'>0</a></span>
0223    
0224    <span class='keyword'><a name='224_1'>var</a></span> <span class='identifier'><a name='224_5' href='#' title='s:v7siteify5commaCSo17NSNumberFormatter' onclick='return expand(this);'>comma<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#225_1"; return false;'>main.swift:225</td><td><pre><b title='source.lang.swift.ref.var.global'>comma</b>.numberStyle = NSNumberFormatterStyle.DecimalStyle</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#236_56"; return false;'>main.swift:236</td><td><pre>        fputs( "&lt;a href='\(filename)'>\(relative)&lt;a> \(<b title='source.lang.swift.ref.var.global'>comma</b>.stringFromNumber(data.length)!) bytes&lt;br>\n", index )</pre></td></table></span></a></span> = <span class='identifier'><a name='224_13' title='c:objc(cs)NSNumberFormatter'>NSNumberFormatter</a></span>()
0225    <span class='identifier'><a name='225_1' href='main.html#224_5' title='s:v7siteify5commaCSo17NSNumberFormatter'>comma</a></span>.<span class='identifier'><a name='225_7' title='c:objc(cs)NSNumberFormatter(py)numberStyle'>numberStyle</a></span> = <span class='identifier'><a name='225_21' title='c:@E@NSNumberFormatterStyle'>NSNumberFormatterStyle</a></span>.<span class='identifier'><a name='225_44' title='c:@E@NSNumberFormatterStyle@NSNumberFormatterDecimalStyle'>DecimalStyle</a></span>
0226    
0227    <span class='keyword'><a name='227_1'>for</a></span> (<span class='identifier'><a name='227_6'>file</a></span>, <span class='identifier'><a name='227_12'>argv</a></span>) <span class='keyword'><a name='227_18'>in</a></span> <span class='identifier'><a name='227_21' href='main.html#87_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span> {
0228        <span class='keyword'><a name='228_5'>if</a></span> <span class='keyword'><a name='228_8'>let</a></span> <span class='identifier'><a name='228_12'>data</a></span> = <span class='identifier'><a name='228_19' title='c:objc(cs)NSData(im)initWithContentsOfFile:'>NSData</a></span>( <span class='identifier'><a name='228_27'>contentsOfFile</a></span>: <span class='identifier'><a name='228_43'>file</a></span> ) {
0229            <span class='keyword'><a name='229_9'>let</a></span> <span class='identifier'><a name='229_13'>bytes</a></span> = <span class='identifier'><a name='229_21' title='s:VSs13UnsafePointer'>UnsafePointer</a></span>&lt;<span class='typeidentifier'><a name='229_35' title='s:VSs4Int8'>Int8</a></span>>( <span class='identifier'><a name='229_42'>data</a></span>.<span class='identifier'><a name='229_47' title='c:objc(cs)NSData(py)bytes'>bytes</a></span> )
0230            <span class='keyword'><a name='230_9'>let</a></span> <span class='identifier'><a name='230_13'>filename</a></span> = <span class='identifier'><a name='230_24' href='main.html#169_6' title='s:F7siteify12fileFilenameFSSSS'>fileFilename</a></span>( <span class='identifier'><a name='230_38'>file</a></span> )+<span class='string'><a name='230_45'>".html"</a></span>
0231            <span class='keyword'><a name='231_9'>let</a></span> <span class='identifier'><a name='231_13'>relative</a></span> = <span class='identifier'><a name='231_24'>file</a></span>.<span class='identifier'><a name='231_29' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='231_67' href='main.html#217_5' title='s:v7siteify3cwdSS'>cwd</a></span>+<span class='string'><a name='231_71'>"/"</a></span>, <span class='identifier'><a name='231_76'>withString</a></span>: <span class='string'><a name='231_88'>""</a></span> )
0232    
0233            <span class='identifier'><a name='233_9' href='main.html#125_5' title='s:v7siteify6filenoSi'>fileno</a></span> += <span class='number'><a name='233_19'>1</a></span>
0234            <span class='identifier'><a name='234_9' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='234_19'>"Saving </a></span>\<span class='string_interpolation_anchor'><a name='234_28'>(</a></span><span class='identifier'><a name='234_29' href='main.html#125_5' title='s:v7siteify6filenoSi'>fileno</a></span><span class='string_interpolation_anchor'><a name='234_35'>)</a></span><span class='string'><a name='234_36'>/</a></span>\<span class='string_interpolation_anchor'><a name='234_38'>(</a></span><span class='identifier'><a name='234_39' href='main.html#87_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='234_52' title='s:vSa5countSi'>count</a></span><span class='string_interpolation_anchor'><a name='234_57'>)</a></span><span class='string'><a name='234_58'> html/</a></span>\<span class='string_interpolation_anchor'><a name='234_65'>(</a></span><span class='identifier'><a name='234_66'>filename</a></span><span class='string_interpolation_anchor'><a name='234_74'>)</a></span><span class='string'><a name='234_75'>"</a></span> )
0235    
0236            <span class='identifier'><a name='236_9' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='236_16'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='236_27'>(</a></span><span class='identifier'><a name='236_28'>filename</a></span><span class='string_interpolation_anchor'><a name='236_36'>)</a></span><span class='string'><a name='236_37'>'></a></span>\<span class='string_interpolation_anchor'><a name='236_40'>(</a></span><span class='identifier'><a name='236_41'>relative</a></span><span class='string_interpolation_anchor'><a name='236_49'>)</a></span><span class='string'><a name='236_50'>&lt;a> </a></span>\<span class='string_interpolation_anchor'><a name='236_55'>(</a></span><span class='identifier'><a name='236_56' href='main.html#224_5' title='s:v7siteify5commaCSo17NSNumberFormatter'>comma</a></span>.<span class='identifier'><a name='236_62' title='c:objc(cs)NSNumberFormatter(im)stringFromNumber:'>stringFromNumber</a></span>(<span class='identifier'><a name='236_79'>data</a></span>.<span class='identifier'><a name='236_84' title='c:objc(cs)NSData(py)length'>length</a></span>)!<span class='string_interpolation_anchor'><a name='236_92'>)</a></span><span class='string'><a name='236_93'> bytes&lt;br>\n"</a></span>, <span class='identifier'><a name='236_108' href='main.html#219_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0237    
0238            <span class='keyword'><a name='238_9'>let</a></span> <span class='identifier'><a name='238_13'>newline</a></span> = <span class='identifier'><a name='238_23' title='s:FVSs4Int8cFMS_FVSs6UInt16S_'>Int8</a></span>(<span class='string'><a name='238_28'>"\n"</a></span>.<span class='identifier'><a name='238_33' title='s:vSS5utf16VSS9UTF16View'>utf16</a></span>.<span class='identifier'><a name='238_39' title='s:veRq_Ss14CollectionTypeqq_Ss9Indexable5IndexSs22BidirectionalIndexType_SsS_4lastGSqqqq_S_9GeneratorSs13GeneratorType7Element_'>last</a></span>!)
0239            <span class='keyword'><a name='239_9'>var</a></span> <span class='identifier'><a name='239_13'>ptr</a></span> = <span class='number'><a name='239_19'>0</a></span>, <span class='identifier'><a name='239_22'>line</a></span> = <span class='number'><a name='239_29'>1</a></span>, <span class='identifier'><a name='239_32'>col</a></span> = <span class='number'><a name='239_38'>1</a></span>
0240    
0241            <span class='keyword'><a name='241_9'>func</a></span> <span class='identifier'><a name='241_14'>skipTo</a></span>( <span class='identifier'><a name='241_22'>offset</a></span>: <span class='typeidentifier'><a name='241_30' title='s:Si'>Int</a></span> ) -> <span class='typeidentifier'><a name='241_39' title='s:SS'>String</a></span> {
0242                <span class='keyword'><a name='242_13'>let</a></span> <span class='identifier'><a name='242_17'>out</a></span> = <span class='identifier'><a name='242_23' title='c:objc(cs)NSString(im)initWithBytes:length:encoding:'>NSString</a></span>( <span class='identifier'><a name='242_33'>bytes</a></span>: <span class='identifier'><a name='242_40'>bytes</a></span>+<span class='identifier'><a name='242_46'>ptr</a></span>, <span class='identifier'><a name='242_51'>length</a></span>: <span class='identifier'><a name='242_59'>offset</a></span>-<span class='identifier'><a name='242_66'>ptr</a></span>, <span class='identifier'><a name='242_71'>encoding</a></span>: <span class='identifier'><a name='242_81' title='s:v10Foundation20NSUTF8StringEncodingSu'>NSUTF8StringEncoding</a></span> ) ?? <span class='string'><a name='242_107'>""</a></span>
0243                <span class='keyword'><a name='243_13'>while</a></span> <span class='identifier'><a name='243_19'>ptr</a></span> &lt; <span class='identifier'><a name='243_25'>offset</a></span> {
0244                    <span class='keyword'><a name='244_17'>if</a></span> <span class='identifier'><a name='244_20'>bytes</a></span>[<span class='identifier'><a name='244_26'>ptr</a></span>] == <span class='identifier'><a name='244_34'>newline</a></span> {
0245                        <span class='identifier'><a name='245_21'>line</a></span> += <span class='number'><a name='245_29'>1</a></span>
0246                        <span class='identifier'><a name='246_21'>col</a></span> = <span class='number'><a name='246_27'>1</a></span>
0247                    }
0248                    <span class='keyword'><a name='248_17'>else</a></span> {
0249                        <span class='identifier'><a name='249_21'>col</a></span> += <span class='number'><a name='249_28'>1</a></span>
0250                    }
0251                    <span class='identifier'><a name='251_17'>ptr</a></span> += <span class='number'><a name='251_24'>1</a></span>
0252                }
0253                <span class='keyword'><a name='253_13'>return</a></span> <span class='identifier'><a name='253_20'>out</a></span>.<span class='identifier'><a name='253_24' title='c:objc(cs)NSString(im)stringByReplacingOccurrencesOfString:withString:'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='253_62'>"&amp;"</a></span>, <span class='identifier'><a name='253_67'>withString</a></span>: <span class='string'><a name='253_79'>"&amp;amp;"</a></span> )
0254                          .<span class='identifier'><a name='254_24' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='254_62'>"&lt;"</a></span>, <span class='identifier'><a name='254_67'>withString</a></span>: <span class='string'><a name='254_79'>"&amp;lt;"</a></span> ) <span class='keyword'><a name='254_88'>as</a></span> <span class='typeidentifier'><a name='254_91' title='s:SS'>String</a></span>
0255            }
0256    
0257            <span class='keyword'><a name='257_9'>var</a></span> <span class='identifier'><a name='257_13'>html</a></span> = <span class='string'><a name='257_20'>""</a></span>
0258    
0259            <span class='keyword'><a name='259_9'>let</a></span> <span class='identifier'><a name='259_13'>resp</a></span> = <span class='identifier'><a name='259_20' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='259_23' href='SourceKit.html#149_10' title='s:FC7siteify9SourceKit9syntaxMapFS0_FTSS12compilerArgsGVSs20UnsafeMutablePointerT___GS1_T__'>syntaxMap</a></span>( <span class='identifier'><a name='259_34'>file</a></span>, <span class='identifier'><a name='259_40'>compilerArgs</a></span>: <span class='identifier'><a name='259_54'>argv</a></span> )
0260            <span class='keyword'><a name='260_9'>let</a></span> <span class='identifier'><a name='260_13'>dict</a></span> = <span class='identifier'><a name='260_20' title='c:@F@sourcekitd_response_get_value'>sourcekitd_response_get_value</a></span>( <span class='identifier'><a name='260_51'>resp</a></span> )
0261            <span class='keyword'><a name='261_9'>let</a></span> <span class='identifier'><a name='261_13'>map</a></span> = <span class='identifier'><a name='261_19' title='c:@F@sourcekitd_variant_dictionary_get_value'>sourcekitd_variant_dictionary_get_value</a></span>( <span class='identifier'><a name='261_60'>dict</a></span>, <span class='identifier'><a name='261_66' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='261_69' href='SourceKit.html#67_14' title='s:vC7siteify9SourceKit8syntaxIDVSs14COpaquePointer'>syntaxID</a></span> )
0262            <span class='identifier'><a name='262_9' title='c:@F@sourcekitd_variant_array_apply'>sourcekitd_variant_array_apply</a></span>( <span class='identifier'><a name='262_41'>map</a></span> ) { (<span class='keyword'><a name='262_50'>_</a></span>,<span class='identifier'><a name='262_52'>dict</a></span>) <span class='keyword'><a name='262_58'>in</a></span>
0263                <span class='keyword'><a name='263_13'>let</a></span> <span class='identifier'><a name='263_17'>offset</a></span> = <span class='identifier'><a name='263_26'>dict</a></span>.<span class='identifier'><a name='263_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='263_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='263_42' href='SourceKit.html#59_14' title='s:vC7siteify9SourceKit8offsetIDVSs14COpaquePointer'>offsetID</a></span> )
0264                <span class='keyword'><a name='264_13'>let</a></span> <span class='identifier'><a name='264_17'>length</a></span> = <span class='identifier'><a name='264_26'>dict</a></span>.<span class='identifier'><a name='264_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='264_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='264_42' href='SourceKit.html#74_14' title='s:vC7siteify9SourceKit8lengthIDVSs14COpaquePointer'>lengthID</a></span> )
0265    
0266                <span class='identifier'><a name='266_13'>html</a></span> += <span class='identifier'><a name='266_21'>skipTo</a></span>( <span class='identifier'><a name='266_29'>offset</a></span> )
0267    
0268                <span class='keyword'><a name='268_13'>let</a></span> <span class='identifier'><a name='268_17'>ent</a></span> = <span class='identifier'><a name='268_23' href='Entity.html#19_5' title='s:FC7siteify6EntitycFMS0_FT4fileSS4lineSi3colSi4kindGSqSS_4declSb_S0_'>Entity</a></span>( <span class='identifier'><a name='268_31'>file</a></span>: <span class='identifier'><a name='268_37'>file</a></span>, <span class='identifier'><a name='268_43'>line</a></span>: <span class='identifier'><a name='268_49'>line</a></span>, <span class='identifier'><a name='268_55'>col</a></span>: <span class='identifier'><a name='268_60'>col</a></span> )
0269                <span class='keyword'><a name='269_13'>let</a></span> <span class='identifier'><a name='269_17'>text</a></span> = <span class='identifier'><a name='269_24'>skipTo</a></span>( <span class='identifier'><a name='269_32'>offset</a></span>+<span class='identifier'><a name='269_39'>length</a></span> )
0270                <span class='keyword'><a name='270_13'>var</a></span> <span class='identifier'><a name='270_17'>span</a></span> = <span class='string'><a name='270_24'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='270_35'>(</a></span><span class='identifier'><a name='270_36'>ent</a></span>.<span class='identifier'><a name='270_40' href='main.html#184_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='270_46'>)</a></span><span class='string'><a name='270_47'>'></a></span>\<span class='string_interpolation_anchor'><a name='270_50'>(</a></span><span class='identifier'><a name='270_51'>text</a></span><span class='string_interpolation_anchor'><a name='270_55'>)</a></span><span class='string'><a name='270_56'>&lt;/a>"</a></span>
0271    
0272                <span class='keyword'><a name='272_13'>let</a></span> <span class='identifier'><a name='272_17'>kind</a></span> = <span class='identifier'><a name='272_24'>dict</a></span>.<span class='identifier'><a name='272_29' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='272_44' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='272_47' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0273                <span class='keyword'><a name='273_13'>let</a></span> <span class='identifier'><a name='273_17'>kindSuffix</a></span> = <span class='identifier'><a name='273_30' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>( <span class='identifier'><a name='273_37'>fileURLWithPath</a></span>: <span class='identifier'><a name='273_54'>kind</a></span> ).<span class='identifier'><a name='273_61' title='c:objc(cs)NSURL(py)pathExtension'>pathExtension</a></span>!
0274    
0275                <span class='keyword'><a name='275_13'>if</a></span> <span class='identifier'><a name='275_16'>kindSuffix</a></span> == <span class='string'><a name='275_30'>"url"</a></span> {
0276                    <span class='identifier'><a name='276_17'>span</a></span> = <span class='string'><a name='276_24'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='276_35'>(</a></span><span class='identifier'><a name='276_36'>text</a></span><span class='string_interpolation_anchor'><a name='276_40'>)</a></span><span class='string'><a name='276_41'>'></a></span>\<span class='string_interpolation_anchor'><a name='276_44'>(</a></span><span class='identifier'><a name='276_45'>text</a></span><span class='string_interpolation_anchor'><a name='276_49'>)</a></span><span class='string'><a name='276_50'>&lt;/a>"</a></span>
0277                }
0278                <span class='keyword'><a name='278_13'>else</a></span> <span class='keyword'><a name='278_18'>if</a></span> <span class='keyword'><a name='278_21'>let</a></span> <span class='identifier'><a name='278_25'>dict</a></span> = <span class='identifier'><a name='278_32' href='main.html#114_5' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span>[<span class='identifier'><a name='278_41'>ent</a></span>], <span class='identifier'><a name='278_47'>usrString</a></span> = <span class='identifier'><a name='278_59'>dict</a></span>.<span class='identifier'><a name='278_64' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='278_75' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='278_78' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0279                    <span class='keyword'><a name='279_17'>if</a></span> <span class='keyword'><a name='279_20'>let</a></span> <span class='identifier'><a name='279_24'>usr</a></span> = <span class='identifier'><a name='279_30' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='279_35'>usrString</a></span>], <span class='identifier'><a name='279_47'>decl</a></span> = <span class='identifier'><a name='279_54'>usr</a></span>.<span class='identifier'><a name='279_58' href='main.html#120_9' title='s:vC7siteify3USR9declaringGSqCS_6Entity_'>declaring</a></span> {
0280                        <span class='keyword'><a name='280_21'>if</a></span> <span class='identifier'><a name='280_24'>decl</a></span> != <span class='identifier'><a name='280_32'>ent</a></span> {
0281                            <span class='identifier'><a name='281_25'>span</a></span> = <span class='string'><a name='281_32'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='281_43'>(</a></span><span class='identifier'><a name='281_44'>ent</a></span>.<span class='identifier'><a name='281_48' href='main.html#184_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='281_54'>)</a></span><span class='string'><a name='281_55'>' href='</a></span>\<span class='string_interpolation_anchor'><a name='281_64'>(</a></span><span class='identifier'><a name='281_65'>decl</a></span>.<span class='identifier'><a name='281_70' href='main.html#192_9' title='s:vC7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='281_74'>)</a></span><span class='string'><a name='281_75'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='281_85'>(</a></span><span class='identifier'><a name='281_86'>usrString</a></span><span class='string_interpolation_anchor'><a name='281_95'>)</a></span><span class='string'><a name='281_96'>'></a></span>\<span class='string_interpolation_anchor'><a name='281_99'>(</a></span><span class='identifier'><a name='281_100'>text</a></span><span class='string_interpolation_anchor'><a name='281_104'>)</a></span><span class='string'><a name='281_105'>&lt;/a>"</a></span>
0282                        }
0283                        <span class='keyword'><a name='283_21'>else</a></span> <span class='keyword'><a name='283_26'>if</a></span> <span class='identifier'><a name='283_29'>usr</a></span>.<span class='identifier'><a name='283_33' href='main.html#118_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>.<span class='identifier'><a name='283_44' title='s:vSa5countSi'>count</a></span> > <span class='number'><a name='283_52'>1</a></span> {
0284                            <span class='keyword'><a name='284_25'>var</a></span> <span class='identifier'><a name='284_29'>popup</a></span> = <span class='string'><a name='284_37'>""</a></span>
0285                            <span class='keyword'><a name='285_25'>for</a></span> <span class='identifier'><a name='285_29'>i</a></span> <span class='keyword'><a name='285_31'>in</a></span> <span class='number'><a name='285_34'>0</a></span>..&lt;<span class='identifier'><a name='285_38'>usr</a></span>.<span class='identifier'><a name='285_42' href='main.html#118_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>.<span class='identifier'><a name='285_53' title='s:vSa5countSi'>count</a></span> {
0286                                <span class='keyword'><a name='286_29'>let</a></span> <span class='identifier'><a name='286_33'>ref</a></span> = <span class='identifier'><a name='286_39'>usr</a></span>.<span class='identifier'><a name='286_43' href='main.html#118_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>[<span class='identifier'><a name='286_54'>i</a></span>]
0287                                <span class='keyword'><a name='287_29'>if</a></span> <span class='identifier'><a name='287_32'>ref</a></span> == <span class='identifier'><a name='287_39'>ent</a></span> {
0288                                    <span class='keyword'><a name='288_33'>continue</a></span>
0289                                }
0290                                <span class='keyword'><a name='290_29'>let</a></span> <span class='identifier'><a name='290_33'>keepListOpen</a></span> = <span class='identifier'><a name='290_48'>ref</a></span>.<span class='identifier'><a name='290_52' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> != <span class='identifier'><a name='290_60'>decl</a></span>.<span class='identifier'><a name='290_65' href='Entity.html#17_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> ? <span class='string'><a name='290_72'>"event.stopPropagation(); "</a></span> : <span class='string'><a name='290_102'>""</a></span>
0291                                <span class='identifier'><a name='291_29'>popup</a></span> += <span class='string'><a name='291_38'>"&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"</a></span>\(<span class='identifier'><a name='291_119'>ref</a></span>.<span class='identifier'><a name='291_123' href='main.html#192_9' title='s:vC7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='291_127'>)</a></span><span class='string'><a name='291_128'>\"; </a></span>\<span class='string_interpolation_anchor'><a name='291_133'>(</a></span><span class='identifier'><a name='291_134'>keepListOpen</a></span><span class='string_interpolation_anchor'><a name='291_146'>)</a></span><span class='string'><a name='291_147'>return false;'></a></span>\<span class='string_interpolation_anchor'><a name='291_163'>(</a></span><span class='identifier'><a name='291_164'>ref</a></span>.<span class='identifier'><a name='291_168' href='main.html#188_9' title='s:vC7siteify6Entity8filenameSS'>filename</a></span><span class='string_interpolation_anchor'><a name='291_176'>)</a></span><span class='string'><a name='291_177'>.swift:</a></span>\<span class='string_interpolation_anchor'><a name='291_185'>(</a></span><span class='identifier'><a name='291_186'>ref</a></span>.<span class='identifier'><a name='291_190' href='Entity.html#17_23' title='s:vC7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='291_194'>)</a></span><span class='string'><a name='291_195'>&lt;/td>"</a></span>
0292                                <span class='identifier'><a name='292_29'>popup</a></span> += <span class='string'><a name='292_38'>"&lt;td>&lt;pre></a></span>\<span class='string_interpolation_anchor'><a name='292_49'>(</a></span><span class='identifier'><a name='292_50'>usr</a></span>.<span class='identifier'><a name='292_54' href='main.html#119_9' title='s:vC7siteify3USR8reflinesGSaSS_'>reflines</a></span>[<span class='identifier'><a name='292_63'>i</a></span>]<span class='string_interpolation_anchor'><a name='292_65'>)</a></span><span class='string'><a name='292_66'>&lt;/pre>&lt;/td>"</a></span>
0293                            }
0294                            <span class='identifier'><a name='294_25'>span</a></span> = <span class='string'><a name='294_32'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='294_43'>(</a></span><span class='identifier'><a name='294_44'>ent</a></span>.<span class='identifier'><a name='294_48' href='main.html#184_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='294_54'>)</a></span><span class='string'><a name='294_55'>' href='#' title='</a></span>\<span class='string_interpolation_anchor'><a name='294_74'>(</a></span><span class='identifier'><a name='294_75'>usrString</a></span><span class='string_interpolation_anchor'><a name='294_84'>)</a></span><span class='string'><a name='294_85'>' onclick='return expand(this);'>"</a></span> +
0295                                            <span class='string'><a name='295_41'>"</a></span>\<span class='string_interpolation_anchor'><a name='295_43'>(</a></span><span class='identifier'><a name='295_44'>text</a></span><span class='string_interpolation_anchor'><a name='295_48'>)</a></span><span class='string'><a name='295_49'>&lt;span class='references'>&lt;table></a></span>\<span class='string_interpolation_anchor'><a name='295_82'>(</a></span><span class='identifier'><a name='295_83'>popup</a></span><span class='string_interpolation_anchor'><a name='295_88'>)</a></span><span class='string'><a name='295_89'>&lt;/table>&lt;/span>&lt;/a>"</a></span>
0296                        }
0297                    }
0298                    <span class='keyword'><a name='298_17'>else</a></span> {
0299                        <span class='identifier'><a name='299_21'>span</a></span> = <span class='string'><a name='299_28'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='299_39'>(</a></span><span class='identifier'><a name='299_40'>ent</a></span>.<span class='identifier'><a name='299_44' href='main.html#184_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='299_50'>)</a></span><span class='string'><a name='299_51'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='299_61'>(</a></span><span class='identifier'><a name='299_62'>usrString</a></span><span class='string_interpolation_anchor'><a name='299_71'>)</a></span><span class='string'><a name='299_72'>'></a></span>\<span class='string_interpolation_anchor'><a name='299_75'>(</a></span><span class='identifier'><a name='299_76'>text</a></span><span class='string_interpolation_anchor'><a name='299_80'>)</a></span><span class='string'><a name='299_81'>&lt;/a>"</a></span>
0300                    }
0301                }
0302    
0303                <span class='identifier'><a name='303_13'>html</a></span> += <span class='string'><a name='303_21'>"&lt;span class='</a></span>\<span class='string_interpolation_anchor'><a name='303_36'>(</a></span><span class='identifier'><a name='303_37'>kindSuffix</a></span><span class='string_interpolation_anchor'><a name='303_47'>)</a></span><span class='string'><a name='303_48'>'></a></span>\<span class='string_interpolation_anchor'><a name='303_51'>(</a></span><span class='identifier'><a name='303_52'>span</a></span><span class='string_interpolation_anchor'><a name='303_56'>)</a></span><span class='string'><a name='303_57'>&lt;/span>"</a></span>
0304                <span class='keyword'><a name='304_13'>return</a></span> <span class='keyword'><a name='304_20'>true</a></span>
0305            }
0306    
0307            <span class='identifier'><a name='307_9'>html</a></span> += <span class='identifier'><a name='307_17'>skipTo</a></span>( <span class='identifier'><a name='307_25'>data</a></span>.<span class='identifier'><a name='307_30' title='c:objc(cs)NSData(py)length'>length</a></span> )
0308    
0309            <span class='keyword'><a name='309_9'>let</a></span> <span class='identifier'><a name='309_13'>htmp</a></span> = <span class='identifier'><a name='309_20' href='SwiftRegex.html#264_13' title='s:F7siteify12RegexMutableFCSo8NSStringCSo15NSMutableString'>RegexMutable</a></span>( <span class='identifier'><a name='309_34'>html</a></span> )
0310            <span class='identifier'><a name='310_9'>line</a></span> = <span class='number'><a name='310_16'>0</a></span>
0311    
0312            <span class='identifier'><a name='312_9'>htmp</a></span>[<span class='string'><a name='312_14'>"(^|\\n)"</a></span>] ~= { (<span class='identifier'><a name='312_31'>group</a></span>: <span class='typeidentifier'><a name='312_38' title='s:SS'>String</a></span>) <span class='keyword'><a name='312_46'>in</a></span>
0313                <span class='identifier'><a name='313_13'>line</a></span> += <span class='number'><a name='313_21'>1</a></span>
0314                <span class='keyword'><a name='314_13'>return</a></span> <span class='identifier'><a name='314_20'>group</a></span> + (<span class='identifier'><a name='314_29' title='s:FE10FoundationCSo8NSStringcFMS0_Ft6formatS0_GSaPSs11CVarArgType___S0_'>NSString</a></span>( <span class='identifier'><a name='314_39'>format</a></span>: <span class='string'><a name='314_47'>"%04d    "</a></span>, <span class='identifier'><a name='314_59'>line</a></span> ) <span class='keyword'><a name='314_66'>as</a></span> <span class='typeidentifier'><a name='314_69' title='s:SS'>String</a></span>)
0315            }
0316    
0317            <span class='keyword'><a name='317_9'>let</a></span> <span class='identifier'><a name='317_13'>out</a></span> = <span class='identifier'><a name='317_19' href='main.html#201_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='317_33'>"source.html"</a></span>, <span class='identifier'><a name='317_48'>patches</a></span>: [:], <span class='identifier'><a name='317_62'>dest</a></span>: <span class='string'><a name='317_68'>"html/"</a></span>+<span class='identifier'><a name='317_76'>filename</a></span> )
0318            <span class='identifier'><a name='318_9' title='c:@F@fputs'>fputs</a></span>( <span class='identifier'><a name='318_16'>htmp</a></span>.<span class='identifier'><a name='318_21' title='c:objc(cs)NSString(py)UTF8String'>UTF8String</a></span>, <span class='identifier'><a name='318_33'>out</a></span> )
0319            <span class='identifier'><a name='319_9' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='319_17'>out</a></span> )
0320        }
0321    }
0322    
0323    <span class='keyword'><a name='323_1'>var</a></span> <span class='identifier'><a name='323_5' href='#' title='s:v7siteify7symbolsGSaTSSSSSS__' onclick='return expand(this);'>symbols<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#328_9"; return false;'>main.swift:328</td><td><pre>        <b title='source.lang.swift.ref.var.global'>symbols</b>.append( (_stdlib_demangleName( "_T"+usrString ), usrString, decl.href) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#334_32"; return false;'>main.swift:334</td><td><pre>for (symbol,usrString,href) in <b title='source.lang.swift.ref.var.global'>symbols</b>.sort( { $0.0 &lt; $1.0 } ) {</pre></td></table></span></a></span> = [(<span class='identifier'><a name='323_17' title='s:SS'>String</a></span>,<span class='identifier'><a name='323_24' title='s:SS'>String</a></span>,<span class='identifier'><a name='323_31' title='s:SS'>String</a></span>)]()
0324    
0325    <span class='keyword'><a name='325_1'>for</a></span> (<span class='identifier'><a name='325_6'>usrString</a></span>, <span class='identifier'><a name='325_17'>usr</a></span>) <span class='keyword'><a name='325_22'>in</a></span> <span class='identifier'><a name='325_25' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span> {
0326        <span class='keyword'><a name='326_5'>if</a></span> <span class='identifier'><a name='326_8'>usrString</a></span>.<span class='identifier'><a name='326_18' title='s:FSS9hasPrefixFSSFSSSb'>hasPrefix</a></span>( <span class='string'><a name='326_29'>"s:"</a></span> ), <span class='keyword'><a name='326_37'>let</a></span> <span class='identifier'><a name='326_41'>decl</a></span> = <span class='identifier'><a name='326_48' href='main.html#124_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='326_53'>usrString</a></span>]?.<span class='identifier'><a name='326_65' href='main.html#120_9' title='s:vC7siteify3USR9declaringGSqCS_6Entity_'>declaring</a></span> {
0327            <span class='keyword'><a name='327_9'>let</a></span> <span class='identifier'><a name='327_13'>usrString</a></span> = <span class='identifier'><a name='327_25'>usrString</a></span>.<span class='identifier'><a name='327_35' title='s:FE10FoundationSS18substringFromIndexFSSFVVSS13CharacterView5IndexSS'>substringFromIndex</a></span>( <span class='identifier'><a name='327_55'>usrString</a></span>.<span class='identifier'><a name='327_65' title='s:vSS10startIndexVVSS13CharacterView5Index'>startIndex</a></span>.<span class='identifier'><a name='327_76' title='s:FeRq_Ss22BidirectionalIndexType_SsS_10advancedByuRq_S__Fq_Fqq_Ss16ForwardIndexType8Distanceq_'>advancedBy</a></span>( <span class='number'><a name='327_88'>2</a></span> ) )
0328            <span class='identifier'><a name='328_9' href='main.html#323_5' title='s:v7siteify7symbolsGSaTSSSSSS__'>symbols</a></span>.<span class='identifier'><a name='328_17' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( (<span class='identifier'><a name='328_26'>_stdlib_demangleName</a></span>( <span class='string'><a name='328_48'>"_T"</a></span>+<span class='identifier'><a name='328_53'>usrString</a></span> ), <span class='identifier'><a name='328_66'>usrString</a></span>, <span class='identifier'><a name='328_77'>decl</a></span>.<span class='identifier'><a name='328_82' href='main.html#192_9' title='s:vC7siteify6Entity4hrefSS'>href</a></span>) )
0329        }
0330    }
0331    
0332    <span class='keyword'><a name='332_1'>let</a></span> <span class='identifier'><a name='332_5' href='#' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>xref<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#336_73"; return false;'>main.swift:336</td><td><pre>    fputs( "&lt;a href='\(href)' title='\(usrString)'>\(symbol)&lt;a>&lt;br>\n", <b title='source.lang.swift.ref.var.global'>xref</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#339_9"; return false;'>main.swift:339</td><td><pre>fclose( <b title='source.lang.swift.ref.var.global'>xref</b> )</pre></td></table></span></a></span> = <span class='identifier'><a name='332_12' href='main.html#201_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='332_26'>"xref.html"</a></span> )
0333    
0334    <span class='keyword'><a name='334_1'>for</a></span> (<span class='identifier'><a name='334_6'>symbol</a></span>,<span class='identifier'><a name='334_13'>usrString</a></span>,<span class='identifier'><a name='334_23'>href</a></span>) <span class='keyword'><a name='334_29'>in</a></span> <span class='identifier'><a name='334_32' href='main.html#323_5' title='s:v7siteify7symbolsGSaTSSSSSS__'>symbols</a></span>.<span class='identifier'><a name='334_40' title='s:FeRq_Ss21MutableCollectionType_SsS_4sortuRq_S__Fq_FFTqqq_Ss14CollectionType9GeneratorSs13GeneratorType7Elementqqq_S0_9GeneratorS1_7Element_SbGSaqqq_S0_9GeneratorS1_7Element_'>sort</a></span>( { <span class='identifier'><a name='334_48'>$0</a></span>.<span class='number'><a name='334_51'>0</a></span> &lt; <span class='identifier'><a name='334_55'>$1</a></span>.<span class='number'><a name='334_58'>0</a></span> } ) {
0335        <span class='keyword'><a name='335_5'>let</a></span> <span class='identifier'><a name='335_9'>symbol</a></span> = <span class='identifier'><a name='335_18'>symbol</a></span>.<span class='identifier'><a name='335_25' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='335_63'>"&lt;"</a></span>, <span class='identifier'><a name='335_68'>withString</a></span>: <span class='string'><a name='335_80'>"&amp;lt;"</a></span> )
0336        <span class='identifier'><a name='336_5' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='336_12'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='336_23'>(</a></span><span class='identifier'><a name='336_24'>href</a></span><span class='string_interpolation_anchor'><a name='336_28'>)</a></span><span class='string'><a name='336_29'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='336_39'>(</a></span><span class='identifier'><a name='336_40'>usrString</a></span><span class='string_interpolation_anchor'><a name='336_49'>)</a></span><span class='string'><a name='336_50'>'></a></span>\<span class='string_interpolation_anchor'><a name='336_53'>(</a></span><span class='identifier'><a name='336_54'>symbol</a></span><span class='string_interpolation_anchor'><a name='336_60'>)</a></span><span class='string'><a name='336_61'>&lt;a>&lt;br>\n"</a></span>, <span class='identifier'><a name='336_73' href='main.html#332_5' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_'>xref</a></span> )
0337    }
0338    
0339    <span class='identifier'><a name='339_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='339_9' href='main.html#332_5' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_'>xref</a></span> )
0340    
0341    <span class='identifier'><a name='341_1' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='341_8'>"&lt;a href='xref.html'>Declared Symbols&lt;a>&lt;br>\n"</a></span>, <span class='identifier'><a name='341_57' href='main.html#219_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0342    
0343    <span class='identifier'><a name='343_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='343_9' href='main.html#219_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0344    
0345    <span class='identifier'><a name='345_1' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='345_11'>"Site built, open ./html/index.html in your browser.\n"</a></span> )
0346    