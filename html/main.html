<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>
0001    <span class='comment'><a name='1_1'>//
0002    </a></span><span class='comment'><a name='2_1'>//  main.swift
0003    </a></span><span class='comment'><a name='3_1'>//  siteify
0004    </a></span><span class='comment'><a name='4_1'>//
0005    </a></span><span class='comment'><a name='5_1'>//  Created by John Holdsworth on 16/02/2016.
0006    </a></span><span class='comment'><a name='6_1'>//  Copyright Â© 2016 John Holdsworth. All rights reserved.
0007    </a></span><span class='comment'><a name='7_1'>//
0008    </a></span><span class='comment'><a name='8_1'>//  $Id: //depot/siteify/siteify/main.swift#12 $
0009    </a></span><span class='comment'><a name='9_1'>//
0010    </a></span><span class='comment'><a name='10_1'>//  Repo: </a></span><span class='url'><a href='https://github.com/johnno1962/siteify'>https://github.com/johnno1962/siteify</a></span><span class='comment'><a name='10_48'>
0011    </a></span><span class='comment'><a name='11_1'>//
0012    </a></span>
0013    <span class='keyword'><a name='13_1'>import</a></span> <span class='identifier'><a name='13_8'>Foundation</a></span>
0014    
0015    <span class='keyword'><a name='15_1'>let</a></span> <span class='identifier'><a name='15_5' href='#' title='s:v7siteify7filemgrCSo13NSFileManager' onclick='return expand(this);'>filemgr<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#27_9"; return false;'>main.swift:27</td><td><pre>        <b>filemgr</b>.createFileAtPath( path, contents:nil, attributes:nil )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#50_16"; return false;'>main.swift:50</td><td><pre>            if <b>filemgr</b>.fileExistsAtPath( failedLog ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#51_22"; return false;'>main.swift:51</td><td><pre>                try! <b>filemgr</b>.removeItemAtPath( failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#56_22"; return false;'>main.swift:56</td><td><pre>                try! <b>filemgr</b>.moveItemAtPath( storedLog, toPath: failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#66_4"; return false;'>main.swift:66</td><td><pre>if <b>filemgr</b>.fileExistsAtPath( storedLog ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#82_83"; return false;'>main.swift:82</td><td><pre>    if storingLog == nil, let symroot = line["^    SYMROOT = ([^\n]+)"][1] where !<b>filemgr</b>.fileExistsAtPath( symroot ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_14"; return false;'>main.swift:84</td><td><pre>        try! <b>filemgr</b>.removeItemAtPath( storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#285_5"; return false;'>main.swift:285</td><td><pre>if !<b>filemgr</b>.fileExistsAtPath( "html" ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#286_10"; return false;'>main.swift:286</td><td><pre>    try! <b>filemgr</b>.createDirectoryAtPath( "html", withIntermediateDirectories: false, attributes: nil )</pre></td></table></span></a></span> = <span class='identifier'><a name='15_15' title='c:objc(cs)NSFileManager'>NSFileManager</a></span>.<span class='identifier'><a name='15_29' title='c:objc(cs)NSFileManager(cm)defaultManager'>defaultManager</a></span>()
0016    <span class='keyword'><a name='16_1'>let</a></span> <span class='identifier'><a name='16_5' href='#' title='s:v7siteify2SKCS_9SourceKit' onclick='return expand(this);'>SK<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#127_40"; return false;'>main.swift:127</td><td><pre>        compilations.append( (primary, <b>SK</b>.array( out ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#237_20"; return false;'>main.swift:237</td><td><pre>        let resp = <b>SK</b>.indexFile( file, compilerArgs: argv )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#239_9"; return false;'>main.swift:239</td><td><pre>        <b>SK</b>.recurseOver( SK.entitiesID, resp: dict, block: { dict in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#239_25"; return false;'>main.swift:239</td><td><pre>        SK.recurseOver( <b>SK</b>.entitiesID, resp: dict, block: { dict in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#240_48"; return false;'>main.swift:240</td><td><pre>            if let usrString = dict.getString( <b>SK</b>.usrID ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#242_40"; return false;'>main.swift:242</td><td><pre>                    line: dict.getInt( <b>SK</b>.lineID ),</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#243_39"; return false;'>main.swift:243</td><td><pre>                    col: dict.getInt( <b>SK</b>.colID ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#249_48"; return false;'>main.swift:249</td><td><pre>                let kind = dict.getUUIDString( <b>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#264_34"; return false;'>main.swift:264</td><td><pre>    if let usr = dict.getString( <b>SK</b>.usrID ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#265_40"; return false;'>main.swift:265</td><td><pre>        let kind = dict.getUUIDString( <b>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#324_20"; return false;'>main.swift:324</td><td><pre>        let resp = <b>SK</b>.syntaxMap( file, compilerArgs: argv )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#326_66"; return false;'>main.swift:326</td><td><pre>        let map = sourcekitd_variant_dictionary_get_value( dict, <b>SK</b>.syntaxID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#328_44"; return false;'>main.swift:328</td><td><pre>            let kind = dict.getUUIDString( <b>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#330_39"; return false;'>main.swift:330</td><td><pre>            let offset = dict.getInt( <b>SK</b>.offsetID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#331_39"; return false;'>main.swift:331</td><td><pre>            let length = dict.getInt( <b>SK</b>.lengthID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#342_75"; return false;'>main.swift:342</td><td><pre>            else if let dict = entities[ent], usrString = dict.getString( <b>SK</b>.usrID ) {</pre></td></table></span></a></span> = <span class='identifier'><a name='16_10' href='SourceKit.html#97_5' title='s:FC7siteify9SourceKitcFMS0_FT_S0_'>SourceKit</a></span>()
0017    <span class='identifier'><a name='17_1' href='SourceKit.html#15_5' title='s:v7siteify5isTTYSb'>isTTY</a></span> = <span class='keyword'><a name='17_9'>false</a></span>
0018    
0019    <span class='keyword'><a name='19_1'>func</a></span> <span class='identifier'><a name='19_6' href='#' title='s:F7siteify8progressFSST_' onclick='return expand(this);'>progress<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#129_13"; return false;'>main.swift:129</td><td><pre>            <b>progress</b>( "Built \(primary)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#234_5"; return false;'>main.swift:234</td><td><pre>    <b>progress</b>( "Indexing \(fileno)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#300_5"; return false;'>main.swift:300</td><td><pre>    <b>progress</b>( "Saving \(fileno)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#415_1"; return false;'>main.swift:415</td><td><pre><b>progress</b>( "Site built, open ./html/index.html in your browser.\n" )</pre></td></table></span></a></span>( <span class='identifier'><a name='19_16'>str</a></span>: <span class='typeidentifier'><a name='19_21' title='s:SS'>String</a></span> ) {
0020        <span class='identifier'><a name='20_5' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='20_12'>"\u{001b}[2K"</a></span>+<span class='identifier'><a name='20_26'>str</a></span>, <span class='identifier'><a name='20_31'>separator</a></span>: <span class='string'><a name='20_42'>""</a></span>, <span class='identifier'><a name='20_46'>terminator</a></span>: <span class='string'><a name='20_58'>"\r"</a></span> )
0021        <span class='identifier'><a name='21_5' title='c:@F@fflush'>fflush</a></span>( <span class='identifier'><a name='21_13' title='s:v6Darwin6stdoutGVSs20UnsafeMutablePointerVSC7__sFILE_'>stdout</a></span> )
0022    }
0023    
0024    <span class='keyword'><a name='24_1'>extension</a></span> <span class='typeidentifier'><a name='24_11' title='c:objc(cs)NSFileHandle'>NSFileHandle</a></span> {
0025    
0026        <span class='builtin'><a name='26_5'>convenience</a></span> <span class='keyword'><a name='26_17' href='#' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__' onclick='return expand(this);'>init<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#75_18"; return false;'>main.swift:75</td><td><pre>    storingLog = <b>NSFileHandle</b>( createForWritingAtPath: storedLog )</pre></td></table></span></a></span>?( <span class='identifier'><a name='26_24'>createForWritingAtPath</a></span> <span class='identifier'><a name='26_47'>path</a></span>: <span class='typeidentifier'><a name='26_53' title='s:SS'>String</a></span> ) {
0027            <span class='identifier'><a name='27_9' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='27_17' title='c:objc(cs)NSFileManager(im)createFileAtPath:contents:attributes:'>createFileAtPath</a></span>( <span class='identifier'><a name='27_35'>path</a></span>, <span class='identifier'><a name='27_41'>contents</a></span>:<span class='keyword'><a name='27_50'>nil</a></span>, <span class='identifier'><a name='27_55'>attributes</a></span>:<span class='keyword'><a name='27_66'>nil</a></span> )
0028            <span class='keyword'><a name='28_9'>self</a></span>.<span class='keyword'><a name='28_14' title='c:objc(cs)NSFileHandle(cm)fileHandleForWritingAtPath:'>init</a></span>( <span class='identifier'><a name='28_20'>forWritingAtPath</a></span>: <span class='identifier'><a name='28_38'>path</a></span> )
0029        }
0030    
0031        <span class='keyword'><a name='31_5'>func</a></span> <span class='identifier'><a name='31_10' href='#' title='s:FE7siteifyCSo12NSFileHandle11writeStringFS0_FSST_' onclick='return expand(this);'>writeString<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#133_17"; return false;'>main.swift:133</td><td><pre>    storingLog?.<b>writeString</b>( line+"\n" )</pre></td></table></span></a></span>( <span class='identifier'><a name='31_23'>str</a></span>: <span class='typeidentifier'><a name='31_28' title='s:SS'>String</a></span> ) {
0032            <span class='identifier'><a name='32_9'>str</a></span>.<span class='identifier'><a name='32_13' title='s:FSS11withCStringurFSSFzFzGVSs13UnsafePointerVSs4Int8_q_q_'>withCString</a></span> { <span class='identifier'><a name='32_27'>bytes</a></span> <span class='keyword'><a name='32_33'>in</a></span>
0033                <span class='identifier'><a name='33_13' title='c:objc(cs)NSFileHandle(im)writeData:'>writeData</a></span>( <span class='identifier'><a name='33_24' title='c:objc(cs)NSData(im)initWithBytesNoCopy:length:freeWhenDone:'>NSData</a></span>( <span class='identifier'><a name='33_32'>bytesNoCopy</a></span>: <span class='identifier'><a name='33_45' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span><<span class='typeidentifier'><a name='33_66' title='s:Ss4Void'>Void</a></span>>(<span class='identifier'><a name='33_72'>bytes</a></span>),
0034                    <span class='identifier'><a name='34_17'>length</a></span>: <span class='identifier'><a name='34_25' title='s:FSicFMSiFSuSi'>Int</a></span>(<span class='identifier'><a name='34_29'>strlen</a></span>(<span class='identifier'><a name='34_36'>bytes</a></span>)), <span class='identifier'><a name='34_45'>freeWhenDone</a></span>: <span class='keyword'><a name='34_59'>false</a></span> ) )
0035            }
0036        }
0037    
0038    }
0039    
0040    <span class='keyword'><a name='40_1'>let</a></span> <span class='identifier'><a name='40_5' href='#' title='s:v7siteify8buildLogCS_13FileGenerator' onclick='return expand(this);'>buildLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#67_5"; return false;'>main.swift:67</td><td><pre>    <b>buildLog</b> = FileGenerator(path: storedLog)!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#74_5"; return false;'>main.swift:74</td><td><pre>    <b>buildLog</b> = StatusGenerator( launchPath: "/usr/bin/xcodebuild", arguments: buildargs )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#80_13"; return false;'>main.swift:80</td><td><pre>for line in <b>buildLog</b>.sequence {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='40_15' href='LineGenerators.html#51_7' title='s:C7siteify13FileGenerator'>FileGenerator</a></span>
0041    <span class='keyword'><a name='41_1'>let</a></span> <span class='identifier'><a name='41_5' href='#' title='s:v7siteify9storedLogSS' onclick='return expand(this);'>storedLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#56_46"; return false;'>main.swift:56</td><td><pre>                try! filemgr.moveItemAtPath( <b>storedLog</b>, toPath: failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#66_30"; return false;'>main.swift:66</td><td><pre>if filemgr.fileExistsAtPath( <b>storedLog</b> ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#67_36"; return false;'>main.swift:67</td><td><pre>    buildLog = FileGenerator(path: <b>storedLog</b>)!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#75_56"; return false;'>main.swift:75</td><td><pre>    storingLog = NSFileHandle( createForWritingAtPath: <b>storedLog</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_40"; return false;'>main.swift:84</td><td><pre>        try! filemgr.removeItemAtPath( <b>storedLog</b> )</pre></td></table></span></a></span> = <span class='string'><a name='41_17'>"siteify.log"</a></span>
0042    <span class='keyword'><a name='42_1'>var</a></span> <span class='identifier'><a name='42_5' href='#' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_' onclick='return expand(this);'>storingLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#75_5"; return false;'>main.swift:75</td><td><pre>    <b>storingLog</b> = NSFileHandle( createForWritingAtPath: storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#82_8"; return false;'>main.swift:82</td><td><pre>    if <b>storingLog</b> == nil, let symroot = line["^    SYMROOT = ([^\n]+)"][1] where !filemgr.fileExistsAtPath( symroot ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#128_12"; return false;'>main.swift:128</td><td><pre>        if <b>storingLog</b> != nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#133_5"; return false;'>main.swift:133</td><td><pre>    <b>storingLog</b>?.writeString( line+"\n" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#136_1"; return false;'>main.swift:136</td><td><pre><b>storingLog</b>?.closeFile()</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='42_17' title='c:objc(cs)NSFileHandle'>NSFileHandle</a></span>? = <span class='keyword'><a name='42_33'>nil</a></span>
0043    
0044    <span class='keyword'><a name='44_1'>class</a></span> <span class='identifier'><a name='44_7' href='#' title='s:C7siteify15StatusGenerator' onclick='return expand(this);'>StatusGenerator<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#74_16"; return false;'>main.swift:74</td><td><pre>    buildLog = <b>StatusGenerator</b>( launchPath: "/usr/bin/xcodebuild", arguments: buildargs )</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='44_24' href='LineGenerators.html#15_7' title='s:C7siteify13TaskGenerator'>TaskGenerator</a></span> {
0045    
0046        <span class='builtin'><a name='46_5'>override</a></span> <span class='keyword'><a name='46_14'>func</a></span> <span class='identifier'><a name='46_19'>next</a></span>() -> <span class='typeidentifier'><a name='46_29' title='s:SS'>String</a></span>? {
0047            <span class='keyword'><a name='47_9'>let</a></span> <span class='identifier'><a name='47_13'>next</a></span> = <span class='keyword'><a name='47_20'>super</a></span>.<span class='identifier'><a name='47_26' href='LineGenerators.html#67_10' title='s:FC7siteify13FileGenerator4nextFS0_FT_GSqSS_'>next</a></span>()
0048            <span class='keyword'><a name='48_9'>if</a></span> <span class='identifier'><a name='48_12'>next</a></span> == <span class='keyword'><a name='48_20'>nil</a></span> {
0049                <span class='keyword'><a name='49_13'>let</a></span> <span class='identifier'><a name='49_17'>failedLog</a></span> = <span class='string'><a name='49_29'>"failed.log"</a></span>
0050                <span class='keyword'><a name='50_13'>if</a></span> <span class='identifier'><a name='50_16' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='50_24' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='50_42'>failedLog</a></span> ) {
0051                    <span class='keyword'><a name='51_17'>try</a></span>! <span class='identifier'><a name='51_22' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='51_30' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='identifier'><a name='51_48'>failedLog</a></span> )
0052                }
0053    
0054                <span class='identifier'><a name='54_13' href='LineGenerators.html#17_9' title='s:vC7siteify13TaskGenerator4taskCSo6NSTask'>task</a></span>.<span class='identifier'><a name='54_18' title='c:objc(cs)NSTask(im)waitUntilExit'>waitUntilExit</a></span>()
0055                <span class='keyword'><a name='55_13'>if</a></span> <span class='identifier'><a name='55_16' href='LineGenerators.html#17_9' title='s:vC7siteify13TaskGenerator4taskCSo6NSTask'>task</a></span>.<span class='identifier'><a name='55_21' title='c:objc(cs)NSTask(py)terminationStatus'>terminationStatus</a></span> != <span class='identifier'><a name='55_42' title='c:@macro@EXIT_SUCCESS'>EXIT_SUCCESS</a></span> {
0056                    <span class='keyword'><a name='56_17'>try</a></span>! <span class='identifier'><a name='56_22' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='56_30' title='c:objc(cs)NSFileManager(im)moveItemAtPath:toPath:error:'>moveItemAtPath</a></span>( <span class='identifier'><a name='56_46' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span>, <span class='identifier'><a name='56_57'>toPath</a></span>: <span class='identifier'><a name='56_65'>failedLog</a></span> )
0057                    <span class='identifier'><a name='57_17' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='57_24'>"xcodebuild failed, consult ./</a></span>\<span class='string_interpolation_anchor'><a name='57_55'>(</a></span><span class='identifier'><a name='57_56'>failedLog</a></span><span class='string_interpolation_anchor'><a name='57_65'>)</a></span><span class='string'><a name='57_66'>"</a></span> )
0058                    <span class='identifier'><a name='58_17' title='c:@F@exit'>exit</a></span>( <span class='number'><a name='58_23'>1</a></span> )
0059                }
0060            }
0061            <span class='keyword'><a name='61_9'>return</a></span> <span class='identifier'><a name='61_16'>next</a></span>
0062        }
0063        
0064    }
0065    
0066    <span class='keyword'><a name='66_1'>if</a></span> <span class='identifier'><a name='66_4' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='66_12' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='66_30' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> ) {
0067        <span class='identifier'><a name='67_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='67_16' href='LineGenerators.html#57_17' title='s:FC7siteify13FileGeneratorcFMS0_FT4pathSS13lineSeparatorGSqSS__GSqS0__'>FileGenerator</a></span>(<span class='identifier'><a name='67_30'>path</a></span>: <span class='identifier'><a name='67_36' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span>)!
0068    }
0069    <span class='keyword'><a name='69_1'>else</a></span> {
0070        <span class='keyword'><a name='70_5'>var</a></span> <span class='identifier'><a name='70_9'>buildargs</a></span> = <span class='identifier'><a name='70_21' title='s:OSs7Process'>Process</a></span>.<span class='identifier'><a name='70_29' title='s:ZvOSs7Process9argumentsGSaSS_'>arguments</a></span>
0071        <span class='string'><a name='71_5'>"/tmp/siteify.XXXX"</a></span>.<span class='identifier'><a name='71_25' title='s:FSS11withCStringurFSSFzFzGVSs13UnsafePointerVSs4Int8_q_q_'>withCString</a></span>( { (<span class='identifier'><a name='71_41'>str</a></span>) <span class='keyword'><a name='71_46'>in</a></span>
0072            <span class='identifier'><a name='72_9'>buildargs</a></span>[<span class='number'><a name='72_19'>0</a></span>] = <span class='string'><a name='72_24'>"SYMROOT="</a></span>+<span class='identifier'><a name='72_35' title='s:SS'>String</a></span>.<span class='identifier'><a name='72_42' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='72_55' title='c:@F@mktemp'>mktemp</a></span>( <span class='identifier'><a name='72_63' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span><<span class='typeidentifier'><a name='72_84' title='s:VSs4Int8'>Int8</a></span>>(<span class='identifier'><a name='72_90'>str</a></span>) ) )!
0073        } )
0074        <span class='identifier'><a name='74_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='74_16' href='LineGenerators.html#23_17' title='s:FC7siteify13TaskGeneratorcFMS0_FT10launchPathSS9argumentsGSaSS_9directoryGSqSS_13lineSeparatorGSqSS__S0_'>StatusGenerator</a></span>( <span class='identifier'><a name='74_33'>launchPath</a></span>: <span class='string'><a name='74_45'>"/usr/bin/xcodebuild"</a></span>, <span class='identifier'><a name='74_68'>arguments</a></span>: <span class='identifier'><a name='74_79'>buildargs</a></span> )
0075        <span class='identifier'><a name='75_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> = <span class='identifier'><a name='75_18' href='main.html#26_17' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__'>NSFileHandle</a></span>( <span class='identifier'><a name='75_32'>createForWritingAtPath</a></span>: <span class='identifier'><a name='75_56' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0076    }
0077    
0078    <span class='keyword'><a name='78_1'>var</a></span> <span class='identifier'><a name='78_5' href='#' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____' onclick='return expand(this);'>compilations<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#127_9"; return false;'>main.swift:127</td><td><pre>        <b>compilations</b>.append( (primary, SK.array( out ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#232_21"; return false;'>main.swift:232</td><td><pre>for (file, argv) in <b>compilations</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#234_37"; return false;'>main.swift:234</td><td><pre>    progress( "Indexing \(fileno)/\(<b>compilations</b>.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#298_21"; return false;'>main.swift:298</td><td><pre>for (file, argv) in <b>compilations</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#300_35"; return false;'>main.swift:300</td><td><pre>    progress( "Saving \(fileno)/\(<b>compilations</b>.count) \(file)" )</pre></td></table></span></a></span> = [(<span class='identifier'><a name='78_22' title='s:SS'>String</a></span>, <span class='identifier'><a name='78_30' title='c:sourcekitd.h@T@sourcekitd_object_t'>sourcekitd_object_t</a></span>)]()
0079    
0080    <span class='keyword'><a name='80_1'>for</a></span> <span class='identifier'><a name='80_5'>line</a></span> <span class='keyword'><a name='80_10'>in</a></span> <span class='identifier'><a name='80_13' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span>.<span class='identifier'><a name='80_22' href='LineGenerators.html#99_9' title='s:vC7siteify13FileGenerator8sequenceGVSs11AnySequenceSS_'>sequence</a></span> {
0081    
0082        <span class='keyword'><a name='82_5'>if</a></span> <span class='identifier'><a name='82_8' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> == <span class='keyword'><a name='82_22'>nil</a></span>, <span class='keyword'><a name='82_27'>let</a></span> <span class='identifier'><a name='82_31'>symroot</a></span> = <span class='identifier'><a name='82_41'>line</a></span>[<span class='string'><a name='82_46'>"^    SYMROOT = ([^\n]+)"</a></span>][<span class='number'><a name='82_73'>1</a></span>] <span class='keyword'><a name='82_76'>where</a></span> !<span class='identifier'><a name='82_83' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='82_91' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='82_109'>symroot</a></span> ) {
0083            <span class='identifier'><a name='83_9' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='83_16'>"Pre-built project no longer exists, rerun to rebuild"</a></span> )
0084            <span class='keyword'><a name='84_9'>try</a></span>! <span class='identifier'><a name='84_14' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='84_22' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='identifier'><a name='84_40' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0085            <span class='identifier'><a name='85_9' title='c:@F@exit'>exit</a></span>( <span class='number'><a name='85_15'>1</a></span> )
0086        }
0087    
0088        <span class='keyword'><a name='88_5'>let</a></span> <span class='identifier'><a name='88_9'>regex</a></span> = <span class='identifier'><a name='88_17'>line</a></span>[<span class='string'><a name='88_22'>"-primary-file (?:\"([^\"]+)\"|(\\S+)) "</a></span>]
0089    
0090        <span class='keyword'><a name='90_5'>if</a></span> <span class='keyword'><a name='90_8'>let</a></span> <span class='identifier'><a name='90_12'>primary</a></span> = <span class='identifier'><a name='90_22'>regex</a></span>[<span class='number'><a name='90_28'>1</a></span>] ?? <span class='identifier'><a name='90_34'>regex</a></span>[<span class='number'><a name='90_40'>2</a></span>] {
0091            <span class='keyword'><a name='91_9'>let</a></span> <span class='identifier'><a name='91_13'>spaceToTheLeftOfAnOddNumberOfQoutes</a></span> = <span class='string'><a name='91_51'>" (?=[^\"]*\"[^\"]*(?:(?:\"[^\"]*){2})* -o )"</a></span>
0092            <span class='keyword'><a name='92_9'>let</a></span> <span class='identifier'><a name='92_13'>line</a></span> = <span class='identifier'><a name='92_20'>line</a></span>
0093                .<span class='identifier'><a name='93_14' title='s:FE10FoundationSS31stringByTrimmingCharactersInSetFSSFCSo14NSCharacterSetSS'>stringByTrimmingCharactersInSet</a></span>( <span class='identifier'><a name='93_47' title='c:objc(cs)NSCharacterSet'>NSCharacterSet</a></span>.<span class='identifier'><a name='93_62' title='c:objc(cs)NSCharacterSet(cm)whitespaceAndNewlineCharacterSet'>whitespaceAndNewlineCharacterSet</a></span>() )
0094                .<span class='identifier'><a name='94_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='94_52'>"\\\""</a></span>, <span class='identifier'><a name='94_60'>withString</a></span>: <span class='string'><a name='94_72'>"---"</a></span> )
0095                .<span class='identifier'><a name='95_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='95_52'>spaceToTheLeftOfAnOddNumberOfQoutes</a></span>,
0096                    <span class='identifier'><a name='96_17'>withString</a></span>: <span class='string'><a name='96_29'>"___"</a></span>, <span class='identifier'><a name='96_36'>options</a></span>: .<span class='identifier'><a name='96_46' title='c:@E@NSStringCompareOptions@NSRegularExpressionSearch'>RegularExpressionSearch</a></span>, <span class='identifier'><a name='96_71'>range</a></span>: <span class='keyword'><a name='96_78'>nil</a></span> )
0097                .<span class='identifier'><a name='97_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='97_52'>"\""</a></span>, <span class='identifier'><a name='97_58'>withString</a></span>: <span class='string'><a name='97_70'>""</a></span> )
0098    
0099            <span class='keyword'><a name='99_9'>let</a></span> <span class='identifier'><a name='99_13'>argv</a></span> = <span class='identifier'><a name='99_20'>line</a></span>.<span class='identifier'><a name='99_25' title='s:FE10FoundationSS27componentsSeparatedByStringFSSFSSGSaSS_'>componentsSeparatedByString</a></span>( <span class='string'><a name='99_54'>" "</a></span> )
0100                .<span class='identifier'><a name='100_14' title='s:FeRq_Ss14CollectionType_SsS_3mapu__Rq_S__Fq_FzFzqqq_S_9GeneratorSs13GeneratorType7Elementqd__GSaqd___'>map</a></span> { <span class='identifier'><a name='100_20'>$0</a></span>.<span class='identifier'><a name='100_23' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='100_61'>"___"</a></span>, <span class='identifier'><a name='100_68'>withString</a></span>: <span class='string'><a name='100_80'>" "</a></span> )
0101                .<span class='identifier'><a name='101_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='101_52'>"---"</a></span>, <span class='identifier'><a name='101_59'>withString</a></span>: <span class='string'><a name='101_71'>"\""</a></span> ) }
0102    
0103            <span class='keyword'><a name='103_9'>var</a></span> <span class='identifier'><a name='103_13'>out</a></span> = [<span class='identifier'><a name='103_20' title='s:SS'>String</a></span>]()
0104            <span class='keyword'><a name='104_9'>var</a></span> <span class='identifier'><a name='104_13'>i</a></span>=<span class='number'><a name='104_15'>1</a></span>
0105    
0106            <span class='keyword'><a name='106_9'>while</a></span> <span class='identifier'><a name='106_15'>i</a></span><<span class='identifier'><a name='106_17'>argv</a></span>.<span class='identifier'><a name='106_22' title='s:vSa5countSi'>count</a></span> {
0107                <span class='keyword'><a name='107_13'>let</a></span> <span class='identifier'><a name='107_17'>arg</a></span> = <span class='identifier'><a name='107_23'>argv</a></span>[<span class='identifier'><a name='107_28'>i</a></span>]
0108                <span class='keyword'><a name='108_13'>if</a></span> <span class='identifier'><a name='108_16'>arg</a></span> == <span class='string'><a name='108_23'>"-frontend"</a></span> {
0109                    <span class='identifier'><a name='109_17'>out</a></span>.<span class='identifier'><a name='109_21' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='string'><a name='109_29'>"-Xfrontend"</a></span> )
0110                    <span class='identifier'><a name='110_17'>out</a></span>.<span class='identifier'><a name='110_21' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='string'><a name='110_29'>"-j4"</a></span> )
0111                }
0112                <span class='keyword'><a name='112_13'>else</a></span> <span class='keyword'><a name='112_18'>if</a></span> <span class='identifier'><a name='112_21'>arg</a></span> == <span class='string'><a name='112_28'>"-primary-file"</a></span> {
0113                }
0114                <span class='keyword'><a name='114_13'>else</a></span> <span class='keyword'><a name='114_18'>if</a></span> <span class='identifier'><a name='114_21'>arg</a></span>.<span class='identifier'><a name='114_25' title='s:FSS9hasPrefixFSSFSSSb'>hasPrefix</a></span>( <span class='string'><a name='114_36'>"-emit-"</a></span> ) ||
0115                    <span class='identifier'><a name='115_17'>arg</a></span> == <span class='string'><a name='115_24'>"-serialize-diagnostics-path"</a></span> {
0116                        <span class='identifier'><a name='116_21'>i</a></span> += <span class='number'><a name='116_26'>1</a></span>
0117                }
0118                <span class='keyword'><a name='118_13'>else</a></span> <span class='keyword'><a name='118_18'>if</a></span> <span class='identifier'><a name='118_21'>arg</a></span> == <span class='string'><a name='118_28'>"-o"</a></span> {
0119                    <span class='keyword'><a name='119_17'>break</a></span>
0120                }
0121                <span class='keyword'><a name='121_13'>else</a></span> {
0122                    <span class='identifier'><a name='122_17'>out</a></span>.<span class='identifier'><a name='122_21' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='122_29'>arg</a></span> )
0123                }
0124                <span class='identifier'><a name='124_13'>i</a></span> += <span class='number'><a name='124_18'>1</a></span>
0125            }
0126    
0127            <span class='identifier'><a name='127_9' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='127_22' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( (<span class='identifier'><a name='127_31'>primary</a></span>, <span class='identifier'><a name='127_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='127_43' href='SourceKit.html#101_10' title='s:FC7siteify9SourceKit5arrayFS0_FGSaSS_GVSs20UnsafeMutablePointerT__'>array</a></span>( <span class='identifier'><a name='127_50'>out</a></span> ) ) )
0128            <span class='keyword'><a name='128_9'>if</a></span> <span class='identifier'><a name='128_12' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> != <span class='keyword'><a name='128_26'>nil</a></span> {
0129                <span class='identifier'><a name='129_13' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='129_23'>"Built </a></span>\<span class='string_interpolation_anchor'><a name='129_31'>(</a></span><span class='identifier'><a name='129_32'>primary</a></span><span class='string_interpolation_anchor'><a name='129_39'>)</a></span><span class='string'><a name='129_40'>"</a></span> )
0130            }
0131        }
0132    
0133        <span class='identifier'><a name='133_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span>?.<span class='identifier'><a name='133_17' href='main.html#31_10' title='s:FE7siteifyCSo12NSFileHandle11writeStringFS0_FSST_'>writeString</a></span>( <span class='identifier'><a name='133_30'>line</a></span>+<span class='string'><a name='133_35'>"\n"</a></span> )
0134    }
0135    
0136    <span class='identifier'><a name='136_1' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span>?.<span class='identifier'><a name='136_13' title='c:objc(cs)NSFileHandle(im)closeFile'>closeFile</a></span>()
0137    
0138    <span class='keyword'><a name='138_1'>var</a></span> <span class='identifier'><a name='138_5' href='#' title='s:v7siteify15filenameForFileGVSs10DictionarySSSS_' onclick='return expand(this);'>filenameForFile<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#141_23"; return false;'>main.swift:141</td><td><pre>    if let filename = <b>filenameForFile</b>[file] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#149_5"; return false;'>main.swift:149</td><td><pre>    <b>filenameForFile</b>[file] = filename</pre></td></table></span></a></span> = [<span class='identifier'><a name='138_24' title='s:SS'>String</a></span>:<span class='identifier'><a name='138_31' title='s:SS'>String</a></span>](), <span class='identifier'><a name='138_42' href='#' title='s:v7siteify16filesForFileNameGVSs10DictionarySSSS_' onclick='return expand(this);'>filesForFileName<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#145_11"; return false;'>main.swift:145</td><td><pre>    while <b>filesForFileName</b>[filename] != nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#148_5"; return false;'>main.swift:148</td><td><pre>    <b>filesForFileName</b>[filename] = file</pre></td></table></span></a></span> = [<span class='identifier'><a name='138_62' title='s:SS'>String</a></span>:<span class='identifier'><a name='138_69' title='s:SS'>String</a></span>]()
0139    
0140    <span class='keyword'><a name='140_1'>func</a></span> <span class='identifier'><a name='140_6' href='#' title='s:F7siteify12fileFilenameFSSSS' onclick='return expand(this);'>fileFilename<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#168_16"; return false;'>main.swift:168</td><td><pre>        return <b>fileFilename</b>( file )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#381_24"; return false;'>main.swift:381</td><td><pre>        let filename = <b>fileFilename</b>( file )+".html"</pre></td></table></span></a></span>( <span class='identifier'><a name='140_20'>file</a></span>: <span class='typeidentifier'><a name='140_26' title='s:SS'>String</a></span> ) -> <span class='typeidentifier'><a name='140_38' title='s:SS'>String</a></span> {
0141        <span class='keyword'><a name='141_5'>if</a></span> <span class='keyword'><a name='141_8'>let</a></span> <span class='identifier'><a name='141_12'>filename</a></span> = <span class='identifier'><a name='141_23' href='main.html#138_5' title='s:v7siteify15filenameForFileGVSs10DictionarySSSS_'>filenameForFile</a></span>[<span class='identifier'><a name='141_39'>file</a></span>] {
0142            <span class='keyword'><a name='142_9'>return</a></span> <span class='identifier'><a name='142_16'>filename</a></span>
0143        }
0144        <span class='keyword'><a name='144_5'>var</a></span> <span class='identifier'><a name='144_9'>filename</a></span> = <span class='identifier'><a name='144_20' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>( <span class='identifier'><a name='144_27'>fileURLWithPath</a></span>: <span class='identifier'><a name='144_44'>file</a></span> ).<span class='identifier'><a name='144_51' title='c:objc(cs)NSURL(py)URLByDeletingPathExtension'>URLByDeletingPathExtension</a></span>!.<span class='identifier'><a name='144_79' title='c:objc(cs)NSURL(py)lastPathComponent'>lastPathComponent</a></span>!
0145        <span class='keyword'><a name='145_5'>while</a></span> <span class='identifier'><a name='145_11' href='main.html#138_42' title='s:v7siteify16filesForFileNameGVSs10DictionarySSSS_'>filesForFileName</a></span>[<span class='identifier'><a name='145_28'>filename</a></span>] != <span class='keyword'><a name='145_41'>nil</a></span> {
0146            <span class='identifier'><a name='146_9'>filename</a></span> += <span class='string'><a name='146_21'>"_"</a></span>
0147        }
0148        <span class='identifier'><a name='148_5' href='main.html#138_42' title='s:v7siteify16filesForFileNameGVSs10DictionarySSSS_'>filesForFileName</a></span>[<span class='identifier'><a name='148_22'>filename</a></span>] = <span class='identifier'><a name='148_34'>file</a></span>
0149        <span class='identifier'><a name='149_5' href='main.html#138_5' title='s:v7siteify15filenameForFileGVSs10DictionarySSSS_'>filenameForFile</a></span>[<span class='identifier'><a name='149_21'>file</a></span>] = <span class='identifier'><a name='149_29'>filename</a></span>
0150        <span class='keyword'><a name='150_5'>return</a></span> <span class='identifier'><a name='150_12'>filename</a></span>
0151    }
0152    
0153    <span class='keyword'><a name='153_1'>struct</a></span> <span class='identifier'><a name='153_8' href='#' title='s:V7siteify6Entity' onclick='return expand(this);'>Entity<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#211_14"; return false;'>main.swift:211</td><td><pre>func ==(lhs: <b>Entity</b>, rhs: Entity) -> Bool {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#211_27"; return false;'>main.swift:211</td><td><pre>func ==(lhs: Entity, rhs: <b>Entity</b>) -> Bool {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#215_17"; return false;'>main.swift:215</td><td><pre>var entities = [<b>Entity</b>:sourcekitd_variant_t]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#219_23"; return false;'>main.swift:219</td><td><pre>    var references = [<b>Entity</b>]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#221_20"; return false;'>main.swift:221</td><td><pre>    var declaring: <b>Entity</b>?</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#241_30"; return false;'>main.swift:241</td><td><pre>                let entity = <b>Entity</b>( file: file,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#335_23"; return false;'>main.swift:335</td><td><pre>            let ent = <b>Entity</b>(file: file, line: line, col: col)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#393_25"; return false;'>main.swift:393</td><td><pre>var xrefData = [(String,<b>Entity</b>)]()</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='153_16' title='s:PSs8Hashable'>Hashable</a></span> {
0154    
0155        <span class='keyword'><a name='155_5'>let</a></span> <span class='identifier'><a name='155_9' href='#' title='s:vV7siteify6Entity4fileSS' onclick='return expand(this);'>file<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#168_30"; return false;'>main.swift:168</td><td><pre>        return fileFilename( <b>file</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_62"; return false;'>main.swift:212</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.<b>file</b> == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_74"; return false;'>main.swift:212</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.file == rhs.<b>file</b></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#354_52"; return false;'>main.swift:354</td><td><pre>                            let keepListOpen = ref.<b>file</b> != decl.file ? "event.stopPropagation(); " : ""</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#354_65"; return false;'>main.swift:354</td><td><pre>                            let keepListOpen = ref.file != decl.<b>file</b> ? "event.stopPropagation(); " : ""</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='155_15' title='s:SS'>String</a></span>
0156        <span class='keyword'><a name='156_5'>let</a></span> <span class='identifier'><a name='156_9' href='#' title='s:vV7siteify6Entity4lineSi' onclick='return expand(this);'>line<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#160_20"; return false;'>main.swift:160</td><td><pre>        return Int(<b>line</b> + col)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#164_19"; return false;'>main.swift:164</td><td><pre>        return "\(<b>line</b>)_\(col)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#177_25"; return false;'>main.swift:177</td><td><pre>        var line = self.<b>line</b></pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#197_37"; return false;'>main.swift:197</td><td><pre>        return "MATCH FAILED line:\(<b>line</b>) column:\(col)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_16"; return false;'>main.swift:212</td><td><pre>    return lhs.<b>line</b> == rhs.line &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_28"; return false;'>main.swift:212</td><td><pre>    return lhs.line == rhs.<b>line</b> &amp;&amp; lhs.col == rhs.col &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#355_190"; return false;'>main.swift:355</td><td><pre>                            popup += "&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"\(ref.href)\"; \(keepListOpen)return false;'>\(ref.filename).swift:\(ref.<b>line</b>)&lt;/td>"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='156_15' title='s:Si'>Int</a></span>
0157        <span class='keyword'><a name='157_5'>let</a></span> <span class='identifier'><a name='157_9' href='#' title='s:vV7siteify6Entity3colSi' onclick='return expand(this);'>col<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#160_27"; return false;'>main.swift:160</td><td><pre>        return Int(line + <b>col</b>)</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#164_27"; return false;'>main.swift:164</td><td><pre>        return "\(line)_\(<b>col</b>)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#182_24"; return false;'>main.swift:182</td><td><pre>        var col = self.<b>col</b>, largecol = ""</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#197_52"; return false;'>main.swift:197</td><td><pre>        return "MATCH FAILED line:\(line) column:\(<b>col</b>)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_40"; return false;'>main.swift:212</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.<b>col</b> == rhs.col &amp;&amp; lhs.file == rhs.file</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_51"; return false;'>main.swift:212</td><td><pre>    return lhs.line == rhs.line &amp;&amp; lhs.col == rhs.<b>col</b> &amp;&amp; lhs.file == rhs.file</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='157_14' title='s:Si'>Int</a></span>
0158    
0159        <span class='keyword'><a name='159_5'>var</a></span> <span class='identifier'><a name='159_9'>hashValue</a></span>: <span class='typeidentifier'><a name='159_20' title='s:Si'>Int</a></span> {
0160            <span class='keyword'><a name='160_9'>return</a></span> <span class='identifier'><a name='160_16' title='s:FSicFMSiFSiSi'>Int</a></span>(<span class='identifier'><a name='160_20' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span> + <span class='identifier'><a name='160_27' href='main.html#157_9' title='s:vV7siteify6Entity3colSi'>col</a></span>)
0161        }
0162    
0163        <span class='keyword'><a name='163_5'>var</a></span> <span class='identifier'><a name='163_9' href='#' title='s:vV7siteify6Entity6anchorSS' onclick='return expand(this);'>anchor<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#172_36"; return false;'>main.swift:172</td><td><pre>        return "\(filename).html#\(<b>anchor</b>)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#337_40"; return false;'>main.swift:337</td><td><pre>            var span = "&lt;a name='\(ent.<b>anchor</b>)'>\(text)&lt;/a>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#345_48"; return false;'>main.swift:345</td><td><pre>                        span = "&lt;a name='\(ent.<b>anchor</b>)' href='\(decl.href)' title='\(usrString)'>\(text)&lt;/a>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#358_48"; return false;'>main.swift:358</td><td><pre>                        span = "&lt;a name='\(ent.<b>anchor</b>)' href='#' title='\(usrString)' onclick='return expand(this);'>" +</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#363_44"; return false;'>main.swift:363</td><td><pre>                    span = "&lt;a name='\(ent.<b>anchor</b>)' title='\(usrString)'>\(text)&lt;/a>"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='163_17' title='s:SS'>String</a></span> {
0164            <span class='keyword'><a name='164_9'>return</a></span> <span class='string'><a name='164_16'>"</a></span>\<span class='string_interpolation_anchor'><a name='164_18'>(</a></span><span class='identifier'><a name='164_19' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='164_23'>)</a></span><span class='string'><a name='164_24'>_</a></span>\<span class='string_interpolation_anchor'><a name='164_26'>(</a></span><span class='identifier'><a name='164_27' href='main.html#157_9' title='s:vV7siteify6Entity3colSi'>col</a></span><span class='string_interpolation_anchor'><a name='164_30'>)</a></span><span class='string'><a name='164_31'>"</a></span>
0165        }
0166    
0167        <span class='keyword'><a name='167_5'>var</a></span> <span class='identifier'><a name='167_9' href='#' title='s:vV7siteify6Entity8filenameSS' onclick='return expand(this);'>filename<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#172_19"; return false;'>main.swift:172</td><td><pre>        return "\(<b>filename</b>).html#\(anchor)"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#355_168"; return false;'>main.swift:355</td><td><pre>                            popup += "&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"\(ref.href)\"; \(keepListOpen)return false;'>\(ref.<b>filename</b>).swift:\(ref.line)&lt;/td>"</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='167_19' title='s:SS'>String</a></span> {
0168            <span class='keyword'><a name='168_9'>return</a></span> <span class='identifier'><a name='168_16' href='main.html#140_6' title='s:F7siteify12fileFilenameFSSSS'>fileFilename</a></span>( <span class='identifier'><a name='168_30' href='main.html#155_9' title='s:vV7siteify6Entity4fileSS'>file</a></span> )
0169        }
0170    
0171        <span class='keyword'><a name='171_5'>var</a></span> <span class='identifier'><a name='171_9' href='#' title='s:vV7siteify6Entity4hrefSS' onclick='return expand(this);'>href<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#345_70"; return false;'>main.swift:345</td><td><pre>                        span = "&lt;a name='\(ent.anchor)' href='\(decl.<b>href</b>)' title='\(usrString)'>\(text)&lt;/a>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#355_123"; return false;'>main.swift:355</td><td><pre>                            popup += "&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"\(ref.<b>href</b>)\"; \(keepListOpen)return false;'>\(ref.filename).swift:\(ref.line)&lt;/td>"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#410_29"; return false;'>main.swift:410</td><td><pre>    fputs( "&lt;a href='\(decl.<b>href</b>)'>\(symbol)&lt;a>&lt;br>\n", xref )</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='171_15' title='s:SS'>String</a></span> {
0172            <span class='keyword'><a name='172_9'>return</a></span> <span class='string'><a name='172_16'>"</a></span>\<span class='string_interpolation_anchor'><a name='172_18'>(</a></span><span class='identifier'><a name='172_19' href='main.html#167_9' title='s:vV7siteify6Entity8filenameSS'>filename</a></span><span class='string_interpolation_anchor'><a name='172_27'>)</a></span><span class='string'><a name='172_28'>.html#</a></span>\<span class='string_interpolation_anchor'><a name='172_35'>(</a></span><span class='identifier'><a name='172_36' href='main.html#163_9' title='s:vV7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='172_42'>)</a></span><span class='string'><a name='172_43'>"</a></span>
0173        }
0174    
0175        <span class='keyword'><a name='175_5'>func</a></span> <span class='identifier'><a name='175_10' href='#' title='s:FV7siteify6Entity5regexFS0_FSSCS_9ByteRegex' onclick='return expand(this);'>regex<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#192_26"; return false;'>main.swift:192</td><td><pre>        if let matches = <b>regex</b>( value ).match( contents ) {</pre></td></table></span></a></span>( <span class='identifier'><a name='175_17'>text</a></span>: <span class='typeidentifier'><a name='175_23' title='s:SS'>String</a></span> ) -> <span class='typeidentifier'><a name='175_35' href='ByteRegex.html#23_7' title='s:C7siteify9ByteRegex'>ByteRegex</a></span> {
0176            <span class='keyword'><a name='176_9'>var</a></span> <span class='identifier'><a name='176_13'>pattern</a></span> = <span class='string'><a name='176_23'>"^"</a></span>
0177            <span class='keyword'><a name='177_9'>var</a></span> <span class='identifier'><a name='177_13'>line</a></span> = <span class='keyword'><a name='177_20'>self</a></span>.<span class='identifier'><a name='177_25' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span>
0178            <span class='keyword'><a name='178_9'>while</a></span> <span class='identifier'><a name='178_15'>line</a></span> > <span class='number'><a name='178_22'>100</a></span> {
0179                <span class='identifier'><a name='179_13'>pattern</a></span> += <span class='string'><a name='179_24'>"(?:[^\n]*\n){100}"</a></span>
0180                <span class='identifier'><a name='180_13'>line</a></span> -= <span class='number'><a name='180_21'>100</a></span>
0181            }
0182            <span class='keyword'><a name='182_9'>var</a></span> <span class='identifier'><a name='182_13'>col</a></span> = <span class='keyword'><a name='182_19'>self</a></span>.<span class='identifier'><a name='182_24' href='main.html#157_9' title='s:vV7siteify6Entity3colSi'>col</a></span>, <span class='identifier'><a name='182_29'>largecol</a></span> = <span class='string'><a name='182_40'>""</a></span>
0183            <span class='keyword'><a name='183_9'>while</a></span> <span class='identifier'><a name='183_15'>col</a></span> > <span class='number'><a name='183_21'>100</a></span> {
0184                <span class='identifier'><a name='184_13'>largecol</a></span> += <span class='string'><a name='184_25'>".{100}"</a></span>
0185                <span class='identifier'><a name='185_13'>col</a></span> -= <span class='number'><a name='185_20'>100</a></span>
0186            }
0187            <span class='identifier'><a name='187_9'>pattern</a></span> += <span class='string'><a name='187_20'>"(?:[^\n]*\n){</a></span>\<span class='string_interpolation_anchor'><a name='187_35'>(</a></span><span class='identifier'><a name='187_36'>line</a></span>-<span class='number'><a name='187_41'>1</a></span><span class='string_interpolation_anchor'><a name='187_42'>)</a></span><span class='string'><a name='187_43'>}(</a></span>\<span class='string_interpolation_anchor'><a name='187_46'>(</a></span><span class='identifier'><a name='187_47'>largecol</a></span><span class='string_interpolation_anchor'><a name='187_55'>)</a></span><span class='string'><a name='187_56'>.{</a></span>\<span class='string_interpolation_anchor'><a name='187_59'>(</a></span><span class='identifier'><a name='187_60'>col</a></span>-<span class='number'><a name='187_64'>1</a></span><span class='string_interpolation_anchor'><a name='187_65'>)</a></span><span class='string'><a name='187_66'>}[^\n]*?)(</a></span>\<span class='string_interpolation_anchor'><a name='187_77'>(</a></span><span class='identifier'><a name='187_78'>text</a></span><span class='string_interpolation_anchor'><a name='187_82'>)</a></span><span class='string'><a name='187_83'>)([^\n]*)"</a></span>
0188            <span class='keyword'><a name='188_9'>return</a></span> <span class='identifier'><a name='188_16' href='ByteRegex.html#28_5' title='s:FC7siteify9ByteRegexcFMS0_FT7patternSS6cflagsVSs5Int32_S0_'>ByteRegex</a></span>( <span class='identifier'><a name='188_27'>pattern</a></span>: <span class='identifier'><a name='188_36'>pattern</a></span> )
0189        }
0190    
0191        <span class='keyword'><a name='191_5'>func</a></span> <span class='identifier'><a name='191_10' href='#' title='s:FV7siteify6Entity9patchTextFS0_FTCSo6NSData5valueSS_GSqSS_' onclick='return expand(this);'>patchText<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#252_49"; return false;'>main.swift:252</td><td><pre>                    usr.reflines.append( entity.<b>patchText</b>( data, value: "\\w*" )! )</pre></td></table></span></a></span>( <span class='identifier'><a name='191_21'>contents</a></span>: <span class='typeidentifier'><a name='191_31' title='c:objc(cs)NSData'>NSData</a></span>, <span class='identifier'><a name='191_39'>value</a></span>: <span class='typeidentifier'><a name='191_46' title='s:SS'>String</a></span> ) -> <span class='typeidentifier'><a name='191_58' title='s:SS'>String</a></span>? {
0192            <span class='keyword'><a name='192_9'>if</a></span> <span class='keyword'><a name='192_12'>let</a></span> <span class='identifier'><a name='192_16'>matches</a></span> = <span class='identifier'><a name='192_26' href='main.html#175_10' title='s:FV7siteify6Entity5regexFS0_FSSCS_9ByteRegex'>regex</a></span>( <span class='identifier'><a name='192_33'>value</a></span> ).<span class='identifier'><a name='192_41' href='ByteRegex.html#37_10' title='s:FC7siteify9ByteRegex5matchFS0_FTCSo6NSData6mflagsVSs5Int32_GSqGSaVSC10regmatch_t__'>match</a></span>( <span class='identifier'><a name='192_48'>contents</a></span> ) {
0193                <span class='keyword'><a name='193_13'>return</a></span> <span class='identifier'><a name='193_20' href='main.html#200_10' title='s:FV7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS'>htmlClean</a></span>( <span class='identifier'><a name='193_31'>contents</a></span>, <span class='identifier'><a name='193_41'>match</a></span>: <span class='identifier'><a name='193_48'>matches</a></span>[<span class='number'><a name='193_56'>1</a></span>] ) +
0194               <span class='string'><a name='194_12'>"&lt;b>"</a></span> + <span class='identifier'><a name='194_20' href='main.html#200_10' title='s:FV7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS'>htmlClean</a></span>( <span class='identifier'><a name='194_31'>contents</a></span>, <span class='identifier'><a name='194_41'>match</a></span>: <span class='identifier'><a name='194_48'>matches</a></span>[<span class='number'><a name='194_56'>2</a></span>] ) + <span class='string'><a name='194_63'>"&lt;/b>"</a></span> +
0195                       <span class='identifier'><a name='195_20' href='main.html#200_10' title='s:FV7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS'>htmlClean</a></span>( <span class='identifier'><a name='195_31'>contents</a></span>, <span class='identifier'><a name='195_41'>match</a></span>: <span class='identifier'><a name='195_48'>matches</a></span>[<span class='number'><a name='195_56'>3</a></span>] )
0196            }
0197            <span class='keyword'><a name='197_9'>return</a></span> <span class='string'><a name='197_16'>"MATCH FAILED line:</a></span>\<span class='string_interpolation_anchor'><a name='197_36'>(</a></span><span class='identifier'><a name='197_37' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='197_41'>)</a></span><span class='string'><a name='197_42'> column:</a></span>\<span class='string_interpolation_anchor'><a name='197_51'>(</a></span><span class='identifier'><a name='197_52' href='main.html#157_9' title='s:vV7siteify6Entity3colSi'>col</a></span><span class='string_interpolation_anchor'><a name='197_55'>)</a></span><span class='string'><a name='197_56'>"</a></span>
0198        }
0199    
0200        <span class='keyword'><a name='200_5'>func</a></span> <span class='identifier'><a name='200_10' href='#' title='s:FV7siteify6Entity9htmlCleanFS0_FTCSo6NSData5matchVSC10regmatch_t_SS' onclick='return expand(this);'>htmlClean<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#193_20"; return false;'>main.swift:193</td><td><pre>            return <b>htmlClean</b>( contents, match: matches[1] ) +</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#194_20"; return false;'>main.swift:194</td><td><pre>           "&lt;b>" + <b>htmlClean</b>( contents, match: matches[2] ) + "&lt;/b>" +</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#195_20"; return false;'>main.swift:195</td><td><pre>                   <b>htmlClean</b>( contents, match: matches[3] )</pre></td></table></span></a></span>( <span class='identifier'><a name='200_21'>contents</a></span>: <span class='typeidentifier'><a name='200_31' title='c:objc(cs)NSData'>NSData</a></span>, <span class='identifier'><a name='200_39'>match</a></span>: <span class='typeidentifier'><a name='200_46' title='c:@SA@regmatch_t'>regmatch_t</a></span> ) -> <span class='typeidentifier'><a name='200_62' title='s:SS'>String</a></span> {
0201            <span class='keyword'><a name='201_9'>var</a></span> <span class='identifier'><a name='201_13'>range</a></span> = <span class='identifier'><a name='201_21'>match</a></span>.<span class='identifier'><a name='201_27' href='ByteRegex.html#17_9' title='s:vE7siteifyVSC10regmatch_t5rangeVSC8_NSRange'>range</a></span>
0202            <span class='keyword'><a name='202_9'>if</a></span> <span class='identifier'><a name='202_12'>range</a></span>.<span class='identifier'><a name='202_18' title='c:@S@_NSRange@FI@length'>length</a></span> > <span class='identifier'><a name='202_27'>contents</a></span>.<span class='identifier'><a name='202_36' title='c:objc(cs)NSData(py)length'>length</a></span> - <span class='identifier'><a name='202_45'>range</a></span>.<span class='identifier'><a name='202_51' title='c:@S@_NSRange@FI@location'>location</a></span> {
0203                <span class='identifier'><a name='203_13'>range</a></span>.<span class='identifier'><a name='203_19' title='c:@S@_NSRange@FI@length'>length</a></span> = <span class='identifier'><a name='203_28'>contents</a></span>.<span class='identifier'><a name='203_37' title='c:objc(cs)NSData(py)length'>length</a></span> - <span class='identifier'><a name='203_46'>range</a></span>.<span class='identifier'><a name='203_52' title='c:@S@_NSRange@FI@location'>location</a></span>
0204            }
0205            <span class='keyword'><a name='205_9'>return</a></span> <span class='identifier'><a name='205_16' title='s:SS'>String</a></span>.<span class='identifier'><a name='205_23' href='LineGenerators.html#110_17' title='s:ZFE7siteifySS8fromDataFMSSFTCSo6NSData8encodingSu_GSqSS_'>fromData</a></span>( <span class='identifier'><a name='205_33'>contents</a></span>.<span class='identifier'><a name='205_42' title='c:objc(cs)NSData(im)subdataWithRange:'>subdataWithRange</a></span>( <span class='identifier'><a name='205_60'>range</a></span> ) )?
0206                .<span class='identifier'><a name='206_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='206_52'>"&"</a></span>, <span class='identifier'><a name='206_57'>withString</a></span>: <span class='string'><a name='206_69'>"&amp;"</a></span> )
0207                .<span class='identifier'><a name='207_14' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='207_52'>"&lt;"</a></span>, <span class='identifier'><a name='207_57'>withString</a></span>: <span class='string'><a name='207_69'>"&lt;"</a></span> ) ?? <span class='string'><a name='207_81'>"CONVERSION FAILED"</a></span>
0208        }
0209    }
0210    
0211    <span class='keyword'><a name='211_1'>func</a></span> ==(<span class='identifier'><a name='211_9'>lhs</a></span>: <span class='typeidentifier'><a name='211_14' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>, <span class='identifier'><a name='211_22'>rhs</a></span>: <span class='typeidentifier'><a name='211_27' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>) -> <span class='typeidentifier'><a name='211_38' title='s:Sb'>Bool</a></span> {
0212        <span class='keyword'><a name='212_5'>return</a></span> <span class='identifier'><a name='212_12'>lhs</a></span>.<span class='identifier'><a name='212_16' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span> == <span class='identifier'><a name='212_24'>rhs</a></span>.<span class='identifier'><a name='212_28' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span> && <span class='identifier'><a name='212_36'>lhs</a></span>.<span class='identifier'><a name='212_40' href='main.html#157_9' title='s:vV7siteify6Entity3colSi'>col</a></span> == <span class='identifier'><a name='212_47'>rhs</a></span>.<span class='identifier'><a name='212_51' href='main.html#157_9' title='s:vV7siteify6Entity3colSi'>col</a></span> && <span class='identifier'><a name='212_58'>lhs</a></span>.<span class='identifier'><a name='212_62' href='main.html#155_9' title='s:vV7siteify6Entity4fileSS'>file</a></span> == <span class='identifier'><a name='212_70'>rhs</a></span>.<span class='identifier'><a name='212_74' href='main.html#155_9' title='s:vV7siteify6Entity4fileSS'>file</a></span>
0213    }
0214    
0215    <span class='keyword'><a name='215_1'>var</a></span> <span class='identifier'><a name='215_5' href='#' title='s:v7siteify8entitiesGVSs10DictionaryVS_6EntityVSC20sourcekitd_variant_t_' onclick='return expand(this);'>entities<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#255_25"; return false;'>main.swift:255</td><td><pre>                        <b>entities</b>[entity] = dict</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#263_23"; return false;'>main.swift:263</td><td><pre>for (entity, dict) in <b>entities</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#342_32"; return false;'>main.swift:342</td><td><pre>            else if let dict = <b>entities</b>[ent], usrString = dict.getString( SK.usrID ) {</pre></td></table></span></a></span> = [<span class='identifier'><a name='215_17' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>:<span class='identifier'><a name='215_24' title='c:@SA@sourcekitd_variant_t'>sourcekitd_variant_t</a></span>]()
0216    
0217    <span class='keyword'><a name='217_1'>class</a></span> <span class='identifier'><a name='217_7' href='#' title='s:C7siteify3USR' onclick='return expand(this);'>USR<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#225_11"; return false;'>main.swift:225</td><td><pre>extension <b>USR</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#229_20"; return false;'>main.swift:229</td><td><pre>var usrs = [String:<b>USR</b>]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#246_39"; return false;'>main.swift:246</td><td><pre>                    usrs[usrString] = <b>USR</b>()</pre></td></table></span></a></span> {
0218    
0219        <span class='keyword'><a name='219_5'>var</a></span> <span class='identifier'><a name='219_9' href='#' title='s:vC7siteify3USR10referencesGSaVS_6Entity_' onclick='return expand(this);'>references<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#251_25"; return false;'>main.swift:251</td><td><pre>                    usr.<b>references</b>.append( entity )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#347_33"; return false;'>main.swift:347</td><td><pre>                    else if usr.<b>references</b>.count > 1 {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#349_42"; return false;'>main.swift:349</td><td><pre>                        for i in 0..&lt;usr.<b>references</b>.count {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#350_43"; return false;'>main.swift:350</td><td><pre>                            let ref = usr.<b>references</b>[i]</pre></td></table></span></a></span> = [<span class='identifier'><a name='219_23' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>]()
0220        <span class='keyword'><a name='220_5'>var</a></span> <span class='identifier'><a name='220_9' href='#' title='s:vC7siteify3USR8reflinesGSaSS_' onclick='return expand(this);'>reflines<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#252_25"; return false;'>main.swift:252</td><td><pre>                    usr.<b>reflines</b>.append( entity.patchText( data, value: "\\w*" )! )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#356_54"; return false;'>main.swift:356</td><td><pre>                            popup += "&lt;td>&lt;pre>\(usr.<b>reflines</b>[i])&lt;/pre>&lt;/td>"</pre></td></table></span></a></span> = [<span class='identifier'><a name='220_21' title='s:SS'>String</a></span>]()
0221        <span class='keyword'><a name='221_5'>var</a></span> <span class='identifier'><a name='221_9' href='#' title='s:vC7siteify3USR9declaringGSqVS_6Entity_' onclick='return expand(this);'>declaring<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#267_17"; return false;'>main.swift:267</td><td><pre>            usr.<b>declaring</b> = entity</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#343_58"; return false;'>main.swift:343</td><td><pre>                if let usr = usrs[usrString], decl = usr.<b>declaring</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#396_65"; return false;'>main.swift:396</td><td><pre>    if usrString.hasPrefix( "s:" ), let decl = usrs[usrString]?.<b>declaring</b> {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='221_20' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>?
0222    
0223    }
0224    
0225    <span class='keyword'><a name='225_1'>extension</a></span> <span class='typeidentifier'><a name='225_11' href='main.html#217_7' title='s:C7siteify3USR'>USR</a></span> {
0226    
0227    }
0228    
0229    <span class='keyword'><a name='229_1'>var</a></span> <span class='identifier'><a name='229_5' href='#' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_' onclick='return expand(this);'>usrs<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#245_20"; return false;'>main.swift:245</td><td><pre>                if <b>usrs</b>[usrString] == nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#246_21"; return false;'>main.swift:246</td><td><pre>                    <b>usrs</b>[usrString] = USR()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#250_74"; return false;'>main.swift:250</td><td><pre>                if !kind.containsString( ".decl.extension." ), var usr = <b>usrs</b>[usrString] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#266_55"; return false;'>main.swift:266</td><td><pre>        if kind.containsString( ".decl." ), var usr = <b>usrs</b>[usr] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#343_30"; return false;'>main.swift:343</td><td><pre>                if let usr = <b>usrs</b>[usrString], decl = usr.declaring {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#395_25"; return false;'>main.swift:395</td><td><pre>for (usrString, usr) in <b>usrs</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#396_48"; return false;'>main.swift:396</td><td><pre>    if usrString.hasPrefix( "s:" ), let decl = <b>usrs</b>[usrString]?.declaring {</pre></td></table></span></a></span> = [<span class='identifier'><a name='229_13' title='s:SS'>String</a></span>:<span class='identifier'><a name='229_20' href='main.html#217_7' title='s:C7siteify3USR'>USR</a></span>]()
0230    <span class='keyword'><a name='230_1'>var</a></span> <span class='identifier'><a name='230_5' href='#' title='s:v7siteify6filenoSi' onclick='return expand(this);'>fileno<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#233_5"; return false;'>main.swift:233</td><td><pre>    <b>fileno</b> += 1</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#234_27"; return false;'>main.swift:234</td><td><pre>    progress( "Indexing \(<b>fileno</b>)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#296_1"; return false;'>main.swift:296</td><td><pre><b>fileno</b> = 0</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#299_5"; return false;'>main.swift:299</td><td><pre>    <b>fileno</b> += 1</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#300_25"; return false;'>main.swift:300</td><td><pre>    progress( "Saving \(<b>fileno</b>)/\(compilations.count) \(file)" )</pre></td></table></span></a></span> = <span class='number'><a name='230_14'>0</a></span>
0231    
0232    <span class='keyword'><a name='232_1'>for</a></span> (<span class='identifier'><a name='232_6'>file</a></span>, <span class='identifier'><a name='232_12'>argv</a></span>) <span class='keyword'><a name='232_18'>in</a></span> <span class='identifier'><a name='232_21' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span> {
0233        <span class='identifier'><a name='233_5' href='main.html#230_5' title='s:v7siteify6filenoSi'>fileno</a></span> += <span class='number'><a name='233_15'>1</a></span>
0234        <span class='identifier'><a name='234_5' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='234_15'>"Indexing </a></span>\<span class='string_interpolation_anchor'><a name='234_26'>(</a></span><span class='identifier'><a name='234_27' href='main.html#230_5' title='s:v7siteify6filenoSi'>fileno</a></span><span class='string_interpolation_anchor'><a name='234_33'>)</a></span><span class='string'><a name='234_34'>/</a></span>\<span class='string_interpolation_anchor'><a name='234_36'>(</a></span><span class='identifier'><a name='234_37' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='234_50' title='s:vSa5countSi'>count</a></span><span class='string_interpolation_anchor'><a name='234_55'>)</a></span><span class='string'><a name='234_56'> </a></span>\<span class='string_interpolation_anchor'><a name='234_58'>(</a></span><span class='identifier'><a name='234_59'>file</a></span><span class='string_interpolation_anchor'><a name='234_63'>)</a></span><span class='string'><a name='234_64'>"</a></span> )
0235    
0236        <span class='keyword'><a name='236_5'>if</a></span> <span class='keyword'><a name='236_8'>let</a></span> <span class='identifier'><a name='236_12'>data</a></span> = <span class='identifier'><a name='236_19' title='c:objc(cs)NSData(im)initWithContentsOfFile:'>NSData</a></span>( <span class='identifier'><a name='236_27'>contentsOfFile</a></span>: <span class='identifier'><a name='236_43'>file</a></span> ) {
0237            <span class='keyword'><a name='237_9'>let</a></span> <span class='identifier'><a name='237_13'>resp</a></span> = <span class='identifier'><a name='237_20' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='237_23' href='SourceKit.html#139_10' title='s:FC7siteify9SourceKit9indexFileFS0_FTSS12compilerArgsGVSs20UnsafeMutablePointerT___GS1_T__'>indexFile</a></span>( <span class='identifier'><a name='237_34'>file</a></span>, <span class='identifier'><a name='237_40'>compilerArgs</a></span>: <span class='identifier'><a name='237_54'>argv</a></span> )
0238            <span class='keyword'><a name='238_9'>let</a></span> <span class='identifier'><a name='238_13'>dict</a></span> = <span class='identifier'><a name='238_20' title='c:@F@sourcekitd_response_get_value'>sourcekitd_response_get_value</a></span>( <span class='identifier'><a name='238_51'>resp</a></span> )
0239            <span class='identifier'><a name='239_9' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='239_12' href='SourceKit.html#163_10' title='s:FC7siteify9SourceKit11recurseOverFS0_FTVSs14COpaquePointer4respVSC20sourcekitd_variant_t6indentSS10visualiserGSqPS_10Visualiser__5blockFT4dictS2__T__T_'>recurseOver</a></span>( <span class='identifier'><a name='239_25' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='239_28' href='SourceKit.html#66_14' title='s:vC7siteify9SourceKit10entitiesIDVSs14COpaquePointer'>entitiesID</a></span>, <span class='identifier'><a name='239_40'>resp</a></span>: <span class='identifier'><a name='239_46'>dict</a></span>, <span class='identifier'><a name='239_52'>block</a></span>: { <span class='identifier'><a name='239_61'>dict</a></span> <span class='keyword'><a name='239_66'>in</a></span>
0240                <span class='keyword'><a name='240_13'>if</a></span> <span class='keyword'><a name='240_16'>let</a></span> <span class='identifier'><a name='240_20'>usrString</a></span> = <span class='identifier'><a name='240_32'>dict</a></span>.<span class='identifier'><a name='240_37' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='240_48' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='240_51' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0241                    <span class='keyword'><a name='241_17'>let</a></span> <span class='identifier'><a name='241_21'>entity</a></span> = <span class='identifier'><a name='241_30' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>( <span class='identifier'><a name='241_38'>file</a></span>: <span class='identifier'><a name='241_44'>file</a></span>,
0242                        <span class='identifier'><a name='242_21'>line</a></span>: <span class='identifier'><a name='242_27'>dict</a></span>.<span class='identifier'><a name='242_32' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='242_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='242_43' href='SourceKit.html#77_14' title='s:vC7siteify9SourceKit6lineIDVSs14COpaquePointer'>lineID</a></span> ),
0243                        <span class='identifier'><a name='243_21'>col</a></span>: <span class='identifier'><a name='243_26'>dict</a></span>.<span class='identifier'><a name='243_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='243_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='243_42' href='SourceKit.html#78_14' title='s:vC7siteify9SourceKit5colIDVSs14COpaquePointer'>colID</a></span> ) )
0244    
0245                    <span class='keyword'><a name='245_17'>if</a></span> <span class='identifier'><a name='245_20' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='245_25'>usrString</a></span>] == <span class='keyword'><a name='245_39'>nil</a></span> {
0246                        <span class='identifier'><a name='246_21' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='246_26'>usrString</a></span>] = <span class='identifier'><a name='246_39' href='main.html#217_7' title='s:C7siteify3USR'>USR</a></span>()
0247                    }
0248    
0249                    <span class='keyword'><a name='249_17'>let</a></span> <span class='identifier'><a name='249_21'>kind</a></span> = <span class='identifier'><a name='249_28'>dict</a></span>.<span class='identifier'><a name='249_33' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='249_48' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='249_51' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0250                    <span class='keyword'><a name='250_17'>if</a></span> !<span class='identifier'><a name='250_21'>kind</a></span>.<span class='identifier'><a name='250_26' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='250_42'>".decl.extension."</a></span> ), <span class='keyword'><a name='250_64'>var</a></span> <span class='identifier'><a name='250_68'>usr</a></span> = <span class='identifier'><a name='250_74' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='250_79'>usrString</a></span>] {
0251                        <span class='identifier'><a name='251_21'>usr</a></span>.<span class='identifier'><a name='251_25' href='main.html#219_9' title='s:vC7siteify3USR10referencesGSaVS_6Entity_'>references</a></span>.<span class='identifier'><a name='251_36' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='251_44'>entity</a></span> )
0252                        <span class='identifier'><a name='252_21'>usr</a></span>.<span class='identifier'><a name='252_25' href='main.html#220_9' title='s:vC7siteify3USR8reflinesGSaSS_'>reflines</a></span>.<span class='identifier'><a name='252_34' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='252_42'>entity</a></span>.<span class='identifier'><a name='252_49' href='main.html#191_10' title='s:FV7siteify6Entity9patchTextFS0_FTCSo6NSData5valueSS_GSqSS_'>patchText</a></span>( <span class='identifier'><a name='252_60'>data</a></span>, <span class='identifier'><a name='252_66'>value</a></span>: <span class='string'><a name='252_73'>"\\w*"</a></span> )! )
0253    
0254                        <span class='keyword'><a name='254_21'>if</a></span> !<span class='identifier'><a name='254_25'>kind</a></span>.<span class='identifier'><a name='254_30' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='254_46'>".accessor."</a></span> ) {
0255                            <span class='identifier'><a name='255_25' href='main.html#215_5' title='s:v7siteify8entitiesGVSs10DictionaryVS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span>[<span class='identifier'><a name='255_34'>entity</a></span>] = <span class='identifier'><a name='255_44'>dict</a></span>
0256                        }
0257                    }
0258                }
0259            } )
0260        }
0261    }
0262    
0263    <span class='keyword'><a name='263_1'>for</a></span> (<span class='identifier'><a name='263_6'>entity</a></span>, <span class='identifier'><a name='263_14'>dict</a></span>) <span class='keyword'><a name='263_20'>in</a></span> <span class='identifier'><a name='263_23' href='main.html#215_5' title='s:v7siteify8entitiesGVSs10DictionaryVS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span> {
0264        <span class='keyword'><a name='264_5'>if</a></span> <span class='keyword'><a name='264_8'>let</a></span> <span class='identifier'><a name='264_12'>usr</a></span> = <span class='identifier'><a name='264_18'>dict</a></span>.<span class='identifier'><a name='264_23' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='264_34' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='264_37' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0265            <span class='keyword'><a name='265_9'>let</a></span> <span class='identifier'><a name='265_13'>kind</a></span> = <span class='identifier'><a name='265_20'>dict</a></span>.<span class='identifier'><a name='265_25' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='265_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='265_43' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0266            <span class='keyword'><a name='266_9'>if</a></span> <span class='identifier'><a name='266_12'>kind</a></span>.<span class='identifier'><a name='266_17' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='266_33'>".decl."</a></span> ), <span class='keyword'><a name='266_45'>var</a></span> <span class='identifier'><a name='266_49'>usr</a></span> = <span class='identifier'><a name='266_55' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='266_60'>usr</a></span>] {
0267                <span class='identifier'><a name='267_13'>usr</a></span>.<span class='identifier'><a name='267_17' href='main.html#221_9' title='s:vC7siteify3USR9declaringGSqVS_6Entity_'>declaring</a></span> = <span class='identifier'><a name='267_29'>entity</a></span>
0268            }
0269        }
0270    }
0271    
0272    <span class='keyword'><a name='272_1'>let</a></span> <span class='identifier'><a name='272_5' href='#' title='s:v7siteify4homeSS' onclick='return expand(this);'>home<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#273_17"; return false;'>main.swift:273</td><td><pre>let resources = <b>home</b>+"/Library/siteify/"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#294_59"; return false;'>main.swift:294</td><td><pre>    "__ROOT__": cwd.stringByReplacingOccurrencesOfString( <b>home</b>, withString: "~" )] )</pre></td></table></span></a></span> = <span class='identifier'><a name='272_12' title='s:SS'>String</a></span>.<span class='identifier'><a name='272_19' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='272_32' title='c:@F@getenv'>getenv</a></span>(<span class='string'><a name='272_39'>"HOME"</a></span>) )!
0273    <span class='keyword'><a name='273_1'>let</a></span> <span class='identifier'><a name='273_5' href='#' title='s:v7siteify9resourcesSS' onclick='return expand(this);'>resources<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#276_48"; return false;'>main.swift:276</td><td><pre>    var input = try! NSString( contentsOfFile: <b>resources</b>+template, encoding: NSUTF8StringEncoding )</pre></td></table></span></a></span> = <span class='identifier'><a name='273_17' href='main.html#272_5' title='s:v7siteify4homeSS'>home</a></span>+<span class='string'><a name='273_22'>"/Library/siteify/"</a></span>
0274    
0275    <span class='keyword'><a name='275_1'>func</a></span> <span class='identifier'><a name='275_6' href='#' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>copyTemplate<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#288_9"; return false;'>main.swift:288</td><td><pre>fclose( <b>copyTemplate</b>( "siteify.css" ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#293_13"; return false;'>main.swift:293</td><td><pre>let index = <b>copyTemplate</b>( "index.html", patches: ["__DATE__": NSDate().description,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#382_19"; return false;'>main.swift:382</td><td><pre>        let out = <b>copyTemplate</b>( "source.html", patches: [:], dest: "html/"+filename )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#406_12"; return false;'>main.swift:406</td><td><pre>let xref = <b>copyTemplate</b>( "xref.html", patches: [:], dest: "html/xref.html" )</pre></td></table></span></a></span>( <span class='identifier'><a name='275_20'>template</a></span>: <span class='typeidentifier'><a name='275_30' title='s:SS'>String</a></span>, <span class='identifier'><a name='275_38'>patches</a></span>: [<span class='typeidentifier'><a name='275_48' title='s:SS'>String</a></span>:<span class='typeidentifier'><a name='275_55' title='s:SS'>String</a></span>] = [:], <span class='identifier'><a name='275_70'>dest</a></span>: <span class='typeidentifier'><a name='275_76' title='s:SS'>String</a></span>? = <span class='keyword'><a name='275_86'>nil</a></span> ) -> <span class='typeidentifier'><a name='275_95' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span><<span class='typeidentifier'><a name='275_116' title='c:@T@FILE'>FILE</a></span>> {
0276        <span class='keyword'><a name='276_5'>var</a></span> <span class='identifier'><a name='276_9'>input</a></span> = <span class='keyword'><a name='276_17'>try</a></span>! <span class='identifier'><a name='276_22' title='c:objc(cs)NSString(im)initWithContentsOfFile:encoding:error:'>NSString</a></span>( <span class='identifier'><a name='276_32'>contentsOfFile</a></span>: <span class='identifier'><a name='276_48' href='main.html#273_5' title='s:v7siteify9resourcesSS'>resources</a></span>+<span class='identifier'><a name='276_58'>template</a></span>, <span class='identifier'><a name='276_68'>encoding</a></span>: <span class='identifier'><a name='276_78' title='s:v10Foundation20NSUTF8StringEncodingSu'>NSUTF8StringEncoding</a></span> )
0277        <span class='keyword'><a name='277_5'>for</a></span> (<span class='identifier'><a name='277_10'>tag</a></span>, <span class='identifier'><a name='277_15'>value</a></span>) <span class='keyword'><a name='277_22'>in</a></span> <span class='identifier'><a name='277_25'>patches</a></span> {
0278            <span class='identifier'><a name='278_9'>input</a></span> = <span class='identifier'><a name='278_17'>input</a></span>.<span class='identifier'><a name='278_23' title='c:objc(cs)NSString(im)stringByReplacingOccurrencesOfString:withString:'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='278_61'>tag</a></span>, <span class='identifier'><a name='278_66'>withString</a></span>: <span class='identifier'><a name='278_78'>value</a></span> )
0279        }
0280        <span class='keyword'><a name='280_5'>let</a></span> <span class='identifier'><a name='280_9'>out</a></span> = <span class='identifier'><a name='280_15' title='c:@F@fopen'>fopen</a></span>( <span class='identifier'><a name='280_22'>dest</a></span> ?? <span class='string'><a name='280_30'>"html/"</a></span>+<span class='identifier'><a name='280_38'>template</a></span>, <span class='string'><a name='280_48'>"w"</a></span> )
0281        <span class='identifier'><a name='281_5' title='c:@F@fputs'>fputs</a></span>( <span class='identifier'><a name='281_12'>input</a></span>.<span class='identifier'><a name='281_18' title='c:objc(cs)NSString(py)UTF8String'>UTF8String</a></span>, <span class='identifier'><a name='281_30'>out</a></span> )
0282        <span class='keyword'><a name='282_5'>return</a></span> <span class='identifier'><a name='282_12'>out</a></span>
0283    }
0284    
0285    <span class='keyword'><a name='285_1'>if</a></span> !<span class='identifier'><a name='285_5' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='285_13' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='string'><a name='285_31'>"html"</a></span> ) {
0286        <span class='keyword'><a name='286_5'>try</a></span>! <span class='identifier'><a name='286_10' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='286_18' title='c:objc(cs)NSFileManager(im)createDirectoryAtPath:withIntermediateDirectories:attributes:error:'>createDirectoryAtPath</a></span>( <span class='string'><a name='286_41'>"html"</a></span>, <span class='identifier'><a name='286_49'>withIntermediateDirectories</a></span>: <span class='keyword'><a name='286_78'>false</a></span>, <span class='identifier'><a name='286_85'>attributes</a></span>: <span class='keyword'><a name='286_97'>nil</a></span> )
0287    }
0288    <span class='identifier'><a name='288_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='288_9' href='main.html#275_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='288_23'>"siteify.css"</a></span> ) )
0289    
0290    <span class='keyword'><a name='290_1'>var</a></span> <span class='identifier'><a name='290_5' href='#' title='s:v7siteify4buffGSaVSs4Int8_' onclick='return expand(this);'>buff<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#291_40"; return false;'>main.swift:291</td><td><pre>let cwd = String.fromCString( getcwd( &amp;<b>buff</b>, buff.count ) )!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#291_46"; return false;'>main.swift:291</td><td><pre>let cwd = String.fromCString( getcwd( &amp;buff, <b>buff</b>.count ) )!</pre></td></table></span></a></span> = [<span class='identifier'><a name='290_13' title='s:VSs4Int8'>Int8</a></span>]( <span class='identifier'><a name='290_20'>count</a></span>: <span class='identifier'><a name='290_27' title='s:FSicFMSiFVSs5Int32Si'>Int</a></span>(<span class='identifier'><a name='290_31' title='c:@macro@PATH_MAX'>PATH_MAX</a></span>), <span class='identifier'><a name='290_42'>repeatedValue</a></span>: <span class='number'><a name='290_57'>0</a></span> )
0291    <span class='keyword'><a name='291_1'>let</a></span> <span class='identifier'><a name='291_5' href='#' title='s:v7siteify3cwdSS' onclick='return expand(this);'>cwd<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#294_17"; return false;'>main.swift:294</td><td><pre>    "__ROOT__": <b>cwd</b>.stringByReplacingOccurrencesOfString( home, withString: "~" )] )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#386_67"; return false;'>main.swift:386</td><td><pre>        let relative = file.stringByReplacingOccurrencesOfString( <b>cwd</b>+"/", withString: "" )</pre></td></table></span></a></span> = <span class='identifier'><a name='291_11' title='s:SS'>String</a></span>.<span class='identifier'><a name='291_18' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='291_31' title='c:@F@getcwd'>getcwd</a></span>( &<span class='identifier'><a name='291_40' href='main.html#290_5' title='s:v7siteify4buffGSaVSs4Int8_'>buff</a></span>, <span class='identifier'><a name='291_46' href='main.html#290_5' title='s:v7siteify4buffGSaVSs4Int8_'>buff</a></span>.<span class='identifier'><a name='291_51' title='s:vSa5countSi'>count</a></span> ) )!
0292    
0293    <span class='keyword'><a name='293_1'>let</a></span> <span class='identifier'><a name='293_5' href='#' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>index<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#387_62"; return false;'>main.swift:387</td><td><pre>        fputs( "&lt;a href='\(filename)'>\(relative)&lt;a>&lt;br>\n", <b>index</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#391_9"; return false;'>main.swift:391</td><td><pre>fclose( <b>index</b> )</pre></td></table></span></a></span> = <span class='identifier'><a name='293_13' href='main.html#275_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='293_27'>"index.html"</a></span>, <span class='identifier'><a name='293_41'>patches</a></span>: [<span class='string'><a name='293_51'>"__DATE__"</a></span>: <span class='identifier'><a name='293_63' title='c:objc(cs)NSDate(im)init'>NSDate</a></span>().<span class='identifier'><a name='293_72' title='c:objc(cs)NSDate(py)description'>description</a></span>,
0294        <span class='string'><a name='294_5'>"__ROOT__"</a></span>: <span class='identifier'><a name='294_17' href='main.html#291_5' title='s:v7siteify3cwdSS'>cwd</a></span>.<span class='identifier'><a name='294_21' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='294_59' href='main.html#272_5' title='s:v7siteify4homeSS'>home</a></span>, <span class='identifier'><a name='294_65'>withString</a></span>: <span class='string'><a name='294_77'>"~"</a></span> )] )
0295    
0296    <span class='identifier'><a name='296_1' href='main.html#230_5' title='s:v7siteify6filenoSi'>fileno</a></span> = <span class='number'><a name='296_10'>0</a></span>
0297    
0298    <span class='keyword'><a name='298_1'>for</a></span> (<span class='identifier'><a name='298_6'>file</a></span>, <span class='identifier'><a name='298_12'>argv</a></span>) <span class='keyword'><a name='298_18'>in</a></span> <span class='identifier'><a name='298_21' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span> {
0299        <span class='identifier'><a name='299_5' href='main.html#230_5' title='s:v7siteify6filenoSi'>fileno</a></span> += <span class='number'><a name='299_15'>1</a></span>
0300        <span class='identifier'><a name='300_5' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='300_15'>"Saving </a></span>\<span class='string_interpolation_anchor'><a name='300_24'>(</a></span><span class='identifier'><a name='300_25' href='main.html#230_5' title='s:v7siteify6filenoSi'>fileno</a></span><span class='string_interpolation_anchor'><a name='300_31'>)</a></span><span class='string'><a name='300_32'>/</a></span>\<span class='string_interpolation_anchor'><a name='300_34'>(</a></span><span class='identifier'><a name='300_35' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='300_48' title='s:vSa5countSi'>count</a></span><span class='string_interpolation_anchor'><a name='300_53'>)</a></span><span class='string'><a name='300_54'> </a></span>\<span class='string_interpolation_anchor'><a name='300_56'>(</a></span><span class='identifier'><a name='300_57'>file</a></span><span class='string_interpolation_anchor'><a name='300_61'>)</a></span><span class='string'><a name='300_62'>"</a></span> )
0301    
0302        <span class='keyword'><a name='302_5'>if</a></span> <span class='keyword'><a name='302_8'>let</a></span> <span class='identifier'><a name='302_12'>data</a></span> = <span class='identifier'><a name='302_19' title='c:objc(cs)NSData(im)initWithContentsOfFile:'>NSData</a></span>( <span class='identifier'><a name='302_27'>contentsOfFile</a></span>: <span class='identifier'><a name='302_43'>file</a></span> ) {
0303            <span class='keyword'><a name='303_9'>let</a></span> <span class='identifier'><a name='303_13'>bytes</a></span> = <span class='identifier'><a name='303_21' title='s:VSs13UnsafePointer'>UnsafePointer</a></span><<span class='typeidentifier'><a name='303_35' title='s:VSs4Int8'>Int8</a></span>>( <span class='identifier'><a name='303_42'>data</a></span>.<span class='identifier'><a name='303_47' title='c:objc(cs)NSData(py)bytes'>bytes</a></span> )
0304            <span class='keyword'><a name='304_9'>let</a></span> <span class='identifier'><a name='304_13'>newline</a></span> = <span class='identifier'><a name='304_23' title='s:FVSs4Int8cFMS_FVSs6UInt16S_'>Int8</a></span>(<span class='string'><a name='304_28'>"\n"</a></span>.<span class='identifier'><a name='304_33' title='s:vSS5utf16VSS9UTF16View'>utf16</a></span>.<span class='identifier'><a name='304_39' title='s:veRq_Ss14CollectionTypeqq_Ss9Indexable5IndexSs22BidirectionalIndexType_SsS_4lastGSqqqq_S_9GeneratorSs13GeneratorType7Element_'>last</a></span>!)
0305            <span class='keyword'><a name='305_9'>var</a></span> <span class='identifier'><a name='305_13'>ptr</a></span> = <span class='number'><a name='305_19'>0</a></span>, <span class='identifier'><a name='305_22'>line</a></span> = <span class='number'><a name='305_29'>1</a></span>, <span class='identifier'><a name='305_32'>col</a></span> = <span class='number'><a name='305_38'>1</a></span>
0306    
0307            <span class='keyword'><a name='307_9'>func</a></span> <span class='identifier'><a name='307_14'>skipTo</a></span>( <span class='identifier'><a name='307_22'>offset</a></span>: <span class='typeidentifier'><a name='307_30' title='s:Si'>Int</a></span> ) -> <span class='typeidentifier'><a name='307_39' title='s:SS'>String</a></span> {
0308                <span class='keyword'><a name='308_13'>let</a></span> <span class='identifier'><a name='308_17'>out</a></span> = <span class='identifier'><a name='308_23' title='c:objc(cs)NSString(im)initWithBytes:length:encoding:'>NSString</a></span>( <span class='identifier'><a name='308_33'>bytes</a></span>: <span class='identifier'><a name='308_40'>bytes</a></span>+<span class='identifier'><a name='308_46'>ptr</a></span>, <span class='identifier'><a name='308_51'>length</a></span>: <span class='identifier'><a name='308_59'>offset</a></span>-<span class='identifier'><a name='308_66'>ptr</a></span>, <span class='identifier'><a name='308_71'>encoding</a></span>: <span class='identifier'><a name='308_81' title='s:v10Foundation20NSUTF8StringEncodingSu'>NSUTF8StringEncoding</a></span> ) ?? <span class='string'><a name='308_107'>""</a></span>
0309                <span class='keyword'><a name='309_13'>while</a></span> <span class='identifier'><a name='309_19'>ptr</a></span> < <span class='identifier'><a name='309_25'>offset</a></span> {
0310                    <span class='keyword'><a name='310_17'>if</a></span> <span class='identifier'><a name='310_20'>bytes</a></span>[<span class='identifier'><a name='310_26'>ptr</a></span>] == <span class='identifier'><a name='310_34'>newline</a></span> {
0311                        <span class='identifier'><a name='311_21'>line</a></span> += <span class='number'><a name='311_29'>1</a></span>
0312                        <span class='identifier'><a name='312_21'>col</a></span> = <span class='number'><a name='312_27'>1</a></span>
0313                    }
0314                    <span class='keyword'><a name='314_17'>else</a></span> {
0315                        <span class='identifier'><a name='315_21'>col</a></span> += <span class='number'><a name='315_28'>1</a></span>
0316                    }
0317                    <span class='identifier'><a name='317_17'>ptr</a></span> += <span class='number'><a name='317_24'>1</a></span>
0318                }
0319                <span class='keyword'><a name='319_13'>return</a></span> <span class='identifier'><a name='319_20'>out</a></span> <span class='keyword'><a name='319_24'>as</a></span> <span class='typeidentifier'><a name='319_27' title='s:SS'>String</a></span>
0320            }
0321    
0322            <span class='keyword'><a name='322_9'>var</a></span> <span class='identifier'><a name='322_13'>html</a></span> = <span class='string'><a name='322_20'>""</a></span>
0323    
0324            <span class='keyword'><a name='324_9'>let</a></span> <span class='identifier'><a name='324_13'>resp</a></span> = <span class='identifier'><a name='324_20' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='324_23' href='SourceKit.html#149_10' title='s:FC7siteify9SourceKit9syntaxMapFS0_FTSS12compilerArgsGVSs20UnsafeMutablePointerT___GS1_T__'>syntaxMap</a></span>( <span class='identifier'><a name='324_34'>file</a></span>, <span class='identifier'><a name='324_40'>compilerArgs</a></span>: <span class='identifier'><a name='324_54'>argv</a></span> )
0325            <span class='keyword'><a name='325_9'>let</a></span> <span class='identifier'><a name='325_13'>dict</a></span> = <span class='identifier'><a name='325_20' title='c:@F@sourcekitd_response_get_value'>sourcekitd_response_get_value</a></span>( <span class='identifier'><a name='325_51'>resp</a></span> )
0326            <span class='keyword'><a name='326_9'>let</a></span> <span class='identifier'><a name='326_13'>map</a></span> = <span class='identifier'><a name='326_19' title='c:@F@sourcekitd_variant_dictionary_get_value'>sourcekitd_variant_dictionary_get_value</a></span>( <span class='identifier'><a name='326_60'>dict</a></span>, <span class='identifier'><a name='326_66' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='326_69' href='SourceKit.html#67_14' title='s:vC7siteify9SourceKit8syntaxIDVSs14COpaquePointer'>syntaxID</a></span> )
0327            <span class='identifier'><a name='327_9' title='c:@F@sourcekitd_variant_array_apply'>sourcekitd_variant_array_apply</a></span>( <span class='identifier'><a name='327_41'>map</a></span> ) { (<span class='keyword'><a name='327_50'>_</a></span>,<span class='identifier'><a name='327_52'>dict</a></span>) <span class='keyword'><a name='327_58'>in</a></span>
0328                <span class='keyword'><a name='328_13'>let</a></span> <span class='identifier'><a name='328_17'>kind</a></span> = <span class='identifier'><a name='328_24'>dict</a></span>.<span class='identifier'><a name='328_29' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='328_44' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='328_47' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0329                <span class='keyword'><a name='329_13'>let</a></span> <span class='identifier'><a name='329_17'>kindSuffix</a></span> = <span class='identifier'><a name='329_30' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>(<span class='identifier'><a name='329_36'>fileURLWithPath</a></span>: <span class='identifier'><a name='329_53'>kind</a></span>).<span class='identifier'><a name='329_59' title='c:objc(cs)NSURL(py)pathExtension'>pathExtension</a></span>!
0330                <span class='keyword'><a name='330_13'>let</a></span> <span class='identifier'><a name='330_17'>offset</a></span> = <span class='identifier'><a name='330_26'>dict</a></span>.<span class='identifier'><a name='330_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='330_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='330_42' href='SourceKit.html#59_14' title='s:vC7siteify9SourceKit8offsetIDVSs14COpaquePointer'>offsetID</a></span> )
0331                <span class='keyword'><a name='331_13'>let</a></span> <span class='identifier'><a name='331_17'>length</a></span> = <span class='identifier'><a name='331_26'>dict</a></span>.<span class='identifier'><a name='331_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='331_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='331_42' href='SourceKit.html#74_14' title='s:vC7siteify9SourceKit8lengthIDVSs14COpaquePointer'>lengthID</a></span> )
0332    
0333                <span class='identifier'><a name='333_13'>html</a></span> += <span class='identifier'><a name='333_21'>skipTo</a></span>( <span class='identifier'><a name='333_29'>offset</a></span> )
0334    
0335                <span class='keyword'><a name='335_13'>let</a></span> <span class='identifier'><a name='335_17'>ent</a></span> = <span class='identifier'><a name='335_23' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>(<span class='identifier'><a name='335_30'>file</a></span>: <span class='identifier'><a name='335_36'>file</a></span>, <span class='identifier'><a name='335_42'>line</a></span>: <span class='identifier'><a name='335_48'>line</a></span>, <span class='identifier'><a name='335_54'>col</a></span>: <span class='identifier'><a name='335_59'>col</a></span>)
0336                <span class='keyword'><a name='336_13'>var</a></span> <span class='identifier'><a name='336_17'>text</a></span> = <span class='identifier'><a name='336_24'>skipTo</a></span>( <span class='identifier'><a name='336_32'>offset</a></span>+<span class='identifier'><a name='336_39'>length</a></span> ).<span class='identifier'><a name='336_48' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='336_86'>"&lt;"</a></span>, <span class='identifier'><a name='336_91'>withString</a></span>: <span class='string'><a name='336_103'>"&lt;"</a></span> )
0337                <span class='keyword'><a name='337_13'>var</a></span> <span class='identifier'><a name='337_17'>span</a></span> = <span class='string'><a name='337_24'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='337_35'>(</a></span><span class='identifier'><a name='337_36'>ent</a></span>.<span class='identifier'><a name='337_40' href='main.html#163_9' title='s:vV7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='337_46'>)</a></span><span class='string'><a name='337_47'>'></a></span>\<span class='string_interpolation_anchor'><a name='337_50'>(</a></span><span class='identifier'><a name='337_51'>text</a></span><span class='string_interpolation_anchor'><a name='337_55'>)</a></span><span class='string'><a name='337_56'>&lt;/a>"</a></span>
0338    
0339                <span class='keyword'><a name='339_13'>if</a></span> <span class='identifier'><a name='339_16'>kindSuffix</a></span> == <span class='string'><a name='339_30'>"url"</a></span> {
0340                    <span class='identifier'><a name='340_17'>span</a></span> = <span class='string'><a name='340_24'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='340_35'>(</a></span><span class='identifier'><a name='340_36'>text</a></span><span class='string_interpolation_anchor'><a name='340_40'>)</a></span><span class='string'><a name='340_41'>'></a></span>\<span class='string_interpolation_anchor'><a name='340_44'>(</a></span><span class='identifier'><a name='340_45'>text</a></span><span class='string_interpolation_anchor'><a name='340_49'>)</a></span><span class='string'><a name='340_50'>&lt;/a>"</a></span>
0341                }
0342                <span class='keyword'><a name='342_13'>else</a></span> <span class='keyword'><a name='342_18'>if</a></span> <span class='keyword'><a name='342_21'>let</a></span> <span class='identifier'><a name='342_25'>dict</a></span> = <span class='identifier'><a name='342_32' href='main.html#215_5' title='s:v7siteify8entitiesGVSs10DictionaryVS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span>[<span class='identifier'><a name='342_41'>ent</a></span>], <span class='identifier'><a name='342_47'>usrString</a></span> = <span class='identifier'><a name='342_59'>dict</a></span>.<span class='identifier'><a name='342_64' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='342_75' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='342_78' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0343                    <span class='keyword'><a name='343_17'>if</a></span> <span class='keyword'><a name='343_20'>let</a></span> <span class='identifier'><a name='343_24'>usr</a></span> = <span class='identifier'><a name='343_30' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='343_35'>usrString</a></span>], <span class='identifier'><a name='343_47'>decl</a></span> = <span class='identifier'><a name='343_54'>usr</a></span>.<span class='identifier'><a name='343_58' href='main.html#221_9' title='s:vC7siteify3USR9declaringGSqVS_6Entity_'>declaring</a></span> {
0344                        <span class='keyword'><a name='344_21'>if</a></span> <span class='identifier'><a name='344_24'>decl</a></span> != <span class='identifier'><a name='344_32'>ent</a></span> {
0345                            <span class='identifier'><a name='345_25'>span</a></span> = <span class='string'><a name='345_32'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='345_43'>(</a></span><span class='identifier'><a name='345_44'>ent</a></span>.<span class='identifier'><a name='345_48' href='main.html#163_9' title='s:vV7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='345_54'>)</a></span><span class='string'><a name='345_55'>' href='</a></span>\<span class='string_interpolation_anchor'><a name='345_64'>(</a></span><span class='identifier'><a name='345_65'>decl</a></span>.<span class='identifier'><a name='345_70' href='main.html#171_9' title='s:vV7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='345_74'>)</a></span><span class='string'><a name='345_75'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='345_85'>(</a></span><span class='identifier'><a name='345_86'>usrString</a></span><span class='string_interpolation_anchor'><a name='345_95'>)</a></span><span class='string'><a name='345_96'>'></a></span>\<span class='string_interpolation_anchor'><a name='345_99'>(</a></span><span class='identifier'><a name='345_100'>text</a></span><span class='string_interpolation_anchor'><a name='345_104'>)</a></span><span class='string'><a name='345_105'>&lt;/a>"</a></span>
0346                        }
0347                        <span class='keyword'><a name='347_21'>else</a></span> <span class='keyword'><a name='347_26'>if</a></span> <span class='identifier'><a name='347_29'>usr</a></span>.<span class='identifier'><a name='347_33' href='main.html#219_9' title='s:vC7siteify3USR10referencesGSaVS_6Entity_'>references</a></span>.<span class='identifier'><a name='347_44' title='s:vSa5countSi'>count</a></span> > <span class='number'><a name='347_52'>1</a></span> {
0348                            <span class='keyword'><a name='348_25'>var</a></span> <span class='identifier'><a name='348_29'>popup</a></span> = <span class='string'><a name='348_37'>""</a></span>
0349                            <span class='keyword'><a name='349_25'>for</a></span> <span class='identifier'><a name='349_29'>i</a></span> <span class='keyword'><a name='349_31'>in</a></span> <span class='number'><a name='349_34'>0</a></span>..<<span class='identifier'><a name='349_38'>usr</a></span>.<span class='identifier'><a name='349_42' href='main.html#219_9' title='s:vC7siteify3USR10referencesGSaVS_6Entity_'>references</a></span>.<span class='identifier'><a name='349_53' title='s:vSa5countSi'>count</a></span> {
0350                                <span class='keyword'><a name='350_29'>let</a></span> <span class='identifier'><a name='350_33'>ref</a></span> = <span class='identifier'><a name='350_39'>usr</a></span>.<span class='identifier'><a name='350_43' href='main.html#219_9' title='s:vC7siteify3USR10referencesGSaVS_6Entity_'>references</a></span>[<span class='identifier'><a name='350_54'>i</a></span>]
0351                                <span class='keyword'><a name='351_29'>if</a></span> <span class='identifier'><a name='351_32'>ref</a></span> == <span class='identifier'><a name='351_39'>ent</a></span> {
0352                                    <span class='keyword'><a name='352_33'>continue</a></span>
0353                                }
0354                                <span class='keyword'><a name='354_29'>let</a></span> <span class='identifier'><a name='354_33'>keepListOpen</a></span> = <span class='identifier'><a name='354_48'>ref</a></span>.<span class='identifier'><a name='354_52' href='main.html#155_9' title='s:vV7siteify6Entity4fileSS'>file</a></span> != <span class='identifier'><a name='354_60'>decl</a></span>.<span class='identifier'><a name='354_65' href='main.html#155_9' title='s:vV7siteify6Entity4fileSS'>file</a></span> ? <span class='string'><a name='354_72'>"event.stopPropagation(); "</a></span> : <span class='string'><a name='354_102'>""</a></span>
0355                                <span class='identifier'><a name='355_29'>popup</a></span> += <span class='string'><a name='355_38'>"&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"</a></span>\(<span class='identifier'><a name='355_119'>ref</a></span>.<span class='identifier'><a name='355_123' href='main.html#171_9' title='s:vV7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='355_127'>)</a></span><span class='string'><a name='355_128'>\"; </a></span>\<span class='string_interpolation_anchor'><a name='355_133'>(</a></span><span class='identifier'><a name='355_134'>keepListOpen</a></span><span class='string_interpolation_anchor'><a name='355_146'>)</a></span><span class='string'><a name='355_147'>return false;'></a></span>\<span class='string_interpolation_anchor'><a name='355_163'>(</a></span><span class='identifier'><a name='355_164'>ref</a></span>.<span class='identifier'><a name='355_168' href='main.html#167_9' title='s:vV7siteify6Entity8filenameSS'>filename</a></span><span class='string_interpolation_anchor'><a name='355_176'>)</a></span><span class='string'><a name='355_177'>.swift:</a></span>\<span class='string_interpolation_anchor'><a name='355_185'>(</a></span><span class='identifier'><a name='355_186'>ref</a></span>.<span class='identifier'><a name='355_190' href='main.html#156_9' title='s:vV7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='355_194'>)</a></span><span class='string'><a name='355_195'>&lt;/td>"</a></span>
0356                                <span class='identifier'><a name='356_29'>popup</a></span> += <span class='string'><a name='356_38'>"&lt;td>&lt;pre></a></span>\<span class='string_interpolation_anchor'><a name='356_49'>(</a></span><span class='identifier'><a name='356_50'>usr</a></span>.<span class='identifier'><a name='356_54' href='main.html#220_9' title='s:vC7siteify3USR8reflinesGSaSS_'>reflines</a></span>[<span class='identifier'><a name='356_63'>i</a></span>]<span class='string_interpolation_anchor'><a name='356_65'>)</a></span><span class='string'><a name='356_66'>&lt;/pre>&lt;/td>"</a></span>
0357                            }
0358                            <span class='identifier'><a name='358_25'>span</a></span> = <span class='string'><a name='358_32'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='358_43'>(</a></span><span class='identifier'><a name='358_44'>ent</a></span>.<span class='identifier'><a name='358_48' href='main.html#163_9' title='s:vV7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='358_54'>)</a></span><span class='string'><a name='358_55'>' href='#' title='</a></span>\<span class='string_interpolation_anchor'><a name='358_74'>(</a></span><span class='identifier'><a name='358_75'>usrString</a></span><span class='string_interpolation_anchor'><a name='358_84'>)</a></span><span class='string'><a name='358_85'>' onclick='return expand(this);'>"</a></span> +
0359                                            <span class='string'><a name='359_41'>"</a></span>\<span class='string_interpolation_anchor'><a name='359_43'>(</a></span><span class='identifier'><a name='359_44'>text</a></span><span class='string_interpolation_anchor'><a name='359_48'>)</a></span><span class='string'><a name='359_49'>&lt;span class='references'>&lt;table></a></span>\<span class='string_interpolation_anchor'><a name='359_82'>(</a></span><span class='identifier'><a name='359_83'>popup</a></span><span class='string_interpolation_anchor'><a name='359_88'>)</a></span><span class='string'><a name='359_89'>&lt;/table>&lt;/span>&lt;/a>"</a></span>
0360                        }
0361                    }
0362                    <span class='keyword'><a name='362_17'>else</a></span> {
0363                        <span class='identifier'><a name='363_21'>span</a></span> = <span class='string'><a name='363_28'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='363_39'>(</a></span><span class='identifier'><a name='363_40'>ent</a></span>.<span class='identifier'><a name='363_44' href='main.html#163_9' title='s:vV7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='363_50'>)</a></span><span class='string'><a name='363_51'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='363_61'>(</a></span><span class='identifier'><a name='363_62'>usrString</a></span><span class='string_interpolation_anchor'><a name='363_71'>)</a></span><span class='string'><a name='363_72'>'></a></span>\<span class='string_interpolation_anchor'><a name='363_75'>(</a></span><span class='identifier'><a name='363_76'>text</a></span><span class='string_interpolation_anchor'><a name='363_80'>)</a></span><span class='string'><a name='363_81'>&lt;/a>"</a></span>
0364                    }
0365                }
0366    
0367                <span class='identifier'><a name='367_13'>html</a></span> += <span class='string'><a name='367_21'>"&lt;span class='</a></span>\<span class='string_interpolation_anchor'><a name='367_36'>(</a></span><span class='identifier'><a name='367_37'>kindSuffix</a></span><span class='string_interpolation_anchor'><a name='367_47'>)</a></span><span class='string'><a name='367_48'>'></a></span>\<span class='string_interpolation_anchor'><a name='367_51'>(</a></span><span class='identifier'><a name='367_52'>span</a></span><span class='string_interpolation_anchor'><a name='367_56'>)</a></span><span class='string'><a name='367_57'>&lt;/span>"</a></span>
0368                <span class='keyword'><a name='368_13'>return</a></span> <span class='keyword'><a name='368_20'>true</a></span>
0369            }
0370    
0371            <span class='identifier'><a name='371_9'>html</a></span> += <span class='identifier'><a name='371_17'>skipTo</a></span>( <span class='identifier'><a name='371_25'>data</a></span>.<span class='identifier'><a name='371_30' title='c:objc(cs)NSData(py)length'>length</a></span> )
0372    
0373            <span class='keyword'><a name='373_9'>let</a></span> <span class='identifier'><a name='373_13'>htmp</a></span> = <span class='identifier'><a name='373_20' title='c:objc(cs)NSMutableString'>NSMutableString</a></span>( <span class='identifier'><a name='373_37'>string</a></span>: <span class='identifier'><a name='373_45'>html</a></span> )
0374            <span class='identifier'><a name='374_9'>line</a></span> = <span class='number'><a name='374_16'>0</a></span>
0375    
0376            <span class='identifier'><a name='376_9'>htmp</a></span>[<span class='string'><a name='376_14'>"(^|\\n)"</a></span>] ~= { (<span class='identifier'><a name='376_31'>group</a></span>: <span class='typeidentifier'><a name='376_38' title='s:SS'>String</a></span>) <span class='keyword'><a name='376_46'>in</a></span>
0377                <span class='identifier'><a name='377_13'>line</a></span> += <span class='number'><a name='377_21'>1</a></span>
0378                <span class='keyword'><a name='378_13'>return</a></span> <span class='identifier'><a name='378_20'>group</a></span> + (<span class='identifier'><a name='378_29' title='s:FE10FoundationCSo8NSStringcFMS0_Ft6formatS0_GSaPSs11CVarArgType___S0_'>NSString</a></span>( <span class='identifier'><a name='378_39'>format</a></span>: <span class='string'><a name='378_47'>"%04d    "</a></span>, <span class='identifier'><a name='378_59'>line</a></span> ) <span class='keyword'><a name='378_66'>as</a></span> <span class='typeidentifier'><a name='378_69' title='s:SS'>String</a></span>)
0379            }
0380    
0381            <span class='keyword'><a name='381_9'>let</a></span> <span class='identifier'><a name='381_13'>filename</a></span> = <span class='identifier'><a name='381_24' href='main.html#140_6' title='s:F7siteify12fileFilenameFSSSS'>fileFilename</a></span>( <span class='identifier'><a name='381_38'>file</a></span> )+<span class='string'><a name='381_45'>".html"</a></span>
0382            <span class='keyword'><a name='382_9'>let</a></span> <span class='identifier'><a name='382_13'>out</a></span> = <span class='identifier'><a name='382_19' href='main.html#275_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='382_33'>"source.html"</a></span>, <span class='identifier'><a name='382_48'>patches</a></span>: [:], <span class='identifier'><a name='382_62'>dest</a></span>: <span class='string'><a name='382_68'>"html/"</a></span>+<span class='identifier'><a name='382_76'>filename</a></span> )
0383            <span class='identifier'><a name='383_9' title='c:@F@fputs'>fputs</a></span>( <span class='identifier'><a name='383_16'>htmp</a></span>.<span class='identifier'><a name='383_21' title='c:objc(cs)NSString(py)UTF8String'>UTF8String</a></span>, <span class='identifier'><a name='383_33'>out</a></span> )
0384            <span class='identifier'><a name='384_9' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='384_17'>out</a></span> )
0385    
0386            <span class='keyword'><a name='386_9'>let</a></span> <span class='identifier'><a name='386_13'>relative</a></span> = <span class='identifier'><a name='386_24'>file</a></span>.<span class='identifier'><a name='386_29' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='386_67' href='main.html#291_5' title='s:v7siteify3cwdSS'>cwd</a></span>+<span class='string'><a name='386_71'>"/"</a></span>, <span class='identifier'><a name='386_76'>withString</a></span>: <span class='string'><a name='386_88'>""</a></span> )
0387            <span class='identifier'><a name='387_9' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='387_16'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='387_27'>(</a></span><span class='identifier'><a name='387_28'>filename</a></span><span class='string_interpolation_anchor'><a name='387_36'>)</a></span><span class='string'><a name='387_37'>'></a></span>\<span class='string_interpolation_anchor'><a name='387_40'>(</a></span><span class='identifier'><a name='387_41'>relative</a></span><span class='string_interpolation_anchor'><a name='387_49'>)</a></span><span class='string'><a name='387_50'>&lt;a>&lt;br>\n"</a></span>, <span class='identifier'><a name='387_62' href='main.html#293_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0388        }
0389    }
0390    
0391    <span class='identifier'><a name='391_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='391_9' href='main.html#293_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0392    
0393    <span class='keyword'><a name='393_1'>var</a></span> <span class='identifier'><a name='393_5' href='#' title='s:v7siteify8xrefDataGSaTSSVS_6Entity__' onclick='return expand(this);'>xrefData<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#398_9"; return false;'>main.swift:398</td><td><pre>        <b>xrefData</b>.append( (_stdlib_demangleName( "_T"+usrString ), decl) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#402_1"; return false;'>main.swift:402</td><td><pre><b>xrefData</b>.sortInPlace( { (usr1, usr2) in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#408_22"; return false;'>main.swift:408</td><td><pre>for (symbol,decl) in <b>xrefData</b> {</pre></td></table></span></a></span> = [(<span class='identifier'><a name='393_18' title='s:SS'>String</a></span>,<span class='identifier'><a name='393_25' href='main.html#153_8' title='s:V7siteify6Entity'>Entity</a></span>)]()
0394    
0395    <span class='keyword'><a name='395_1'>for</a></span> (<span class='identifier'><a name='395_6'>usrString</a></span>, <span class='identifier'><a name='395_17'>usr</a></span>) <span class='keyword'><a name='395_22'>in</a></span> <span class='identifier'><a name='395_25' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span> {
0396        <span class='keyword'><a name='396_5'>if</a></span> <span class='identifier'><a name='396_8'>usrString</a></span>.<span class='identifier'><a name='396_18' title='s:FSS9hasPrefixFSSFSSSb'>hasPrefix</a></span>( <span class='string'><a name='396_29'>"s:"</a></span> ), <span class='keyword'><a name='396_37'>let</a></span> <span class='identifier'><a name='396_41'>decl</a></span> = <span class='identifier'><a name='396_48' href='main.html#229_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='396_53'>usrString</a></span>]?.<span class='identifier'><a name='396_65' href='main.html#221_9' title='s:vC7siteify3USR9declaringGSqVS_6Entity_'>declaring</a></span> {
0397            <span class='keyword'><a name='397_9'>let</a></span> <span class='identifier'><a name='397_13'>usrString</a></span> = <span class='identifier'><a name='397_25'>usrString</a></span>.<span class='identifier'><a name='397_35' title='s:FE10FoundationSS18substringFromIndexFSSFVVSS13CharacterView5IndexSS'>substringFromIndex</a></span>( <span class='identifier'><a name='397_55'>usrString</a></span>.<span class='identifier'><a name='397_65' title='s:vSS10startIndexVVSS13CharacterView5Index'>startIndex</a></span>.<span class='identifier'><a name='397_76' title='s:FeRq_Ss22BidirectionalIndexType_SsS_10advancedByuRq_S__Fq_Fqq_Ss16ForwardIndexType8Distanceq_'>advancedBy</a></span>( <span class='number'><a name='397_88'>2</a></span> ) )
0398            <span class='identifier'><a name='398_9' href='main.html#393_5' title='s:v7siteify8xrefDataGSaTSSVS_6Entity__'>xrefData</a></span>.<span class='identifier'><a name='398_18' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( (<span class='identifier'><a name='398_27'>_stdlib_demangleName</a></span>( <span class='string'><a name='398_49'>"_T"</a></span>+<span class='identifier'><a name='398_54'>usrString</a></span> ), <span class='identifier'><a name='398_67'>decl</a></span>) )
0399        }
0400    }
0401    
0402    <span class='identifier'><a name='402_1' href='main.html#393_5' title='s:v7siteify8xrefDataGSaTSSVS_6Entity__'>xrefData</a></span>.<span class='identifier'><a name='402_10' title='s:FeRq_Ss21MutableCollectionTypeqq_Ss16MutableIndexable5IndexSs21RandomAccessIndexType_SsS_11sortInPlaceuRq_S_qq_S0_5IndexS1__FRq_FFTqqq_Ss14CollectionType9GeneratorSs13GeneratorType7Elementqqq_S2_9GeneratorS3_7Element_SbT_'>sortInPlace</a></span>( { (<span class='identifier'><a name='402_26'>usr1</a></span>, <span class='identifier'><a name='402_32'>usr2</a></span>) <span class='keyword'><a name='402_38'>in</a></span>
0403        <span class='keyword'><a name='403_5'>return</a></span> <span class='identifier'><a name='403_12'>usr1</a></span>.<span class='number'><a name='403_17'>0</a></span> < <span class='identifier'><a name='403_21'>usr2</a></span>.<span class='number'><a name='403_26'>0</a></span>
0404    } )
0405    
0406    <span class='keyword'><a name='406_1'>let</a></span> <span class='identifier'><a name='406_5' href='#' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>xref<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#410_57"; return false;'>main.swift:410</td><td><pre>    fputs( "&lt;a href='\(decl.href)'>\(symbol)&lt;a>&lt;br>\n", <b>xref</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#413_9"; return false;'>main.swift:413</td><td><pre>fclose( <b>xref</b> )</pre></td></table></span></a></span> = <span class='identifier'><a name='406_12' href='main.html#275_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='406_26'>"xref.html"</a></span>, <span class='identifier'><a name='406_39'>patches</a></span>: [:], <span class='identifier'><a name='406_53'>dest</a></span>: <span class='string'><a name='406_59'>"html/xref.html"</a></span> )
0407    
0408    <span class='keyword'><a name='408_1'>for</a></span> (<span class='identifier'><a name='408_6'>symbol</a></span>,<span class='identifier'><a name='408_13'>decl</a></span>) <span class='keyword'><a name='408_19'>in</a></span> <span class='identifier'><a name='408_22' href='main.html#393_5' title='s:v7siteify8xrefDataGSaTSSVS_6Entity__'>xrefData</a></span> {
0409        <span class='keyword'><a name='409_5'>let</a></span> <span class='identifier'><a name='409_9'>symbol</a></span> = <span class='identifier'><a name='409_18'>symbol</a></span>.<span class='identifier'><a name='409_25' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='409_63'>"&lt;"</a></span>, <span class='identifier'><a name='409_68'>withString</a></span>: <span class='string'><a name='409_80'>"&lt;"</a></span> )
0410        <span class='identifier'><a name='410_5' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='410_12'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='410_23'>(</a></span><span class='identifier'><a name='410_24'>decl</a></span>.<span class='identifier'><a name='410_29' href='main.html#171_9' title='s:vV7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='410_33'>)</a></span><span class='string'><a name='410_34'>'></a></span>\<span class='string_interpolation_anchor'><a name='410_37'>(</a></span><span class='identifier'><a name='410_38'>symbol</a></span><span class='string_interpolation_anchor'><a name='410_44'>)</a></span><span class='string'><a name='410_45'>&lt;a>&lt;br>\n"</a></span>, <span class='identifier'><a name='410_57' href='main.html#406_5' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_'>xref</a></span> )
0411    }
0412    
0413    <span class='identifier'><a name='413_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='413_9' href='main.html#406_5' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_'>xref</a></span> )
0414    
0415    <span class='identifier'><a name='415_1' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='415_11'>"Site built, open ./html/index.html in your browser.\n"</a></span> )
0416    