<html><head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="siteify.css">
<script>

var lastlink;

function expand(a) {
    if ( a.children[0].style.display != "block" ) {
        if ( lastlink )
            lastlink.style.display = "none";
        a.children[0].style.display = "block";
        lastlink = a.children[0];
    }
    else {
        a.children[0].style.display = "none";
        lastlink = null;
    }
    return false;
}

</script></head><body><pre>
0001    <span class='comment'><a name='1_1'>//
0002    </a></span><span class='comment'><a name='2_1'>//  main.swift
0003    </a></span><span class='comment'><a name='3_1'>//  siteify
0004    </a></span><span class='comment'><a name='4_1'>//
0005    </a></span><span class='comment'><a name='5_1'>//  Created by John Holdsworth on 16/02/2016.
0006    </a></span><span class='comment'><a name='6_1'>//  Copyright Â© 2016 John Holdsworth. All rights reserved.
0007    </a></span><span class='comment'><a name='7_1'>//
0008    </a></span><span class='comment'><a name='8_1'>//  $Id: //depot/siteify/siteify/main.swift#27 $
0009    </a></span><span class='comment'><a name='9_1'>//
0010    </a></span><span class='comment'><a name='10_1'>//  Repo: </a></span><span class='url'><a href='https://github.com/johnno1962/siteify'>https://github.com/johnno1962/siteify</a></span><span class='comment'><a name='10_48'>
0011    </a></span><span class='comment'><a name='11_1'>//
0012    </a></span>
0013    <span class='keyword'><a name='13_1'>import</a></span> <span class='identifier'><a name='13_8'>Foundation</a></span>
0014    
0015    <span class='keyword'><a name='15_1'>let</a></span> <span class='identifier'><a name='15_5' href='#' title='s:v7siteify7filemgrCSo13NSFileManager' onclick='return expand(this);'>filemgr<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#27_9"; return false;'>main.swift:27</td><td><pre>        <b title='source.lang.swift.ref.var.global'>filemgr</b>.createFileAtPath( path, contents:nil, attributes:nil )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#50_16"; return false;'>main.swift:50</td><td><pre>            if <b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( failedLog ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#51_22"; return false;'>main.swift:51</td><td><pre>                try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.removeItemAtPath( failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#56_22"; return false;'>main.swift:56</td><td><pre>                try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.moveItemAtPath( storedLog, toPath: failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#66_4"; return false;'>main.swift:66</td><td><pre>if <b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( storedLog ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#82_83"; return false;'>main.swift:82</td><td><pre>    if storingLog == nil, let symroot = line["^    SYMROOT = ([^\n]+)"][1] where !<b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( symroot ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_14"; return false;'>main.swift:84</td><td><pre>        try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.removeItemAtPath( storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#168_5"; return false;'>main.swift:168</td><td><pre>if !<b title='source.lang.swift.ref.var.global'>filemgr</b>.fileExistsAtPath( "html" ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#169_10"; return false;'>main.swift:169</td><td><pre>    try! <b title='source.lang.swift.ref.var.global'>filemgr</b>.createDirectoryAtPath( "html", withIntermediateDirectories: false, attributes: nil )</pre></td></table></span></a></span> = <span class='identifier'><a name='15_15' title='c:objc(cs)NSFileManager'>NSFileManager</a></span>.<span class='identifier'><a name='15_29' title='c:objc(cs)NSFileManager(cm)defaultManager'>defaultManager</a></span>()
0016    <span class='keyword'><a name='16_1'>let</a></span> <span class='identifier'><a name='16_5' href='#' title='s:v7siteify2SKCS_9SourceKit' onclick='return expand(this);'>SK<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#91_40"; return false;'>main.swift:91</td><td><pre>        compilations.append( (primary, <b title='source.lang.swift.ref.var.global'>SK</b>.array( SK.compilerArgs( line ) ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#91_50"; return false;'>main.swift:91</td><td><pre>        compilations.append( (primary, SK.array( <b title='source.lang.swift.ref.var.global'>SK</b>.compilerArgs( line ) ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#120_20"; return false;'>main.swift:120</td><td><pre>        let resp = <b title='source.lang.swift.ref.var.global'>SK</b>.indexFile( file, compilerArgs: argv )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#122_9"; return false;'>main.swift:122</td><td><pre>        <b title='source.lang.swift.ref.var.global'>SK</b>.recurseOver( SK.entitiesID, resp: dict, block: { dict in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#122_25"; return false;'>main.swift:122</td><td><pre>        SK.recurseOver( <b title='source.lang.swift.ref.var.global'>SK</b>.entitiesID, resp: dict, block: { dict in</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#123_48"; return false;'>main.swift:123</td><td><pre>            if let usrString = dict.getString( <b title='source.lang.swift.ref.var.global'>SK</b>.usrID ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#124_48"; return false;'>main.swift:124</td><td><pre>                let kind = dict.getUUIDString( <b title='source.lang.swift.ref.var.global'>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#126_40"; return false;'>main.swift:126</td><td><pre>                    line: dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.lineID ),</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#127_39"; return false;'>main.swift:127</td><td><pre>                    col: dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.colID ),</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#148_34"; return false;'>main.swift:148</td><td><pre>    if let usr = dict.getString( <b title='source.lang.swift.ref.var.global'>SK</b>.usrID ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#212_20"; return false;'>main.swift:212</td><td><pre>        let resp = <b title='source.lang.swift.ref.var.global'>SK</b>.syntaxMap( file, compilerArgs: argv )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#214_66"; return false;'>main.swift:214</td><td><pre>        let map = sourcekitd_variant_dictionary_get_value( dict, <b title='source.lang.swift.ref.var.global'>SK</b>.syntaxID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#216_39"; return false;'>main.swift:216</td><td><pre>            let offset = dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.offsetID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#217_39"; return false;'>main.swift:217</td><td><pre>            let length = dict.getInt( <b title='source.lang.swift.ref.var.global'>SK</b>.lengthID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#225_44"; return false;'>main.swift:225</td><td><pre>            let kind = dict.getUUIDString( <b title='source.lang.swift.ref.var.global'>SK</b>.kindID )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#231_75"; return false;'>main.swift:231</td><td><pre>            else if let dict = entities[ent], usrString = dict.getString( <b title='source.lang.swift.ref.var.global'>SK</b>.usrID ) {</pre></td></table></span></a></span> = <span class='identifier'><a name='16_10' href='SourceKit.html#97_5' title='s:FC7siteify9SourceKitcFMS0_FT_S0_'>SourceKit</a></span>()
0017    <span class='identifier'><a name='17_1' href='SourceKit.html#15_5' title='s:v7siteify5isTTYSb'>isTTY</a></span> = <span class='keyword'><a name='17_9'>false</a></span>
0018    
0019    <span class='keyword'><a name='19_1'>func</a></span> <span class='identifier'><a name='19_6' href='#' title='s:F7siteify8progressFSST_' onclick='return expand(this);'>progress<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#93_13"; return false;'>main.swift:93</td><td><pre>            <b title='source.lang.swift.ref.function.free'>progress</b>( "Built \(primary)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#117_5"; return false;'>main.swift:117</td><td><pre>    <b title='source.lang.swift.ref.function.free'>progress</b>( "Indexing \(fileno)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#187_5"; return false;'>main.swift:187</td><td><pre>    <b title='source.lang.swift.ref.function.free'>progress</b>( "Saving \(fileno)/\(compilations.count) html/\(filename)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#298_1"; return false;'>main.swift:298</td><td><pre><b title='source.lang.swift.ref.function.free'>progress</b>( "Site built, open ./html/index.html in your browser.\n" )</pre></td></table></span></a></span>( <span class='identifier'><a name='19_16'>str</a></span>: <span class='typeidentifier'><a name='19_21' title='s:SS'>String</a></span> ) {
0020        <span class='identifier'><a name='20_5' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='20_12'>"\u{001b}[2K"</a></span>+<span class='identifier'><a name='20_26'>str</a></span>, <span class='identifier'><a name='20_31'>separator</a></span>: <span class='string'><a name='20_42'>""</a></span>, <span class='identifier'><a name='20_46'>terminator</a></span>: <span class='string'><a name='20_58'>"\r"</a></span> )
0021        <span class='identifier'><a name='21_5' title='c:@F@fflush'>fflush</a></span>( <span class='identifier'><a name='21_13' title='s:v6Darwin6stdoutGVSs20UnsafeMutablePointerVSC7__sFILE_'>stdout</a></span> )
0022    }
0023    
0024    <span class='keyword'><a name='24_1'>extension</a></span> <span class='typeidentifier'><a name='24_11' title='c:objc(cs)NSFileHandle'>NSFileHandle</a></span> {
0025    
0026        <span class='builtin'><a name='26_5'>convenience</a></span> <span class='keyword'><a name='26_17' href='#' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__' onclick='return expand(this);'>init<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#75_18"; return false;'>main.swift:75</td><td><pre>    storingLog = <b title='source.lang.swift.ref.function.constructor'>NSFileHandle</b>( createForWritingAtPath: storedLog )</pre></td></table></span></a></span>?( <span class='identifier'><a name='26_24'>createForWritingAtPath</a></span> <span class='identifier'><a name='26_47'>path</a></span>: <span class='typeidentifier'><a name='26_53' title='s:SS'>String</a></span> ) {
0027            <span class='identifier'><a name='27_9' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='27_17' title='c:objc(cs)NSFileManager(im)createFileAtPath:contents:attributes:'>createFileAtPath</a></span>( <span class='identifier'><a name='27_35'>path</a></span>, <span class='identifier'><a name='27_41'>contents</a></span>:<span class='keyword'><a name='27_50'>nil</a></span>, <span class='identifier'><a name='27_55'>attributes</a></span>:<span class='keyword'><a name='27_66'>nil</a></span> )
0028            <span class='keyword'><a name='28_9'>self</a></span>.<span class='keyword'><a name='28_14' title='c:objc(cs)NSFileHandle(cm)fileHandleForWritingAtPath:'>init</a></span>( <span class='identifier'><a name='28_20'>forWritingAtPath</a></span>: <span class='identifier'><a name='28_38'>path</a></span> )
0029        }
0030    
0031        <span class='keyword'><a name='31_5'>func</a></span> <span class='identifier'><a name='31_10' href='#' title='s:FE7siteifyCSo12NSFileHandle11writeStringFS0_FSST_' onclick='return expand(this);'>writeString<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#97_17"; return false;'>main.swift:97</td><td><pre>    storingLog?.<b title='source.lang.swift.ref.function.method.instance'>writeString</b>( line+"\n" )</pre></td></table></span></a></span>( <span class='identifier'><a name='31_23'>str</a></span>: <span class='typeidentifier'><a name='31_28' title='s:SS'>String</a></span> ) {
0032            <span class='identifier'><a name='32_9'>str</a></span>.<span class='identifier'><a name='32_13' title='s:FSS11withCStringurFSSFzFzGVSs13UnsafePointerVSs4Int8_q_q_'>withCString</a></span> { <span class='identifier'><a name='32_27'>bytes</a></span> <span class='keyword'><a name='32_33'>in</a></span>
0033                <span class='identifier'><a name='33_13' title='c:objc(cs)NSFileHandle(im)writeData:'>writeData</a></span>( <span class='identifier'><a name='33_24' title='c:objc(cs)NSData(im)initWithBytesNoCopy:length:freeWhenDone:'>NSData</a></span>( <span class='identifier'><a name='33_32'>bytesNoCopy</a></span>: <span class='identifier'><a name='33_45' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span>&lt;<span class='typeidentifier'><a name='33_66' title='s:Ss4Void'>Void</a></span>>(<span class='identifier'><a name='33_72'>bytes</a></span>),
0034                    <span class='identifier'><a name='34_17'>length</a></span>: <span class='identifier'><a name='34_25' title='s:FSicFMSiFSuSi'>Int</a></span>(<span class='identifier'><a name='34_29'>strlen</a></span>(<span class='identifier'><a name='34_36'>bytes</a></span>)), <span class='identifier'><a name='34_45'>freeWhenDone</a></span>: <span class='keyword'><a name='34_59'>false</a></span> ) )
0035            }
0036        }
0037    
0038    }
0039    
0040    <span class='keyword'><a name='40_1'>let</a></span> <span class='identifier'><a name='40_5' href='#' title='s:v7siteify8buildLogCS_13FileGenerator' onclick='return expand(this);'>buildLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#67_5"; return false;'>main.swift:67</td><td><pre>    <b title='source.lang.swift.ref.var.global'>buildLog</b> = FileGenerator(path: storedLog)!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#74_5"; return false;'>main.swift:74</td><td><pre>    <b title='source.lang.swift.ref.var.global'>buildLog</b> = StatusGenerator( launchPath: "/usr/bin/xcodebuild", arguments: buildargs )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#80_13"; return false;'>main.swift:80</td><td><pre>for line in <b title='source.lang.swift.ref.var.global'>buildLog</b>.sequence {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='40_15' href='LineGenerators.html#51_7' title='s:C7siteify13FileGenerator'>FileGenerator</a></span>
0041    <span class='keyword'><a name='41_1'>let</a></span> <span class='identifier'><a name='41_5' href='#' title='s:v7siteify9storedLogSS' onclick='return expand(this);'>storedLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#56_46"; return false;'>main.swift:56</td><td><pre>                try! filemgr.moveItemAtPath( <b title='source.lang.swift.ref.var.global'>storedLog</b>, toPath: failedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#66_30"; return false;'>main.swift:66</td><td><pre>if filemgr.fileExistsAtPath( <b title='source.lang.swift.ref.var.global'>storedLog</b> ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#67_36"; return false;'>main.swift:67</td><td><pre>    buildLog = FileGenerator(path: <b title='source.lang.swift.ref.var.global'>storedLog</b>)!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#75_56"; return false;'>main.swift:75</td><td><pre>    storingLog = NSFileHandle( createForWritingAtPath: <b title='source.lang.swift.ref.var.global'>storedLog</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#84_40"; return false;'>main.swift:84</td><td><pre>        try! filemgr.removeItemAtPath( <b title='source.lang.swift.ref.var.global'>storedLog</b> )</pre></td></table></span></a></span> = <span class='string'><a name='41_17'>"siteify.log"</a></span>
0042    <span class='keyword'><a name='42_1'>var</a></span> <span class='identifier'><a name='42_5' href='#' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_' onclick='return expand(this);'>storingLog<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#75_5"; return false;'>main.swift:75</td><td><pre>    <b title='source.lang.swift.ref.var.global'>storingLog</b> = NSFileHandle( createForWritingAtPath: storedLog )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#82_8"; return false;'>main.swift:82</td><td><pre>    if <b title='source.lang.swift.ref.var.global'>storingLog</b> == nil, let symroot = line["^    SYMROOT = ([^\n]+)"][1] where !filemgr.fileExistsAtPath( symroot ) {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#92_12"; return false;'>main.swift:92</td><td><pre>        if <b title='source.lang.swift.ref.var.global'>storingLog</b> != nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#97_5"; return false;'>main.swift:97</td><td><pre>    <b title='source.lang.swift.ref.var.global'>storingLog</b>?.writeString( line+"\n" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#100_1"; return false;'>main.swift:100</td><td><pre><b title='source.lang.swift.ref.var.global'>storingLog</b>?.closeFile()</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='42_17' title='c:objc(cs)NSFileHandle'>NSFileHandle</a></span>? = <span class='keyword'><a name='42_33'>nil</a></span>
0043    
0044    <span class='keyword'><a name='44_1'>class</a></span> <span class='identifier'><a name='44_7' href='#' title='s:C7siteify15StatusGenerator' onclick='return expand(this);'>StatusGenerator<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#74_16"; return false;'>main.swift:74</td><td><pre>    buildLog = <b title='source.lang.swift.ref.class'>StatusGenerator</b>( launchPath: "/usr/bin/xcodebuild", arguments: buildargs )</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='44_24' href='LineGenerators.html#15_7' title='s:C7siteify13TaskGenerator'>TaskGenerator</a></span> {
0045    
0046        <span class='builtin'><a name='46_5'>override</a></span> <span class='keyword'><a name='46_14'>func</a></span> <span class='identifier'><a name='46_19'>next</a></span>() -> <span class='typeidentifier'><a name='46_29' title='s:SS'>String</a></span>? {
0047            <span class='keyword'><a name='47_9'>let</a></span> <span class='identifier'><a name='47_13'>next</a></span> = <span class='keyword'><a name='47_20'>super</a></span>.<span class='identifier'><a name='47_26' href='LineGenerators.html#67_10' title='s:FC7siteify13FileGenerator4nextFS0_FT_GSqSS_'>next</a></span>()
0048            <span class='keyword'><a name='48_9'>if</a></span> <span class='identifier'><a name='48_12'>next</a></span> == <span class='keyword'><a name='48_20'>nil</a></span> {
0049                <span class='keyword'><a name='49_13'>let</a></span> <span class='identifier'><a name='49_17'>failedLog</a></span> = <span class='string'><a name='49_29'>"failed.log"</a></span>
0050                <span class='keyword'><a name='50_13'>if</a></span> <span class='identifier'><a name='50_16' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='50_24' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='50_42'>failedLog</a></span> ) {
0051                    <span class='keyword'><a name='51_17'>try</a></span>! <span class='identifier'><a name='51_22' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='51_30' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='identifier'><a name='51_48'>failedLog</a></span> )
0052                }
0053    
0054                <span class='identifier'><a name='54_13' href='LineGenerators.html#17_9' title='s:vC7siteify13TaskGenerator4taskCSo6NSTask'>task</a></span>.<span class='identifier'><a name='54_18' title='c:objc(cs)NSTask(im)waitUntilExit'>waitUntilExit</a></span>()
0055                <span class='keyword'><a name='55_13'>if</a></span> <span class='identifier'><a name='55_16' href='LineGenerators.html#17_9' title='s:vC7siteify13TaskGenerator4taskCSo6NSTask'>task</a></span>.<span class='identifier'><a name='55_21' title='c:objc(cs)NSTask(py)terminationStatus'>terminationStatus</a></span> != <span class='identifier'><a name='55_42' title='c:@macro@EXIT_SUCCESS'>EXIT_SUCCESS</a></span> {
0056                    <span class='keyword'><a name='56_17'>try</a></span>! <span class='identifier'><a name='56_22' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='56_30' title='c:objc(cs)NSFileManager(im)moveItemAtPath:toPath:error:'>moveItemAtPath</a></span>( <span class='identifier'><a name='56_46' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span>, <span class='identifier'><a name='56_57'>toPath</a></span>: <span class='identifier'><a name='56_65'>failedLog</a></span> )
0057                    <span class='identifier'><a name='57_17' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='57_24'>"\nxcodebuild failed, consult ./</a></span>\<span class='string_interpolation_anchor'><a name='57_57'>(</a></span><span class='identifier'><a name='57_58'>failedLog</a></span><span class='string_interpolation_anchor'><a name='57_67'>)</a></span><span class='string'><a name='57_68'>"</a></span> )
0058                    <span class='identifier'><a name='58_17' title='c:@F@exit'>exit</a></span>( <span class='number'><a name='58_23'>1</a></span> )
0059                }
0060            }
0061            <span class='keyword'><a name='61_9'>return</a></span> <span class='identifier'><a name='61_16'>next</a></span>
0062        }
0063    
0064    }
0065    
0066    <span class='keyword'><a name='66_1'>if</a></span> <span class='identifier'><a name='66_4' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='66_12' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='66_30' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> ) {
0067        <span class='identifier'><a name='67_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='67_16' href='LineGenerators.html#57_17' title='s:FC7siteify13FileGeneratorcFMS0_FT4pathSS13lineSeparatorGSqSS__GSqS0__'>FileGenerator</a></span>(<span class='identifier'><a name='67_30'>path</a></span>: <span class='identifier'><a name='67_36' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span>)!
0068    }
0069    <span class='keyword'><a name='69_1'>else</a></span> {
0070        <span class='keyword'><a name='70_5'>var</a></span> <span class='identifier'><a name='70_9'>buildargs</a></span> = <span class='identifier'><a name='70_21' title='s:OSs7Process'>Process</a></span>.<span class='identifier'><a name='70_29' title='s:ZvOSs7Process9argumentsGSaSS_'>arguments</a></span>
0071        <span class='string'><a name='71_5'>"/tmp/siteify.XXXX"</a></span>.<span class='identifier'><a name='71_25' title='s:FSS11withCStringurFSSFzFzGVSs13UnsafePointerVSs4Int8_q_q_'>withCString</a></span>( { (<span class='identifier'><a name='71_41'>str</a></span>) <span class='keyword'><a name='71_46'>in</a></span>
0072            <span class='identifier'><a name='72_9'>buildargs</a></span>[<span class='number'><a name='72_19'>0</a></span>] = <span class='string'><a name='72_24'>"SYMROOT="</a></span>+<span class='identifier'><a name='72_35' title='s:SS'>String</a></span>.<span class='identifier'><a name='72_42' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='72_55' title='c:@F@mktemp'>mktemp</a></span>( <span class='identifier'><a name='72_63' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span>&lt;<span class='typeidentifier'><a name='72_84' title='s:VSs4Int8'>Int8</a></span>>(<span class='identifier'><a name='72_90'>str</a></span>) ) )!
0073        } )
0074        <span class='identifier'><a name='74_5' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span> = <span class='identifier'><a name='74_16' href='LineGenerators.html#23_17' title='s:FC7siteify13TaskGeneratorcFMS0_FT10launchPathSS9argumentsGSaSS_9directoryGSqSS_13lineSeparatorGSqSS__S0_'>StatusGenerator</a></span>( <span class='identifier'><a name='74_33'>launchPath</a></span>: <span class='string'><a name='74_45'>"/usr/bin/xcodebuild"</a></span>, <span class='identifier'><a name='74_68'>arguments</a></span>: <span class='identifier'><a name='74_79'>buildargs</a></span> )
0075        <span class='identifier'><a name='75_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> = <span class='identifier'><a name='75_18' href='main.html#26_17' title='s:FE7siteifyCSo12NSFileHandlecFMS0_FT22createForWritingAtPathSS_GSqS0__'>NSFileHandle</a></span>( <span class='identifier'><a name='75_32'>createForWritingAtPath</a></span>: <span class='identifier'><a name='75_56' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0076    }
0077    
0078    <span class='keyword'><a name='78_1'>var</a></span> <span class='identifier'><a name='78_5' href='#' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____' onclick='return expand(this);'>compilations<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#91_9"; return false;'>main.swift:91</td><td><pre>        <b title='source.lang.swift.ref.var.global'>compilations</b>.append( (primary, SK.array( SK.compilerArgs( line ) ) ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#115_21"; return false;'>main.swift:115</td><td><pre>for (file, argv) in <b title='source.lang.swift.ref.var.global'>compilations</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#117_37"; return false;'>main.swift:117</td><td><pre>    progress( "Indexing \(fileno)/\(<b title='source.lang.swift.ref.var.global'>compilations</b>.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#181_21"; return false;'>main.swift:181</td><td><pre>for (file, argv) in <b title='source.lang.swift.ref.var.global'>compilations</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#187_35"; return false;'>main.swift:187</td><td><pre>    progress( "Saving \(fileno)/\(<b title='source.lang.swift.ref.var.global'>compilations</b>.count) html/\(filename)" )</pre></td></table></span></a></span> = [(<span class='identifier'><a name='78_22' title='s:SS'>String</a></span>, <span class='identifier'><a name='78_30' title='c:sourcekitd.h@T@sourcekitd_object_t'>sourcekitd_object_t</a></span>)]()
0079    
0080    <span class='keyword'><a name='80_1'>for</a></span> <span class='identifier'><a name='80_5'>line</a></span> <span class='keyword'><a name='80_10'>in</a></span> <span class='identifier'><a name='80_13' href='main.html#40_5' title='s:v7siteify8buildLogCS_13FileGenerator'>buildLog</a></span>.<span class='identifier'><a name='80_22' href='LineGenerators.html#99_9' title='s:vC7siteify13FileGenerator8sequenceGVSs11AnySequenceSS_'>sequence</a></span> {
0081    
0082        <span class='keyword'><a name='82_5'>if</a></span> <span class='identifier'><a name='82_8' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> == <span class='keyword'><a name='82_22'>nil</a></span>, <span class='keyword'><a name='82_27'>let</a></span> <span class='identifier'><a name='82_31'>symroot</a></span> = <span class='identifier'><a name='82_41'>line</a></span>[<span class='string'><a name='82_46'>"^    SYMROOT = ([^\n]+)"</a></span>][<span class='number'><a name='82_73'>1</a></span>] <span class='keyword'><a name='82_76'>where</a></span> !<span class='identifier'><a name='82_83' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='82_91' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='identifier'><a name='82_109'>symroot</a></span> ) {
0083            <span class='identifier'><a name='83_9' title='s:FSs5printFTGSaP__9separatorSS10terminatorSS_T_'>print</a></span>( <span class='string'><a name='83_16'>"Pre-built project no longer exists, rerun to rebuild"</a></span> )
0084            <span class='keyword'><a name='84_9'>try</a></span>! <span class='identifier'><a name='84_14' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='84_22' title='c:objc(cs)NSFileManager(im)removeItemAtPath:error:'>removeItemAtPath</a></span>( <span class='identifier'><a name='84_40' href='main.html#41_5' title='s:v7siteify9storedLogSS'>storedLog</a></span> )
0085            <span class='identifier'><a name='85_9' title='c:@F@exit'>exit</a></span>( <span class='number'><a name='85_15'>1</a></span> )
0086        }
0087    
0088        <span class='keyword'><a name='88_5'>let</a></span> <span class='identifier'><a name='88_9'>regex</a></span> = <span class='identifier'><a name='88_17'>line</a></span>[<span class='string'><a name='88_22'>"-primary-file (?:\"([^\"]+)\"|(\\S+)) "</a></span>]
0089    
0090        <span class='keyword'><a name='90_5'>if</a></span> <span class='keyword'><a name='90_8'>let</a></span> <span class='identifier'><a name='90_12'>primary</a></span> = <span class='identifier'><a name='90_22'>regex</a></span>[<span class='number'><a name='90_28'>1</a></span>] ?? <span class='identifier'><a name='90_34'>regex</a></span>[<span class='number'><a name='90_40'>2</a></span>] {
0091            <span class='identifier'><a name='91_9' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='91_22' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( (<span class='identifier'><a name='91_31'>primary</a></span>, <span class='identifier'><a name='91_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='91_43' href='SourceKit.html#101_10' title='s:FC7siteify9SourceKit5arrayFS0_FGSaSS_GVSs20UnsafeMutablePointerT__'>array</a></span>( <span class='identifier'><a name='91_50' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='91_53' href='SourceKit.html#224_10' title='s:FC7siteify9SourceKit12compilerArgsFS0_FSSGSaSS_'>compilerArgs</a></span>( <span class='identifier'><a name='91_67'>line</a></span> ) ) ) )
0092            <span class='keyword'><a name='92_9'>if</a></span> <span class='identifier'><a name='92_12' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span> != <span class='keyword'><a name='92_26'>nil</a></span> {
0093                <span class='identifier'><a name='93_13' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='93_23'>"Built </a></span>\<span class='string_interpolation_anchor'><a name='93_31'>(</a></span><span class='identifier'><a name='93_32'>primary</a></span><span class='string_interpolation_anchor'><a name='93_39'>)</a></span><span class='string'><a name='93_40'>"</a></span> )
0094            }
0095        }
0096    
0097        <span class='identifier'><a name='97_5' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span>?.<span class='identifier'><a name='97_17' href='main.html#31_10' title='s:FE7siteifyCSo12NSFileHandle11writeStringFS0_FSST_'>writeString</a></span>( <span class='identifier'><a name='97_30'>line</a></span>+<span class='string'><a name='97_35'>"\n"</a></span> )
0098    }
0099    
0100    <span class='identifier'><a name='100_1' href='main.html#42_5' title='s:v7siteify10storingLogGSqCSo12NSFileHandle_'>storingLog</a></span>?.<span class='identifier'><a name='100_13' title='c:objc(cs)NSFileHandle(im)closeFile'>closeFile</a></span>()
0101    
0102    <span class='keyword'><a name='102_1'>var</a></span> <span class='identifier'><a name='102_5' href='#' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_' onclick='return expand(this);'>entities<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#139_25"; return false;'>main.swift:139</td><td><pre>                        <b title='source.lang.swift.ref.var.global'>entities</b>[entity] = dict</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#147_23"; return false;'>main.swift:147</td><td><pre>for (entity, dict) in <b title='source.lang.swift.ref.var.global'>entities</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#231_32"; return false;'>main.swift:231</td><td><pre>            else if let dict = <b title='source.lang.swift.ref.var.global'>entities</b>[ent], usrString = dict.getString( SK.usrID ) {</pre></td></table></span></a></span> = [<span class='identifier'><a name='102_17' href='Entity.html#30_7' title='s:C7siteify6Entity'>Entity</a></span>:<span class='identifier'><a name='102_24' title='c:@SA@sourcekitd_variant_t'>sourcekitd_variant_t</a></span>]()
0103    
0104    <span class='keyword'><a name='104_1'>class</a></span> <span class='identifier'><a name='104_7' href='#' title='s:C7siteify3USR' onclick='return expand(this);'>USR<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#112_20"; return false;'>main.swift:112</td><td><pre>var usrs = [String:<b title='source.lang.swift.ref.class'>USR</b>]()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#131_39"; return false;'>main.swift:131</td><td><pre>                    usrs[usrString] = <b title='source.lang.swift.ref.class'>USR</b>()</pre></td></table></span></a></span> {
0105    
0106        <span class='keyword'><a name='106_5'>var</a></span> <span class='identifier'><a name='106_9' href='#' title='s:vC7siteify3USR10referencesGSaCS_6Entity_' onclick='return expand(this);'>references<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#135_25"; return false;'>main.swift:135</td><td><pre>                    usr.<b title='source.lang.swift.ref.var.instance'>references</b>.append( entity )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#236_33"; return false;'>main.swift:236</td><td><pre>                    else if usr.<b title='source.lang.swift.ref.var.instance'>references</b>.count > 1 {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#238_42"; return false;'>main.swift:238</td><td><pre>                        for i in 0..&lt;usr.<b title='source.lang.swift.ref.var.instance'>references</b>.count {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#239_43"; return false;'>main.swift:239</td><td><pre>                            let ref = usr.<b title='source.lang.swift.ref.var.instance'>references</b>[i]</pre></td></table></span></a></span> = [<span class='identifier'><a name='106_23' href='Entity.html#30_7' title='s:C7siteify6Entity'>Entity</a></span>]()
0107        <span class='keyword'><a name='107_5'>var</a></span> <span class='identifier'><a name='107_9' href='#' title='s:vC7siteify3USR8reflinesGSaSS_' onclick='return expand(this);'>reflines<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#136_25"; return false;'>main.swift:136</td><td><pre>                    usr.<b title='source.lang.swift.ref.var.instance'>reflines</b>.append( entity.patchText( data, value: "\\w*" )! )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#245_54"; return false;'>main.swift:245</td><td><pre>                            popup += "&lt;td>&lt;pre>\(usr.<b title='source.lang.swift.ref.var.instance'>reflines</b>[i])&lt;/pre>&lt;/td>"</pre></td></table></span></a></span> = [<span class='identifier'><a name='107_21' title='s:SS'>String</a></span>]()
0108        <span class='keyword'><a name='108_5'>var</a></span> <span class='identifier'><a name='108_9' href='#' title='s:vC7siteify3USR9declaringGSqCS_6Entity_' onclick='return expand(this);'>declaring<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#150_17"; return false;'>main.swift:150</td><td><pre>            usr.<b title='source.lang.swift.ref.var.instance'>declaring</b> = entity</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#232_58"; return false;'>main.swift:232</td><td><pre>                if let usr = usrs[usrString], decl = usr.<b title='source.lang.swift.ref.var.instance'>declaring</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#281_65"; return false;'>main.swift:281</td><td><pre>    if usrString.hasPrefix( "s:" ), let decl = usrs[usrString]?.<b title='source.lang.swift.ref.var.instance'>declaring</b> {</pre></td></table></span></a></span>: <span class='typeidentifier'><a name='108_20' href='Entity.html#30_7' title='s:C7siteify6Entity'>Entity</a></span>?
0109    
0110    }
0111    
0112    <span class='keyword'><a name='112_1'>var</a></span> <span class='identifier'><a name='112_5' href='#' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_' onclick='return expand(this);'>usrs<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#130_20"; return false;'>main.swift:130</td><td><pre>                if <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString] == nil {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#131_21"; return false;'>main.swift:131</td><td><pre>                    <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString] = USR()</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#134_74"; return false;'>main.swift:134</td><td><pre>                if !kind.containsString( ".decl.extension." ), var usr = <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#149_35"; return false;'>main.swift:149</td><td><pre>        if entity.decl, var usr = <b title='source.lang.swift.ref.var.global'>usrs</b>[usr] {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#232_30"; return false;'>main.swift:232</td><td><pre>                if let usr = <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString], decl = usr.declaring {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#280_25"; return false;'>main.swift:280</td><td><pre>for (usrString, usr) in <b title='source.lang.swift.ref.var.global'>usrs</b> {</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#281_48"; return false;'>main.swift:281</td><td><pre>    if usrString.hasPrefix( "s:" ), let decl = <b title='source.lang.swift.ref.var.global'>usrs</b>[usrString]?.declaring {</pre></td></table></span></a></span> = [<span class='identifier'><a name='112_13' title='s:SS'>String</a></span>:<span class='identifier'><a name='112_20' href='main.html#104_7' title='s:C7siteify3USR'>USR</a></span>]()
0113    <span class='keyword'><a name='113_1'>var</a></span> <span class='identifier'><a name='113_5' href='#' title='s:v7siteify6filenoSi' onclick='return expand(this);'>fileno<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#116_5"; return false;'>main.swift:116</td><td><pre>    <b title='source.lang.swift.ref.var.global'>fileno</b> += 1</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#117_27"; return false;'>main.swift:117</td><td><pre>    progress( "Indexing \(<b title='source.lang.swift.ref.var.global'>fileno</b>)/\(compilations.count) \(file)" )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#179_1"; return false;'>main.swift:179</td><td><pre><b title='source.lang.swift.ref.var.global'>fileno</b> = 0</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#186_5"; return false;'>main.swift:186</td><td><pre>    <b title='source.lang.swift.ref.var.global'>fileno</b> += 1</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#187_25"; return false;'>main.swift:187</td><td><pre>    progress( "Saving \(<b title='source.lang.swift.ref.var.global'>fileno</b>)/\(compilations.count) html/\(filename)" )</pre></td></table></span></a></span> = <span class='number'><a name='113_14'>0</a></span>
0114    
0115    <span class='keyword'><a name='115_1'>for</a></span> (<span class='identifier'><a name='115_6'>file</a></span>, <span class='identifier'><a name='115_12'>argv</a></span>) <span class='keyword'><a name='115_18'>in</a></span> <span class='identifier'><a name='115_21' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span> {
0116        <span class='identifier'><a name='116_5' href='main.html#113_5' title='s:v7siteify6filenoSi'>fileno</a></span> += <span class='number'><a name='116_15'>1</a></span>
0117        <span class='identifier'><a name='117_5' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='117_15'>"Indexing </a></span>\<span class='string_interpolation_anchor'><a name='117_26'>(</a></span><span class='identifier'><a name='117_27' href='main.html#113_5' title='s:v7siteify6filenoSi'>fileno</a></span><span class='string_interpolation_anchor'><a name='117_33'>)</a></span><span class='string'><a name='117_34'>/</a></span>\<span class='string_interpolation_anchor'><a name='117_36'>(</a></span><span class='identifier'><a name='117_37' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='117_50' title='s:vSa5countSi'>count</a></span><span class='string_interpolation_anchor'><a name='117_55'>)</a></span><span class='string'><a name='117_56'> </a></span>\<span class='string_interpolation_anchor'><a name='117_58'>(</a></span><span class='identifier'><a name='117_59'>file</a></span><span class='string_interpolation_anchor'><a name='117_63'>)</a></span><span class='string'><a name='117_64'>"</a></span> )
0118    
0119        <span class='keyword'><a name='119_5'>if</a></span> <span class='keyword'><a name='119_8'>let</a></span> <span class='identifier'><a name='119_12'>data</a></span> = <span class='identifier'><a name='119_19' title='c:objc(cs)NSData(im)initWithContentsOfFile:'>NSData</a></span>( <span class='identifier'><a name='119_27'>contentsOfFile</a></span>: <span class='identifier'><a name='119_43'>file</a></span> ) {
0120            <span class='keyword'><a name='120_9'>let</a></span> <span class='identifier'><a name='120_13'>resp</a></span> = <span class='identifier'><a name='120_20' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='120_23' href='SourceKit.html#139_10' title='s:FC7siteify9SourceKit9indexFileFS0_FTSS12compilerArgsGVSs20UnsafeMutablePointerT___GS1_T__'>indexFile</a></span>( <span class='identifier'><a name='120_34'>file</a></span>, <span class='identifier'><a name='120_40'>compilerArgs</a></span>: <span class='identifier'><a name='120_54'>argv</a></span> )
0121            <span class='keyword'><a name='121_9'>let</a></span> <span class='identifier'><a name='121_13'>dict</a></span> = <span class='identifier'><a name='121_20' title='c:@F@sourcekitd_response_get_value'>sourcekitd_response_get_value</a></span>( <span class='identifier'><a name='121_51'>resp</a></span> )
0122            <span class='identifier'><a name='122_9' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='122_12' href='SourceKit.html#163_10' title='s:FC7siteify9SourceKit11recurseOverFS0_FTVSs14COpaquePointer4respVSC20sourcekitd_variant_t6indentSS10visualiserGSqPS_10Visualiser__5blockFT4dictS2__T__T_'>recurseOver</a></span>( <span class='identifier'><a name='122_25' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='122_28' href='SourceKit.html#66_14' title='s:vC7siteify9SourceKit10entitiesIDVSs14COpaquePointer'>entitiesID</a></span>, <span class='identifier'><a name='122_40'>resp</a></span>: <span class='identifier'><a name='122_46'>dict</a></span>, <span class='identifier'><a name='122_52'>block</a></span>: { <span class='identifier'><a name='122_61'>dict</a></span> <span class='keyword'><a name='122_66'>in</a></span>
0123                <span class='keyword'><a name='123_13'>if</a></span> <span class='keyword'><a name='123_16'>let</a></span> <span class='identifier'><a name='123_20'>usrString</a></span> = <span class='identifier'><a name='123_32'>dict</a></span>.<span class='identifier'><a name='123_37' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='123_48' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='123_51' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0124                    <span class='keyword'><a name='124_17'>let</a></span> <span class='identifier'><a name='124_21'>kind</a></span> = <span class='identifier'><a name='124_28'>dict</a></span>.<span class='identifier'><a name='124_33' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='124_48' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='124_51' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0125                    <span class='keyword'><a name='125_17'>let</a></span> <span class='identifier'><a name='125_21'>entity</a></span> = <span class='identifier'><a name='125_30' href='Entity.html#34_5' title='s:FC7siteify6EntitycFMS0_FT4fileSS4lineSi3colSi4kindGSqSS_4declSb_S0_'>Entity</a></span>( <span class='identifier'><a name='125_38'>file</a></span>: <span class='identifier'><a name='125_44'>file</a></span>,
0126                        <span class='identifier'><a name='126_21'>line</a></span>: <span class='identifier'><a name='126_27'>dict</a></span>.<span class='identifier'><a name='126_32' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='126_40' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='126_43' href='SourceKit.html#77_14' title='s:vC7siteify9SourceKit6lineIDVSs14COpaquePointer'>lineID</a></span> ),
0127                        <span class='identifier'><a name='127_21'>col</a></span>: <span class='identifier'><a name='127_26'>dict</a></span>.<span class='identifier'><a name='127_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='127_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='127_42' href='SourceKit.html#78_14' title='s:vC7siteify9SourceKit5colIDVSs14COpaquePointer'>colID</a></span> ),
0128                        <span class='identifier'><a name='128_21'>kind</a></span>: <span class='identifier'><a name='128_27'>kind</a></span>, <span class='identifier'><a name='128_33'>decl</a></span>: <span class='identifier'><a name='128_39'>kind</a></span>.<span class='identifier'><a name='128_44' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='128_60'>".decl."</a></span> ) )
0129    
0130                    <span class='keyword'><a name='130_17'>if</a></span> <span class='identifier'><a name='130_20' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='130_25'>usrString</a></span>] == <span class='keyword'><a name='130_39'>nil</a></span> {
0131                        <span class='identifier'><a name='131_21' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='131_26'>usrString</a></span>] = <span class='identifier'><a name='131_39' href='main.html#104_7' title='s:C7siteify3USR'>USR</a></span>()
0132                    }
0133    
0134                    <span class='keyword'><a name='134_17'>if</a></span> !<span class='identifier'><a name='134_21'>kind</a></span>.<span class='identifier'><a name='134_26' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='134_42'>".decl.extension."</a></span> ), <span class='keyword'><a name='134_64'>var</a></span> <span class='identifier'><a name='134_68'>usr</a></span> = <span class='identifier'><a name='134_74' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='134_79'>usrString</a></span>] {
0135                        <span class='identifier'><a name='135_21'>usr</a></span>.<span class='identifier'><a name='135_25' href='main.html#106_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>.<span class='identifier'><a name='135_36' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='135_44'>entity</a></span> )
0136                        <span class='identifier'><a name='136_21'>usr</a></span>.<span class='identifier'><a name='136_25' href='main.html#107_9' title='s:vC7siteify3USR8reflinesGSaSS_'>reflines</a></span>.<span class='identifier'><a name='136_34' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( <span class='identifier'><a name='136_42'>entity</a></span>.<span class='identifier'><a name='136_49' href='Entity.html#74_10' title='s:FC7siteify6Entity9patchTextFS0_FTCSo6NSData5valueSS_GSqSS_'>patchText</a></span>( <span class='identifier'><a name='136_60'>data</a></span>, <span class='identifier'><a name='136_66'>value</a></span>: <span class='string'><a name='136_73'>"\\w*"</a></span> )! )
0137    
0138                        <span class='keyword'><a name='138_21'>if</a></span> !<span class='identifier'><a name='138_25'>kind</a></span>.<span class='identifier'><a name='138_30' title='s:FE10FoundationSS14containsStringFSSFSSSb'>containsString</a></span>( <span class='string'><a name='138_46'>".accessor."</a></span> ) {
0139                            <span class='identifier'><a name='139_25' href='main.html#102_5' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span>[<span class='identifier'><a name='139_34'>entity</a></span>] = <span class='identifier'><a name='139_44'>dict</a></span>
0140                        }
0141                    }
0142                }
0143            } )
0144        }
0145    }
0146    
0147    <span class='keyword'><a name='147_1'>for</a></span> (<span class='identifier'><a name='147_6'>entity</a></span>, <span class='identifier'><a name='147_14'>dict</a></span>) <span class='keyword'><a name='147_20'>in</a></span> <span class='identifier'><a name='147_23' href='main.html#102_5' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span> {
0148        <span class='keyword'><a name='148_5'>if</a></span> <span class='keyword'><a name='148_8'>let</a></span> <span class='identifier'><a name='148_12'>usr</a></span> = <span class='identifier'><a name='148_18'>dict</a></span>.<span class='identifier'><a name='148_23' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='148_34' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='148_37' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0149            <span class='keyword'><a name='149_9'>if</a></span> <span class='identifier'><a name='149_12'>entity</a></span>.<span class='identifier'><a name='149_19' href='Entity.html#32_59' title='s:vC7siteify6Entity4declSb'>decl</a></span>, <span class='keyword'><a name='149_25'>var</a></span> <span class='identifier'><a name='149_29'>usr</a></span> = <span class='identifier'><a name='149_35' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='149_40'>usr</a></span>] {
0150                <span class='identifier'><a name='150_13'>usr</a></span>.<span class='identifier'><a name='150_17' href='main.html#108_9' title='s:vC7siteify3USR9declaringGSqCS_6Entity_'>declaring</a></span> = <span class='identifier'><a name='150_29'>entity</a></span>
0151            }
0152        }
0153    }
0154    
0155    <span class='keyword'><a name='155_1'>let</a></span> <span class='identifier'><a name='155_5' href='#' title='s:v7siteify4homeSS' onclick='return expand(this);'>home<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#156_17"; return false;'>main.swift:156</td><td><pre>let resources = <b title='source.lang.swift.ref.var.global'>home</b>+"/Library/siteify/"</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#177_59"; return false;'>main.swift:177</td><td><pre>    "__ROOT__": cwd.stringByReplacingOccurrencesOfString( <b title='source.lang.swift.ref.var.global'>home</b>, withString: "~" )] )</pre></td></table></span></a></span> = <span class='identifier'><a name='155_12' title='s:SS'>String</a></span>.<span class='identifier'><a name='155_19' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='155_32' title='c:@F@getenv'>getenv</a></span>(<span class='string'><a name='155_39'>"HOME"</a></span>) )!
0156    <span class='keyword'><a name='156_1'>let</a></span> <span class='identifier'><a name='156_5' href='#' title='s:v7siteify9resourcesSS' onclick='return expand(this);'>resources<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#159_48"; return false;'>main.swift:159</td><td><pre>    var input = try! NSString( contentsOfFile: <b title='source.lang.swift.ref.var.global'>resources</b>+template, encoding: NSUTF8StringEncoding )</pre></td></table></span></a></span> = <span class='identifier'><a name='156_17' href='main.html#155_5' title='s:v7siteify4homeSS'>home</a></span>+<span class='string'><a name='156_22'>"/Library/siteify/"</a></span>
0157    
0158    <span class='keyword'><a name='158_1'>func</a></span> <span class='identifier'><a name='158_6' href='#' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>copyTemplate<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#171_9"; return false;'>main.swift:171</td><td><pre>fclose( <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "siteify.css" ) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#176_13"; return false;'>main.swift:176</td><td><pre>let index = <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "index.html", patches: ["__DATE__": NSDate().description,</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#270_19"; return false;'>main.swift:270</td><td><pre>        let out = <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "source.html", patches: [:], dest: "html/"+filename )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#289_12"; return false;'>main.swift:289</td><td><pre>let xref = <b title='source.lang.swift.ref.function.free'>copyTemplate</b>( "xref.html" )</pre></td></table></span></a></span>( <span class='identifier'><a name='158_20'>template</a></span>: <span class='typeidentifier'><a name='158_30' title='s:SS'>String</a></span>, <span class='identifier'><a name='158_38'>patches</a></span>: [<span class='typeidentifier'><a name='158_48' title='s:SS'>String</a></span>:<span class='typeidentifier'><a name='158_55' title='s:SS'>String</a></span>] = [:], <span class='identifier'><a name='158_70'>dest</a></span>: <span class='typeidentifier'><a name='158_76' title='s:SS'>String</a></span>? = <span class='keyword'><a name='158_86'>nil</a></span> ) -> <span class='typeidentifier'><a name='158_95' title='s:VSs20UnsafeMutablePointer'>UnsafeMutablePointer</a></span>&lt;<span class='typeidentifier'><a name='158_116' title='c:@T@FILE'>FILE</a></span>> {
0159        <span class='keyword'><a name='159_5'>var</a></span> <span class='identifier'><a name='159_9'>input</a></span> = <span class='keyword'><a name='159_17'>try</a></span>! <span class='identifier'><a name='159_22' title='c:objc(cs)NSString(im)initWithContentsOfFile:encoding:error:'>NSString</a></span>( <span class='identifier'><a name='159_32'>contentsOfFile</a></span>: <span class='identifier'><a name='159_48' href='main.html#156_5' title='s:v7siteify9resourcesSS'>resources</a></span>+<span class='identifier'><a name='159_58'>template</a></span>, <span class='identifier'><a name='159_68'>encoding</a></span>: <span class='identifier'><a name='159_78' title='s:v10Foundation20NSUTF8StringEncodingSu'>NSUTF8StringEncoding</a></span> )
0160        <span class='keyword'><a name='160_5'>for</a></span> (<span class='identifier'><a name='160_10'>tag</a></span>, <span class='identifier'><a name='160_15'>value</a></span>) <span class='keyword'><a name='160_22'>in</a></span> <span class='identifier'><a name='160_25'>patches</a></span> {
0161            <span class='identifier'><a name='161_9'>input</a></span> = <span class='identifier'><a name='161_17'>input</a></span>.<span class='identifier'><a name='161_23' title='c:objc(cs)NSString(im)stringByReplacingOccurrencesOfString:withString:'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='161_61'>tag</a></span>, <span class='identifier'><a name='161_66'>withString</a></span>: <span class='identifier'><a name='161_78'>value</a></span> )
0162        }
0163        <span class='keyword'><a name='163_5'>let</a></span> <span class='identifier'><a name='163_9'>out</a></span> = <span class='identifier'><a name='163_15' title='c:@F@fopen'>fopen</a></span>( <span class='identifier'><a name='163_22'>dest</a></span> ?? <span class='string'><a name='163_30'>"html/"</a></span>+<span class='identifier'><a name='163_38'>template</a></span>, <span class='string'><a name='163_48'>"w"</a></span> )
0164        <span class='identifier'><a name='164_5' title='c:@F@fputs'>fputs</a></span>( <span class='identifier'><a name='164_12'>input</a></span>.<span class='identifier'><a name='164_18' title='c:objc(cs)NSString(py)UTF8String'>UTF8String</a></span>, <span class='identifier'><a name='164_30'>out</a></span> )
0165        <span class='keyword'><a name='165_5'>return</a></span> <span class='identifier'><a name='165_12'>out</a></span>
0166    }
0167    
0168    <span class='keyword'><a name='168_1'>if</a></span> !<span class='identifier'><a name='168_5' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='168_13' title='c:objc(cs)NSFileManager(im)fileExistsAtPath:'>fileExistsAtPath</a></span>( <span class='string'><a name='168_31'>"html"</a></span> ) {
0169        <span class='keyword'><a name='169_5'>try</a></span>! <span class='identifier'><a name='169_10' href='main.html#15_5' title='s:v7siteify7filemgrCSo13NSFileManager'>filemgr</a></span>.<span class='identifier'><a name='169_18' title='c:objc(cs)NSFileManager(im)createDirectoryAtPath:withIntermediateDirectories:attributes:error:'>createDirectoryAtPath</a></span>( <span class='string'><a name='169_41'>"html"</a></span>, <span class='identifier'><a name='169_49'>withIntermediateDirectories</a></span>: <span class='keyword'><a name='169_78'>false</a></span>, <span class='identifier'><a name='169_85'>attributes</a></span>: <span class='keyword'><a name='169_97'>nil</a></span> )
0170    }
0171    <span class='identifier'><a name='171_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='171_9' href='main.html#158_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='171_23'>"siteify.css"</a></span> ) )
0172    
0173    <span class='keyword'><a name='173_1'>var</a></span> <span class='identifier'><a name='173_5' href='#' title='s:v7siteify4buffGSaVSs4Int8_' onclick='return expand(this);'>buff<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#174_40"; return false;'>main.swift:174</td><td><pre>let cwd = String.fromCString( getcwd( &amp;<b title='source.lang.swift.ref.var.global'>buff</b>, buff.count ) )!</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#174_46"; return false;'>main.swift:174</td><td><pre>let cwd = String.fromCString( getcwd( &amp;buff, <b title='source.lang.swift.ref.var.global'>buff</b>.count ) )!</pre></td></table></span></a></span> = [<span class='identifier'><a name='173_13' title='s:VSs4Int8'>Int8</a></span>]( <span class='identifier'><a name='173_20'>count</a></span>: <span class='identifier'><a name='173_27' title='s:FSicFMSiFVSs5Int32Si'>Int</a></span>(<span class='identifier'><a name='173_31' title='c:@macro@PATH_MAX'>PATH_MAX</a></span>), <span class='identifier'><a name='173_42'>repeatedValue</a></span>: <span class='number'><a name='173_57'>0</a></span> )
0174    <span class='keyword'><a name='174_1'>let</a></span> <span class='identifier'><a name='174_5' href='#' title='s:v7siteify3cwdSS' onclick='return expand(this);'>cwd<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#177_17"; return false;'>main.swift:177</td><td><pre>    "__ROOT__": <b title='source.lang.swift.ref.var.global'>cwd</b>.stringByReplacingOccurrencesOfString( home, withString: "~" )] )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#183_63"; return false;'>main.swift:183</td><td><pre>    let relative = file.stringByReplacingOccurrencesOfString( <b title='source.lang.swift.ref.var.global'>cwd</b>+"/", withString: "" )</pre></td></table></span></a></span> = <span class='identifier'><a name='174_11' title='s:SS'>String</a></span>.<span class='identifier'><a name='174_18' title='s:ZFSS11fromCStringFMSSFGVSs13UnsafePointerVSs4Int8_GSqSS_'>fromCString</a></span>( <span class='identifier'><a name='174_31' title='c:@F@getcwd'>getcwd</a></span>( &amp;<span class='identifier'><a name='174_40' href='main.html#173_5' title='s:v7siteify4buffGSaVSs4Int8_'>buff</a></span>, <span class='identifier'><a name='174_46' href='main.html#173_5' title='s:v7siteify4buffGSaVSs4Int8_'>buff</a></span>.<span class='identifier'><a name='174_51' title='s:vSa5countSi'>count</a></span> ) )!
0175    
0176    <span class='keyword'><a name='176_1'>let</a></span> <span class='identifier'><a name='176_5' href='#' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>index<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#184_58"; return false;'>main.swift:184</td><td><pre>    fputs( "&lt;a href='\(filename)'>\(relative)&lt;a>&lt;br>\n", <b title='source.lang.swift.ref.var.global'>index</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#276_9"; return false;'>main.swift:276</td><td><pre>fclose( <b title='source.lang.swift.ref.var.global'>index</b> )</pre></td></table></span></a></span> = <span class='identifier'><a name='176_13' href='main.html#158_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='176_27'>"index.html"</a></span>, <span class='identifier'><a name='176_41'>patches</a></span>: [<span class='string'><a name='176_51'>"__DATE__"</a></span>: <span class='identifier'><a name='176_63' title='c:objc(cs)NSDate(im)init'>NSDate</a></span>().<span class='identifier'><a name='176_72' title='c:objc(cs)NSDate(py)description'>description</a></span>,
0177        <span class='string'><a name='177_5'>"__ROOT__"</a></span>: <span class='identifier'><a name='177_17' href='main.html#174_5' title='s:v7siteify3cwdSS'>cwd</a></span>.<span class='identifier'><a name='177_21' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='177_59' href='main.html#155_5' title='s:v7siteify4homeSS'>home</a></span>, <span class='identifier'><a name='177_65'>withString</a></span>: <span class='string'><a name='177_77'>"~"</a></span> )] )
0178    
0179    <span class='identifier'><a name='179_1' href='main.html#113_5' title='s:v7siteify6filenoSi'>fileno</a></span> = <span class='number'><a name='179_10'>0</a></span>
0180    
0181    <span class='keyword'><a name='181_1'>for</a></span> (<span class='identifier'><a name='181_6'>file</a></span>, <span class='identifier'><a name='181_12'>argv</a></span>) <span class='keyword'><a name='181_18'>in</a></span> <span class='identifier'><a name='181_21' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span> {
0182        <span class='keyword'><a name='182_5'>let</a></span> <span class='identifier'><a name='182_9'>filename</a></span> = <span class='identifier'><a name='182_20' href='Entity.html#17_6' title='s:F7siteify12fileFilenameFSSSS'>fileFilename</a></span>( <span class='identifier'><a name='182_34'>file</a></span> )+<span class='string'><a name='182_41'>".html"</a></span>
0183        <span class='keyword'><a name='183_5'>let</a></span> <span class='identifier'><a name='183_9'>relative</a></span> = <span class='identifier'><a name='183_20'>file</a></span>.<span class='identifier'><a name='183_25' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='identifier'><a name='183_63' href='main.html#174_5' title='s:v7siteify3cwdSS'>cwd</a></span>+<span class='string'><a name='183_67'>"/"</a></span>, <span class='identifier'><a name='183_72'>withString</a></span>: <span class='string'><a name='183_84'>""</a></span> )
0184        <span class='identifier'><a name='184_5' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='184_12'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='184_23'>(</a></span><span class='identifier'><a name='184_24'>filename</a></span><span class='string_interpolation_anchor'><a name='184_32'>)</a></span><span class='string'><a name='184_33'>'></a></span>\<span class='string_interpolation_anchor'><a name='184_36'>(</a></span><span class='identifier'><a name='184_37'>relative</a></span><span class='string_interpolation_anchor'><a name='184_45'>)</a></span><span class='string'><a name='184_46'>&lt;a>&lt;br>\n"</a></span>, <span class='identifier'><a name='184_58' href='main.html#176_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0185    
0186        <span class='identifier'><a name='186_5' href='main.html#113_5' title='s:v7siteify6filenoSi'>fileno</a></span> += <span class='number'><a name='186_15'>1</a></span>
0187        <span class='identifier'><a name='187_5' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='187_15'>"Saving </a></span>\<span class='string_interpolation_anchor'><a name='187_24'>(</a></span><span class='identifier'><a name='187_25' href='main.html#113_5' title='s:v7siteify6filenoSi'>fileno</a></span><span class='string_interpolation_anchor'><a name='187_31'>)</a></span><span class='string'><a name='187_32'>/</a></span>\<span class='string_interpolation_anchor'><a name='187_34'>(</a></span><span class='identifier'><a name='187_35' href='main.html#78_5' title='s:v7siteify12compilationsGSaTSSGVSs20UnsafeMutablePointerT____'>compilations</a></span>.<span class='identifier'><a name='187_48' title='s:vSa5countSi'>count</a></span><span class='string_interpolation_anchor'><a name='187_53'>)</a></span><span class='string'><a name='187_54'> html/</a></span>\<span class='string_interpolation_anchor'><a name='187_61'>(</a></span><span class='identifier'><a name='187_62'>filename</a></span><span class='string_interpolation_anchor'><a name='187_70'>)</a></span><span class='string'><a name='187_71'>"</a></span> )
0188    
0189        <span class='keyword'><a name='189_5'>if</a></span> <span class='keyword'><a name='189_8'>let</a></span> <span class='identifier'><a name='189_12'>data</a></span> = <span class='identifier'><a name='189_19' title='c:objc(cs)NSData(im)initWithContentsOfFile:'>NSData</a></span>( <span class='identifier'><a name='189_27'>contentsOfFile</a></span>: <span class='identifier'><a name='189_43'>file</a></span> ) {
0190            <span class='keyword'><a name='190_9'>let</a></span> <span class='identifier'><a name='190_13'>bytes</a></span> = <span class='identifier'><a name='190_21' title='s:VSs13UnsafePointer'>UnsafePointer</a></span>&lt;<span class='typeidentifier'><a name='190_35' title='s:VSs4Int8'>Int8</a></span>>( <span class='identifier'><a name='190_42'>data</a></span>.<span class='identifier'><a name='190_47' title='c:objc(cs)NSData(py)bytes'>bytes</a></span> )
0191            <span class='keyword'><a name='191_9'>let</a></span> <span class='identifier'><a name='191_13'>newline</a></span> = <span class='identifier'><a name='191_23' title='s:FVSs4Int8cFMS_FVSs6UInt16S_'>Int8</a></span>(<span class='string'><a name='191_28'>"\n"</a></span>.<span class='identifier'><a name='191_33' title='s:vSS5utf16VSS9UTF16View'>utf16</a></span>.<span class='identifier'><a name='191_39' title='s:veRq_Ss14CollectionTypeqq_Ss9Indexable5IndexSs22BidirectionalIndexType_SsS_4lastGSqqqq_S_9GeneratorSs13GeneratorType7Element_'>last</a></span>!)
0192            <span class='keyword'><a name='192_9'>var</a></span> <span class='identifier'><a name='192_13'>ptr</a></span> = <span class='number'><a name='192_19'>0</a></span>, <span class='identifier'><a name='192_22'>line</a></span> = <span class='number'><a name='192_29'>1</a></span>, <span class='identifier'><a name='192_32'>col</a></span> = <span class='number'><a name='192_38'>1</a></span>
0193    
0194            <span class='keyword'><a name='194_9'>func</a></span> <span class='identifier'><a name='194_14'>skipTo</a></span>( <span class='identifier'><a name='194_22'>offset</a></span>: <span class='typeidentifier'><a name='194_30' title='s:Si'>Int</a></span> ) -> <span class='typeidentifier'><a name='194_39' title='s:SS'>String</a></span> {
0195                <span class='keyword'><a name='195_13'>let</a></span> <span class='identifier'><a name='195_17'>out</a></span> = <span class='identifier'><a name='195_23' title='c:objc(cs)NSString(im)initWithBytes:length:encoding:'>NSString</a></span>( <span class='identifier'><a name='195_33'>bytes</a></span>: <span class='identifier'><a name='195_40'>bytes</a></span>+<span class='identifier'><a name='195_46'>ptr</a></span>, <span class='identifier'><a name='195_51'>length</a></span>: <span class='identifier'><a name='195_59'>offset</a></span>-<span class='identifier'><a name='195_66'>ptr</a></span>, <span class='identifier'><a name='195_71'>encoding</a></span>: <span class='identifier'><a name='195_81' title='s:v10Foundation20NSUTF8StringEncodingSu'>NSUTF8StringEncoding</a></span> ) ?? <span class='string'><a name='195_107'>""</a></span>
0196                <span class='keyword'><a name='196_13'>while</a></span> <span class='identifier'><a name='196_19'>ptr</a></span> &lt; <span class='identifier'><a name='196_25'>offset</a></span> {
0197                    <span class='keyword'><a name='197_17'>if</a></span> <span class='identifier'><a name='197_20'>bytes</a></span>[<span class='identifier'><a name='197_26'>ptr</a></span>] == <span class='identifier'><a name='197_34'>newline</a></span> {
0198                        <span class='identifier'><a name='198_21'>line</a></span> += <span class='number'><a name='198_29'>1</a></span>
0199                        <span class='identifier'><a name='199_21'>col</a></span> = <span class='number'><a name='199_27'>1</a></span>
0200                    }
0201                    <span class='keyword'><a name='201_17'>else</a></span> {
0202                        <span class='identifier'><a name='202_21'>col</a></span> += <span class='number'><a name='202_28'>1</a></span>
0203                    }
0204                    <span class='identifier'><a name='204_17'>ptr</a></span> += <span class='number'><a name='204_24'>1</a></span>
0205                }
0206                <span class='keyword'><a name='206_13'>return</a></span> <span class='identifier'><a name='206_20'>out</a></span>.<span class='identifier'><a name='206_24' title='c:objc(cs)NSString(im)stringByReplacingOccurrencesOfString:withString:'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='206_62'>"&amp;"</a></span>, <span class='identifier'><a name='206_67'>withString</a></span>: <span class='string'><a name='206_79'>"&amp;amp;"</a></span> )
0207                          .<span class='identifier'><a name='207_24' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='207_62'>"&lt;"</a></span>, <span class='identifier'><a name='207_67'>withString</a></span>: <span class='string'><a name='207_79'>"&amp;lt;"</a></span> ) <span class='keyword'><a name='207_88'>as</a></span> <span class='typeidentifier'><a name='207_91' title='s:SS'>String</a></span>
0208            }
0209    
0210            <span class='keyword'><a name='210_9'>var</a></span> <span class='identifier'><a name='210_13'>html</a></span> = <span class='string'><a name='210_20'>""</a></span>
0211    
0212            <span class='keyword'><a name='212_9'>let</a></span> <span class='identifier'><a name='212_13'>resp</a></span> = <span class='identifier'><a name='212_20' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='212_23' href='SourceKit.html#149_10' title='s:FC7siteify9SourceKit9syntaxMapFS0_FTSS12compilerArgsGVSs20UnsafeMutablePointerT___GS1_T__'>syntaxMap</a></span>( <span class='identifier'><a name='212_34'>file</a></span>, <span class='identifier'><a name='212_40'>compilerArgs</a></span>: <span class='identifier'><a name='212_54'>argv</a></span> )
0213            <span class='keyword'><a name='213_9'>let</a></span> <span class='identifier'><a name='213_13'>dict</a></span> = <span class='identifier'><a name='213_20' title='c:@F@sourcekitd_response_get_value'>sourcekitd_response_get_value</a></span>( <span class='identifier'><a name='213_51'>resp</a></span> )
0214            <span class='keyword'><a name='214_9'>let</a></span> <span class='identifier'><a name='214_13'>map</a></span> = <span class='identifier'><a name='214_19' title='c:@F@sourcekitd_variant_dictionary_get_value'>sourcekitd_variant_dictionary_get_value</a></span>( <span class='identifier'><a name='214_60'>dict</a></span>, <span class='identifier'><a name='214_66' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='214_69' href='SourceKit.html#67_14' title='s:vC7siteify9SourceKit8syntaxIDVSs14COpaquePointer'>syntaxID</a></span> )
0215            <span class='identifier'><a name='215_9' title='c:@F@sourcekitd_variant_array_apply'>sourcekitd_variant_array_apply</a></span>( <span class='identifier'><a name='215_41'>map</a></span> ) { (<span class='keyword'><a name='215_50'>_</a></span>,<span class='identifier'><a name='215_52'>dict</a></span>) <span class='keyword'><a name='215_58'>in</a></span>
0216                <span class='keyword'><a name='216_13'>let</a></span> <span class='identifier'><a name='216_17'>offset</a></span> = <span class='identifier'><a name='216_26'>dict</a></span>.<span class='identifier'><a name='216_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='216_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='216_42' href='SourceKit.html#59_14' title='s:vC7siteify9SourceKit8offsetIDVSs14COpaquePointer'>offsetID</a></span> )
0217                <span class='keyword'><a name='217_13'>let</a></span> <span class='identifier'><a name='217_17'>length</a></span> = <span class='identifier'><a name='217_26'>dict</a></span>.<span class='identifier'><a name='217_31' href='SourceKit.html#27_10' title='s:FE7siteifyVSC20sourcekitd_variant_t6getIntFS0_FVSs14COpaquePointerSi'>getInt</a></span>( <span class='identifier'><a name='217_39' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='217_42' href='SourceKit.html#74_14' title='s:vC7siteify9SourceKit8lengthIDVSs14COpaquePointer'>lengthID</a></span> )
0218    
0219                <span class='identifier'><a name='219_13'>html</a></span> += <span class='identifier'><a name='219_21'>skipTo</a></span>( <span class='identifier'><a name='219_29'>offset</a></span> )
0220    
0221                <span class='keyword'><a name='221_13'>let</a></span> <span class='identifier'><a name='221_17'>ent</a></span> = <span class='identifier'><a name='221_23' href='Entity.html#34_5' title='s:FC7siteify6EntitycFMS0_FT4fileSS4lineSi3colSi4kindGSqSS_4declSb_S0_'>Entity</a></span>( <span class='identifier'><a name='221_31'>file</a></span>: <span class='identifier'><a name='221_37'>file</a></span>, <span class='identifier'><a name='221_43'>line</a></span>: <span class='identifier'><a name='221_49'>line</a></span>, <span class='identifier'><a name='221_55'>col</a></span>: <span class='identifier'><a name='221_60'>col</a></span> )
0222                <span class='keyword'><a name='222_13'>let</a></span> <span class='identifier'><a name='222_17'>text</a></span> = <span class='identifier'><a name='222_24'>skipTo</a></span>( <span class='identifier'><a name='222_32'>offset</a></span>+<span class='identifier'><a name='222_39'>length</a></span> )
0223                <span class='keyword'><a name='223_13'>var</a></span> <span class='identifier'><a name='223_17'>span</a></span> = <span class='string'><a name='223_24'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='223_35'>(</a></span><span class='identifier'><a name='223_36'>ent</a></span>.<span class='identifier'><a name='223_40' href='Entity.html#46_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='223_46'>)</a></span><span class='string'><a name='223_47'>'></a></span>\<span class='string_interpolation_anchor'><a name='223_50'>(</a></span><span class='identifier'><a name='223_51'>text</a></span><span class='string_interpolation_anchor'><a name='223_55'>)</a></span><span class='string'><a name='223_56'>&lt;/a>"</a></span>
0224    
0225                <span class='keyword'><a name='225_13'>let</a></span> <span class='identifier'><a name='225_17'>kind</a></span> = <span class='identifier'><a name='225_24'>dict</a></span>.<span class='identifier'><a name='225_29' href='SourceKit.html#39_10' title='s:FE7siteifyVSC20sourcekitd_variant_t13getUUIDStringFS0_FVSs14COpaquePointerSS'>getUUIDString</a></span>( <span class='identifier'><a name='225_44' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='225_47' href='SourceKit.html#75_14' title='s:vC7siteify9SourceKit6kindIDVSs14COpaquePointer'>kindID</a></span> )
0226                <span class='keyword'><a name='226_13'>let</a></span> <span class='identifier'><a name='226_17'>kindSuffix</a></span> = <span class='identifier'><a name='226_30' title='c:objc(cs)NSURL(im)initFileURLWithPath:'>NSURL</a></span>( <span class='identifier'><a name='226_37'>fileURLWithPath</a></span>: <span class='identifier'><a name='226_54'>kind</a></span> ).<span class='identifier'><a name='226_61' title='c:objc(cs)NSURL(py)pathExtension'>pathExtension</a></span>!
0227    
0228                <span class='keyword'><a name='228_13'>if</a></span> <span class='identifier'><a name='228_16'>kindSuffix</a></span> == <span class='string'><a name='228_30'>"url"</a></span> {
0229                    <span class='identifier'><a name='229_17'>span</a></span> = <span class='string'><a name='229_24'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='229_35'>(</a></span><span class='identifier'><a name='229_36'>text</a></span><span class='string_interpolation_anchor'><a name='229_40'>)</a></span><span class='string'><a name='229_41'>'></a></span>\<span class='string_interpolation_anchor'><a name='229_44'>(</a></span><span class='identifier'><a name='229_45'>text</a></span><span class='string_interpolation_anchor'><a name='229_49'>)</a></span><span class='string'><a name='229_50'>&lt;/a>"</a></span>
0230                }
0231                <span class='keyword'><a name='231_13'>else</a></span> <span class='keyword'><a name='231_18'>if</a></span> <span class='keyword'><a name='231_21'>let</a></span> <span class='identifier'><a name='231_25'>dict</a></span> = <span class='identifier'><a name='231_32' href='main.html#102_5' title='s:v7siteify8entitiesGVSs10DictionaryCS_6EntityVSC20sourcekitd_variant_t_'>entities</a></span>[<span class='identifier'><a name='231_41'>ent</a></span>], <span class='identifier'><a name='231_47'>usrString</a></span> = <span class='identifier'><a name='231_59'>dict</a></span>.<span class='identifier'><a name='231_64' href='SourceKit.html#31_10' title='s:FE7siteifyVSC20sourcekitd_variant_t9getStringFS0_FVSs14COpaquePointerGSqSS_'>getString</a></span>( <span class='identifier'><a name='231_75' href='main.html#16_5' title='s:v7siteify2SKCS_9SourceKit'>SK</a></span>.<span class='identifier'><a name='231_78' href='SourceKit.html#79_14' title='s:vC7siteify9SourceKit5usrIDVSs14COpaquePointer'>usrID</a></span> ) {
0232                    <span class='keyword'><a name='232_17'>if</a></span> <span class='keyword'><a name='232_20'>let</a></span> <span class='identifier'><a name='232_24'>usr</a></span> = <span class='identifier'><a name='232_30' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='232_35'>usrString</a></span>], <span class='identifier'><a name='232_47'>decl</a></span> = <span class='identifier'><a name='232_54'>usr</a></span>.<span class='identifier'><a name='232_58' href='main.html#108_9' title='s:vC7siteify3USR9declaringGSqCS_6Entity_'>declaring</a></span> {
0233                        <span class='keyword'><a name='233_21'>if</a></span> <span class='identifier'><a name='233_24'>decl</a></span> != <span class='identifier'><a name='233_32'>ent</a></span> {
0234                            <span class='identifier'><a name='234_25'>span</a></span> = <span class='string'><a name='234_32'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='234_43'>(</a></span><span class='identifier'><a name='234_44'>ent</a></span>.<span class='identifier'><a name='234_48' href='Entity.html#46_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='234_54'>)</a></span><span class='string'><a name='234_55'>' href='</a></span>\<span class='string_interpolation_anchor'><a name='234_64'>(</a></span><span class='identifier'><a name='234_65'>decl</a></span>.<span class='identifier'><a name='234_70' href='Entity.html#54_9' title='s:vC7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='234_74'>)</a></span><span class='string'><a name='234_75'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='234_85'>(</a></span><span class='identifier'><a name='234_86'>usrString</a></span><span class='string_interpolation_anchor'><a name='234_95'>)</a></span><span class='string'><a name='234_96'>'></a></span>\<span class='string_interpolation_anchor'><a name='234_99'>(</a></span><span class='identifier'><a name='234_100'>text</a></span><span class='string_interpolation_anchor'><a name='234_104'>)</a></span><span class='string'><a name='234_105'>&lt;/a>"</a></span>
0235                        }
0236                        <span class='keyword'><a name='236_21'>else</a></span> <span class='keyword'><a name='236_26'>if</a></span> <span class='identifier'><a name='236_29'>usr</a></span>.<span class='identifier'><a name='236_33' href='main.html#106_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>.<span class='identifier'><a name='236_44' title='s:vSa5countSi'>count</a></span> > <span class='number'><a name='236_52'>1</a></span> {
0237                            <span class='keyword'><a name='237_25'>var</a></span> <span class='identifier'><a name='237_29'>popup</a></span> = <span class='string'><a name='237_37'>""</a></span>
0238                            <span class='keyword'><a name='238_25'>for</a></span> <span class='identifier'><a name='238_29'>i</a></span> <span class='keyword'><a name='238_31'>in</a></span> <span class='number'><a name='238_34'>0</a></span>..&lt;<span class='identifier'><a name='238_38'>usr</a></span>.<span class='identifier'><a name='238_42' href='main.html#106_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>.<span class='identifier'><a name='238_53' title='s:vSa5countSi'>count</a></span> {
0239                                <span class='keyword'><a name='239_29'>let</a></span> <span class='identifier'><a name='239_33'>ref</a></span> = <span class='identifier'><a name='239_39'>usr</a></span>.<span class='identifier'><a name='239_43' href='main.html#106_9' title='s:vC7siteify3USR10referencesGSaCS_6Entity_'>references</a></span>[<span class='identifier'><a name='239_54'>i</a></span>]
0240                                <span class='keyword'><a name='240_29'>if</a></span> <span class='identifier'><a name='240_32'>ref</a></span> == <span class='identifier'><a name='240_39'>ent</a></span> {
0241                                    <span class='keyword'><a name='241_33'>continue</a></span>
0242                                }
0243                                <span class='keyword'><a name='243_29'>let</a></span> <span class='identifier'><a name='243_33'>keepListOpen</a></span> = <span class='identifier'><a name='243_48'>ref</a></span>.<span class='identifier'><a name='243_52' href='Entity.html#32_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> != <span class='identifier'><a name='243_60'>decl</a></span>.<span class='identifier'><a name='243_65' href='Entity.html#32_9' title='s:vC7siteify6Entity4fileSS'>file</a></span> ? <span class='string'><a name='243_72'>"event.stopPropagation(); "</a></span> : <span class='string'><a name='243_102'>""</a></span>
0244                                <span class='identifier'><a name='244_29'>popup</a></span> += <span class='string'><a name='244_38'>"&lt;tr>&lt;td style='text-decoration: underline;' onclick='document.location.href=\"</a></span>\(<span class='identifier'><a name='244_119'>ref</a></span>.<span class='identifier'><a name='244_123' href='Entity.html#54_9' title='s:vC7siteify6Entity4hrefSS'>href</a></span><span class='string_interpolation_anchor'><a name='244_127'>)</a></span><span class='string'><a name='244_128'>\"; </a></span>\<span class='string_interpolation_anchor'><a name='244_133'>(</a></span><span class='identifier'><a name='244_134'>keepListOpen</a></span><span class='string_interpolation_anchor'><a name='244_146'>)</a></span><span class='string'><a name='244_147'>return false;'></a></span>\<span class='string_interpolation_anchor'><a name='244_163'>(</a></span><span class='identifier'><a name='244_164'>ref</a></span>.<span class='identifier'><a name='244_168' href='Entity.html#50_9' title='s:vC7siteify6Entity8filenameSS'>filename</a></span><span class='string_interpolation_anchor'><a name='244_176'>)</a></span><span class='string'><a name='244_177'>.swift:</a></span>\<span class='string_interpolation_anchor'><a name='244_185'>(</a></span><span class='identifier'><a name='244_186'>ref</a></span>.<span class='identifier'><a name='244_190' href='Entity.html#32_23' title='s:vC7siteify6Entity4lineSi'>line</a></span><span class='string_interpolation_anchor'><a name='244_194'>)</a></span><span class='string'><a name='244_195'>&lt;/td>"</a></span>
0245                                <span class='identifier'><a name='245_29'>popup</a></span> += <span class='string'><a name='245_38'>"&lt;td>&lt;pre></a></span>\<span class='string_interpolation_anchor'><a name='245_49'>(</a></span><span class='identifier'><a name='245_50'>usr</a></span>.<span class='identifier'><a name='245_54' href='main.html#107_9' title='s:vC7siteify3USR8reflinesGSaSS_'>reflines</a></span>[<span class='identifier'><a name='245_63'>i</a></span>]<span class='string_interpolation_anchor'><a name='245_65'>)</a></span><span class='string'><a name='245_66'>&lt;/pre>&lt;/td>"</a></span>
0246                            }
0247                            <span class='identifier'><a name='247_25'>span</a></span> = <span class='string'><a name='247_32'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='247_43'>(</a></span><span class='identifier'><a name='247_44'>ent</a></span>.<span class='identifier'><a name='247_48' href='Entity.html#46_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='247_54'>)</a></span><span class='string'><a name='247_55'>' href='#' title='</a></span>\<span class='string_interpolation_anchor'><a name='247_74'>(</a></span><span class='identifier'><a name='247_75'>usrString</a></span><span class='string_interpolation_anchor'><a name='247_84'>)</a></span><span class='string'><a name='247_85'>' onclick='return expand(this);'>"</a></span> +
0248                                            <span class='string'><a name='248_41'>"</a></span>\<span class='string_interpolation_anchor'><a name='248_43'>(</a></span><span class='identifier'><a name='248_44'>text</a></span><span class='string_interpolation_anchor'><a name='248_48'>)</a></span><span class='string'><a name='248_49'>&lt;span class='references'>&lt;table></a></span>\<span class='string_interpolation_anchor'><a name='248_82'>(</a></span><span class='identifier'><a name='248_83'>popup</a></span><span class='string_interpolation_anchor'><a name='248_88'>)</a></span><span class='string'><a name='248_89'>&lt;/table>&lt;/span>&lt;/a>"</a></span>
0249                        }
0250                    }
0251                    <span class='keyword'><a name='251_17'>else</a></span> {
0252                        <span class='identifier'><a name='252_21'>span</a></span> = <span class='string'><a name='252_28'>"&lt;a name='</a></span>\<span class='string_interpolation_anchor'><a name='252_39'>(</a></span><span class='identifier'><a name='252_40'>ent</a></span>.<span class='identifier'><a name='252_44' href='Entity.html#46_9' title='s:vC7siteify6Entity6anchorSS'>anchor</a></span><span class='string_interpolation_anchor'><a name='252_50'>)</a></span><span class='string'><a name='252_51'>' title='</a></span>\<span class='string_interpolation_anchor'><a name='252_61'>(</a></span><span class='identifier'><a name='252_62'>usrString</a></span><span class='string_interpolation_anchor'><a name='252_71'>)</a></span><span class='string'><a name='252_72'>'></a></span>\<span class='string_interpolation_anchor'><a name='252_75'>(</a></span><span class='identifier'><a name='252_76'>text</a></span><span class='string_interpolation_anchor'><a name='252_80'>)</a></span><span class='string'><a name='252_81'>&lt;/a>"</a></span>
0253                    }
0254                }
0255    
0256                <span class='identifier'><a name='256_13'>html</a></span> += <span class='string'><a name='256_21'>"&lt;span class='</a></span>\<span class='string_interpolation_anchor'><a name='256_36'>(</a></span><span class='identifier'><a name='256_37'>kindSuffix</a></span><span class='string_interpolation_anchor'><a name='256_47'>)</a></span><span class='string'><a name='256_48'>'></a></span>\<span class='string_interpolation_anchor'><a name='256_51'>(</a></span><span class='identifier'><a name='256_52'>span</a></span><span class='string_interpolation_anchor'><a name='256_56'>)</a></span><span class='string'><a name='256_57'>&lt;/span>"</a></span>
0257                <span class='keyword'><a name='257_13'>return</a></span> <span class='keyword'><a name='257_20'>true</a></span>
0258            }
0259    
0260            <span class='identifier'><a name='260_9'>html</a></span> += <span class='identifier'><a name='260_17'>skipTo</a></span>( <span class='identifier'><a name='260_25'>data</a></span>.<span class='identifier'><a name='260_30' title='c:objc(cs)NSData(py)length'>length</a></span> )
0261    
0262            <span class='keyword'><a name='262_9'>let</a></span> <span class='identifier'><a name='262_13'>htmp</a></span> = <span class='identifier'><a name='262_20' href='SwiftRegex.html#264_13' title='s:F7siteify12RegexMutableFCSo8NSStringCSo15NSMutableString'>RegexMutable</a></span>( <span class='identifier'><a name='262_34'>html</a></span> )
0263            <span class='identifier'><a name='263_9'>line</a></span> = <span class='number'><a name='263_16'>0</a></span>
0264    
0265            <span class='identifier'><a name='265_9'>htmp</a></span>[<span class='string'><a name='265_14'>"(^|\\n)"</a></span>] ~= { (<span class='identifier'><a name='265_31'>group</a></span>: <span class='typeidentifier'><a name='265_38' title='s:SS'>String</a></span>) <span class='keyword'><a name='265_46'>in</a></span>
0266                <span class='identifier'><a name='266_13'>line</a></span> += <span class='number'><a name='266_21'>1</a></span>
0267                <span class='keyword'><a name='267_13'>return</a></span> <span class='identifier'><a name='267_20'>group</a></span> + (<span class='identifier'><a name='267_29' title='s:FE10FoundationCSo8NSStringcFMS0_Ft6formatS0_GSaPSs11CVarArgType___S0_'>NSString</a></span>( <span class='identifier'><a name='267_39'>format</a></span>: <span class='string'><a name='267_47'>"%04d    "</a></span>, <span class='identifier'><a name='267_59'>line</a></span> ) <span class='keyword'><a name='267_66'>as</a></span> <span class='typeidentifier'><a name='267_69' title='s:SS'>String</a></span>)
0268            }
0269    
0270            <span class='keyword'><a name='270_9'>let</a></span> <span class='identifier'><a name='270_13'>out</a></span> = <span class='identifier'><a name='270_19' href='main.html#158_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='270_33'>"source.html"</a></span>, <span class='identifier'><a name='270_48'>patches</a></span>: [:], <span class='identifier'><a name='270_62'>dest</a></span>: <span class='string'><a name='270_68'>"html/"</a></span>+<span class='identifier'><a name='270_76'>filename</a></span> )
0271            <span class='identifier'><a name='271_9' title='c:@F@fputs'>fputs</a></span>( <span class='identifier'><a name='271_16'>htmp</a></span>.<span class='identifier'><a name='271_21' title='c:objc(cs)NSString(py)UTF8String'>UTF8String</a></span>, <span class='identifier'><a name='271_33'>out</a></span> )
0272            <span class='identifier'><a name='272_9' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='272_17'>out</a></span> )
0273        }
0274    }
0275    
0276    <span class='identifier'><a name='276_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='276_9' href='main.html#176_5' title='s:v7siteify5indexGVSs20UnsafeMutablePointerVSC7__sFILE_'>index</a></span> )
0277    
0278    <span class='keyword'><a name='278_1'>var</a></span> <span class='identifier'><a name='278_5' href='#' title='s:v7siteify8xrefDataGSaTSSSS__' onclick='return expand(this);'>xrefData<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#283_9"; return false;'>main.swift:283</td><td><pre>        <b title='source.lang.swift.ref.var.global'>xrefData</b>.append( (_stdlib_demangleName( "_T"+usrString ), decl.href) )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#287_1"; return false;'>main.swift:287</td><td><pre><b title='source.lang.swift.ref.var.global'>xrefData</b>.sortInPlace( { $0.0 &lt; $1.0 } )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#291_22"; return false;'>main.swift:291</td><td><pre>for (symbol,href) in <b title='source.lang.swift.ref.var.global'>xrefData</b> {</pre></td></table></span></a></span> = [(<span class='identifier'><a name='278_18' title='s:SS'>String</a></span>,<span class='identifier'><a name='278_25' title='s:SS'>String</a></span>)]()
0279    
0280    <span class='keyword'><a name='280_1'>for</a></span> (<span class='identifier'><a name='280_6'>usrString</a></span>, <span class='identifier'><a name='280_17'>usr</a></span>) <span class='keyword'><a name='280_22'>in</a></span> <span class='identifier'><a name='280_25' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span> {
0281        <span class='keyword'><a name='281_5'>if</a></span> <span class='identifier'><a name='281_8'>usrString</a></span>.<span class='identifier'><a name='281_18' title='s:FSS9hasPrefixFSSFSSSb'>hasPrefix</a></span>( <span class='string'><a name='281_29'>"s:"</a></span> ), <span class='keyword'><a name='281_37'>let</a></span> <span class='identifier'><a name='281_41'>decl</a></span> = <span class='identifier'><a name='281_48' href='main.html#112_5' title='s:v7siteify4usrsGVSs10DictionarySSCS_3USR_'>usrs</a></span>[<span class='identifier'><a name='281_53'>usrString</a></span>]?.<span class='identifier'><a name='281_65' href='main.html#108_9' title='s:vC7siteify3USR9declaringGSqCS_6Entity_'>declaring</a></span> {
0282            <span class='keyword'><a name='282_9'>let</a></span> <span class='identifier'><a name='282_13'>usrString</a></span> = <span class='identifier'><a name='282_25'>usrString</a></span>.<span class='identifier'><a name='282_35' title='s:FE10FoundationSS18substringFromIndexFSSFVVSS13CharacterView5IndexSS'>substringFromIndex</a></span>( <span class='identifier'><a name='282_55'>usrString</a></span>.<span class='identifier'><a name='282_65' title='s:vSS10startIndexVVSS13CharacterView5Index'>startIndex</a></span>.<span class='identifier'><a name='282_76' title='s:FeRq_Ss22BidirectionalIndexType_SsS_10advancedByuRq_S__Fq_Fqq_Ss16ForwardIndexType8Distanceq_'>advancedBy</a></span>( <span class='number'><a name='282_88'>2</a></span> ) )
0283            <span class='identifier'><a name='283_9' href='main.html#278_5' title='s:v7siteify8xrefDataGSaTSSSS__'>xrefData</a></span>.<span class='identifier'><a name='283_18' title='s:FSa6appendurFRGSaq__Fq_T_'>append</a></span>( (<span class='identifier'><a name='283_27'>_stdlib_demangleName</a></span>( <span class='string'><a name='283_49'>"_T"</a></span>+<span class='identifier'><a name='283_54'>usrString</a></span> ), <span class='identifier'><a name='283_67'>decl</a></span>.<span class='identifier'><a name='283_72' href='Entity.html#54_9' title='s:vC7siteify6Entity4hrefSS'>href</a></span>) )
0284        }
0285    }
0286    
0287    <span class='identifier'><a name='287_1' href='main.html#278_5' title='s:v7siteify8xrefDataGSaTSSSS__'>xrefData</a></span>.<span class='identifier'><a name='287_10' title='s:FeRq_Ss21MutableCollectionTypeqq_Ss16MutableIndexable5IndexSs21RandomAccessIndexType_SsS_11sortInPlaceuRq_S_qq_S0_5IndexS1__FRq_FFTqqq_Ss14CollectionType9GeneratorSs13GeneratorType7Elementqqq_S2_9GeneratorS3_7Element_SbT_'>sortInPlace</a></span>( { <span class='identifier'><a name='287_25'>$0</a></span>.<span class='number'><a name='287_28'>0</a></span> &lt; <span class='identifier'><a name='287_32'>$1</a></span>.<span class='number'><a name='287_35'>0</a></span> } )
0288    
0289    <span class='keyword'><a name='289_1'>let</a></span> <span class='identifier'><a name='289_5' href='#' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_' onclick='return expand(this);'>xref<span class='references'><table><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#293_52"; return false;'>main.swift:293</td><td><pre>    fputs( "&lt;a href='\(href)'>\(symbol)&lt;a>&lt;br>\n", <b title='source.lang.swift.ref.var.global'>xref</b> )</pre></td><tr><td style='text-decoration: underline;' onclick='document.location.href="main.html#296_9"; return false;'>main.swift:296</td><td><pre>fclose( <b title='source.lang.swift.ref.var.global'>xref</b> )</pre></td></table></span></a></span> = <span class='identifier'><a name='289_12' href='main.html#158_6' title='s:F7siteify12copyTemplateFTSS7patchesGVSs10DictionarySSSS_4destGSqSS__GVSs20UnsafeMutablePointerVSC7__sFILE_'>copyTemplate</a></span>( <span class='string'><a name='289_26'>"xref.html"</a></span> )
0290    
0291    <span class='keyword'><a name='291_1'>for</a></span> (<span class='identifier'><a name='291_6'>symbol</a></span>,<span class='identifier'><a name='291_13'>href</a></span>) <span class='keyword'><a name='291_19'>in</a></span> <span class='identifier'><a name='291_22' href='main.html#278_5' title='s:v7siteify8xrefDataGSaTSSSS__'>xrefData</a></span> {
0292        <span class='keyword'><a name='292_5'>let</a></span> <span class='identifier'><a name='292_9'>symbol</a></span> = <span class='identifier'><a name='292_18'>symbol</a></span>.<span class='identifier'><a name='292_25' title='s:FE10FoundationSS36stringByReplacingOccurrencesOfStringFSSFTSS10withStringSS7optionsVSC22NSStringCompareOptions5rangeGSqGVSs5RangeVVSS13CharacterView5Index___SS'>stringByReplacingOccurrencesOfString</a></span>( <span class='string'><a name='292_63'>"&lt;"</a></span>, <span class='identifier'><a name='292_68'>withString</a></span>: <span class='string'><a name='292_80'>"&amp;lt;"</a></span> )
0293        <span class='identifier'><a name='293_5' title='c:@F@fputs'>fputs</a></span>( <span class='string'><a name='293_12'>"&lt;a href='</a></span>\<span class='string_interpolation_anchor'><a name='293_23'>(</a></span><span class='identifier'><a name='293_24'>href</a></span><span class='string_interpolation_anchor'><a name='293_28'>)</a></span><span class='string'><a name='293_29'>'></a></span>\<span class='string_interpolation_anchor'><a name='293_32'>(</a></span><span class='identifier'><a name='293_33'>symbol</a></span><span class='string_interpolation_anchor'><a name='293_39'>)</a></span><span class='string'><a name='293_40'>&lt;a>&lt;br>\n"</a></span>, <span class='identifier'><a name='293_52' href='main.html#289_5' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_'>xref</a></span> )
0294    }
0295    
0296    <span class='identifier'><a name='296_1' title='c:@F@fclose'>fclose</a></span>( <span class='identifier'><a name='296_9' href='main.html#289_5' title='s:v7siteify4xrefGVSs20UnsafeMutablePointerVSC7__sFILE_'>xref</a></span> )
0297    
0298    <span class='identifier'><a name='298_1' href='main.html#19_6' title='s:F7siteify8progressFSST_'>progress</a></span>( <span class='string'><a name='298_11'>"Site built, open ./html/index.html in your browser.\n"</a></span> )
0299    